{"ast":null,"code":"import _objectSpread from\"C:/Users/suchindra/Downloads/Deadlock_Online_Shopping/dashboard/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React from'react';import{motion}from'framer-motion';import GlassCard from'./GlassCard';import OSSimulation from'./OSSimulation';import{Cpu,Layers,GitBranch,Lock,Unlock,Clock,MemoryStick,AlertTriangle,ShieldCheck,ArrowRight,Activity,Zap,Server,RefreshCw,Terminal}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const fadeUp={initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.5}};function SectionTitle(_ref){let{icon:Icon,title,subtitle}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-3 mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 rounded-xl bg-accent/10 border border-accent/20 mt-0.5\",children:/*#__PURE__*/_jsx(Icon,{size:18,className:\"text-accent-light\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-bold text-white\",children:title}),subtitle&&/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-surface-400 mt-0.5\",children:subtitle})]})]});}function StepCard(_ref2){let{number,title,description,code,color='accent'}=_ref2;const colorMap={accent:'border-accent/30 bg-accent/5',blue:'border-blue-400/30 bg-blue-400/5',green:'border-emerald-400/30 bg-emerald-400/5',amber:'border-amber-400/30 bg-amber-400/5',rose:'border-rose-400/30 bg-rose-400/5',purple:'border-purple-400/30 bg-purple-400/5'};const numColor={accent:'bg-accent/20 text-accent-light border-accent/30',blue:'bg-blue-400/20 text-blue-400 border-blue-400/30',green:'bg-emerald-400/20 text-emerald-400 border-emerald-400/30',amber:'bg-amber-400/20 text-amber-400 border-amber-400/30',rose:'bg-rose-400/20 text-rose-400 border-rose-400/30',purple:'bg-purple-400/20 text-purple-400 border-purple-400/30'};return/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-xl border p-5 \".concat(colorMap[color]),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"flex items-center justify-center w-8 h-8 rounded-lg text-xs font-bold border \".concat(numColor[color]),children:number}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-bold text-white\",children:title})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-surface-300 leading-relaxed mb-3\",children:description}),code&&/*#__PURE__*/_jsx(\"pre\",{className:\"text-[11px] text-surface-300 bg-surface-900/60 rounded-lg p-3 overflow-x-auto font-mono border border-surface-700/30\",children:code})]});}function ThreadBox(_ref3){let{name,role,color,status}=_ref3;const colorMap={blue:'border-blue-400/40 bg-blue-400/10 text-blue-400',green:'border-emerald-400/40 bg-emerald-400/10 text-emerald-400',amber:'border-amber-400/40 bg-amber-400/10 text-amber-400',rose:'border-rose-400/40 bg-rose-400/10 text-rose-400',purple:'border-purple-400/40 bg-purple-400/10 text-purple-400'};return/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-xl border p-4 \".concat(colorMap[color],\" text-center\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-bold mb-1\",children:name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-[10px] text-surface-400 mb-2\",children:role}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-block text-[9px] font-semibold px-2 py-0.5 rounded-full bg-surface-800/60 border border-surface-600/30 text-surface-300\",children:status})]});}export default function OSExecutionPage(){return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsx(motion.div,_objectSpread(_objectSpread({},fadeUp),{},{children:/*#__PURE__*/_jsxs(GlassCard,{className:\"p-8 text-center\",glow:\"accent\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded-2xl bg-accent/10 border border-accent/20\",children:/*#__PURE__*/_jsx(Cpu,{size:32,className:\"text-accent-light\"})})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl sm:text-3xl font-extrabold text-white mb-3\",children:\"How the OS Executes This Application\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-surface-300 text-sm max-w-2xl mx-auto leading-relaxed\",children:[\"A deep dive into how the operating system manages\",' ',/*#__PURE__*/_jsx(\"span\",{className:\"text-accent-light font-semibold\",children:\"processes\"}),\",\",' ',/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-400 font-semibold\",children:\"threads\"}),\",\",' ',/*#__PURE__*/_jsx(\"span\",{className:\"text-amber-400 font-semibold\",children:\"synchronization\"}),\", and\",' ',/*#__PURE__*/_jsx(\"span\",{className:\"text-rose-400 font-semibold\",children:\"deadlock scenarios\"}),' ',\"when running our C backend.\"]})]})})),/*#__PURE__*/_jsx(motion.div,_objectSpread(_objectSpread({},fadeUp),{},{transition:{delay:0.05},children:/*#__PURE__*/_jsx(OSSimulation,{})})),/*#__PURE__*/_jsx(motion.div,_objectSpread(_objectSpread({},fadeUp),{},{transition:{delay:0.1},children:/*#__PURE__*/_jsxs(GlassCard,{className:\"p-6\",children:[/*#__PURE__*/_jsx(SectionTitle,{icon:Server,title:\"1. Process Creation\",subtitle:\"How the OS loads and starts our program\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 text-xs text-surface-300 leading-relaxed\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"When you execute the compiled binary, the OS performs these steps:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:['The shell calls fork() to create a new child process','exec() replaces the child\\'s memory image with our program binary','The OS loader maps code, data, BSS, heap, and stack segments into virtual memory','The kernel creates a Process Control Block (PCB) with PID, state, registers, and page tables','Execution begins at main() â€” our program\\'s entry point'].map((item,i)=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-start gap-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-accent-light mt-0.5 font-bold\",children:[i+1,\".\"]}),item]},i))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-surface-900/60 rounded-xl p-4 border border-surface-700/30\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-xs font-bold text-white mb-3 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(MemoryStick,{size:14,className:\"text-accent-light\"}),\"Process Memory Layout\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-1 font-mono text-[11px]\",children:[{segment:'Stack',desc:'Local vars, function calls',color:'text-rose-400',arrow:'â†“ grows down'},{segment:'   â†•',desc:'',color:'text-surface-600',arrow:''},{segment:'Heap',desc:'Dynamic allocations (malloc)',color:'text-amber-400',arrow:'â†‘ grows up'},{segment:'BSS',desc:'Uninitialized globals (wait_for[][])',color:'text-blue-400',arrow:''},{segment:'Data',desc:'Initialized globals (available[])',color:'text-emerald-400',arrow:''},{segment:'Text',desc:'Compiled C code (read-only)',color:'text-purple-400',arrow:''}].map((_ref4,i)=>{let{segment,desc,color,arrow}=_ref4;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between py-1.5 px-3 rounded \".concat(i!==2?'bg-surface-800/50':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-bold \".concat(color,\" w-12\"),children:segment}),/*#__PURE__*/_jsx(\"span\",{className:\"text-surface-400\",children:desc})]}),arrow&&/*#__PURE__*/_jsx(\"span\",{className:\"text-surface-500 text-[10px]\",children:arrow})]},i);})})]})]})]})})),/*#__PURE__*/_jsx(motion.div,_objectSpread(_objectSpread({},fadeUp),{},{transition:{delay:0.15},children:/*#__PURE__*/_jsxs(GlassCard,{className:\"p-6\",children:[/*#__PURE__*/_jsx(SectionTitle,{icon:GitBranch,title:\"2. Multi-Thread Architecture\",subtitle:\"POSIX Threads (pthreads) \\u2014 kernel-level concurrency\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-surface-300 leading-relaxed mb-4\",children:[\"Our application uses \",/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-semibold\",children:\"pthread_create()\"}),\" to spawn OS-level kernel threads. Each thread gets its own stack but shares the process's heap, data, and code segments. The OS scheduler independently manages these threads on available CPU cores.\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-5\",children:[/*#__PURE__*/_jsx(ThreadBox,{name:\"Main Thread\",role:\"Entry point, menu, coordination\",color:\"blue\",status:\"pthread_join()\"}),/*#__PURE__*/_jsx(ThreadBox,{name:\"Detection Thread\",role:\"Background DFS cycle scan\",color:\"rose\",status:\"Loops forever\"}),/*#__PURE__*/_jsx(ThreadBox,{name:\"Customer 0\",role:\"Even \\u2014 lock R0 \\u2192 R1\",color:\"green\",status:\"pthread_create()\"}),/*#__PURE__*/_jsx(ThreadBox,{name:\"Customer 1\",role:\"Odd \\u2014 lock R1 \\u2192 R0\",color:\"amber\",status:\"pthread_create()\"})]}),/*#__PURE__*/_jsx(\"pre\",{className:\"text-[11px] text-surface-300 bg-surface-900/60 rounded-lg p-4 overflow-x-auto font-mono border border-surface-700/30\",children:\"int main() {\\n    init_resources();                          // Initialize mutexes & shared data\\n\\n    pthread_t detector;\\n    pthread_create(&detector, NULL,            // OS allocates a new kernel thread\\n                   detection_thread, NULL);     // \\u2192 runs DFS cycle detection in background\\n\\n    run_prevention();                          // Spawns NUM_CUSTOMERS threads\\n    // Each thread calls process_order() which acquires mutexes\\n\\n    pthread_join(detector, NULL);              // Main thread waits for detector to finish\\n    return 0;\\n}\"})]})})),/*#__PURE__*/_jsx(motion.div,_objectSpread(_objectSpread({},fadeUp),{},{transition:{delay:0.2},children:/*#__PURE__*/_jsxs(GlassCard,{className:\"p-6\",children:[/*#__PURE__*/_jsx(SectionTitle,{icon:Lock,title:\"3. OS Synchronization Primitives\",subtitle:\"How the kernel manages concurrent access to shared resources\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsx(StepCard,{number:\"A\",title:\"pthread_mutex_init()\",description:\"Initializes a mutex \\u2014 the OS creates a kernel futex (fast userspace mutex) for each shopping resource. Our program creates NUM_RESOURCES mutexes to protect Cart_Lock, Payment_Gateway, etc.\",code:\"pthread_mutex_t resource_locks[NUM_RESOURCES];\\n\\nvoid init_resources() {\\n    for(int i = 0; i < NUM_RESOURCES; i++) {\\n        pthread_mutex_init(&resource_locks[i], NULL);\\n        resource_owner[i] = -1;\\n    }\\n}\",color:\"blue\"}),/*#__PURE__*/_jsx(StepCard,{number:\"B\",title:\"pthread_mutex_trylock()\",description:\"Non-blocking lock attempt. The OS immediately returns 0 (success) or EBUSY (already held). This lets customers check resource availability without blocking.\",code:\"if(pthread_mutex_trylock(&resource_locks[i]) == 0) {\\n    resource_owner[i] = customer_id;  // Got it!\\n    available[i]--;\\n} else {\\n    // Resource is held by someone else\\n    int owner = resource_owner[i];\\n    wait_for[customer_id][owner] = 1; // Record dependency\\n}\",color:\"green\"}),/*#__PURE__*/_jsx(StepCard,{number:\"C\",title:\"pthread_mutex_lock() \\u2014 BLOCKING\",description:\"The OS suspends the calling thread and puts it in a kernel wait queue. The thread stays in BLOCKED state until the mutex owner calls unlock. This is where deadlocks happen \\u2014 two threads can block forever waiting for each other.\",code:\"pthread_mutex_lock(&resource_locks[i]);\\n// \\u26A0 Thread is BLOCKED here until the lock is released\\n// OS context-switches this thread out\\n// If two threads wait for each other \\u2192 DEADLOCK\",color:\"rose\"}),/*#__PURE__*/_jsx(StepCard,{number:\"D\",title:\"pthread_mutex_unlock()\",description:\"Releases the mutex. The OS checks if any threads are waiting in the queue for this mutex, and if so, wakes one of them up (moves it from BLOCKED \\u2192 READY state). The scheduler then picks it up.\",code:\"void release_resources(int customer_id, int request[]) {\\n    for(int i = 0; i < NUM_RESOURCES; i++) {\\n        if(request[i] == 1) {\\n            pthread_mutex_unlock(&resource_locks[i]);\\n            resource_owner[i] = -1;  // Release ownership\\n            available[i]++;          // Mark available\\n        }\\n    }\\n}\",color:\"amber\"})]})]})})),/*#__PURE__*/_jsx(motion.div,_objectSpread(_objectSpread({},fadeUp),{},{transition:{delay:0.25},children:/*#__PURE__*/_jsxs(GlassCard,{className:\"p-6\",children:[/*#__PURE__*/_jsx(SectionTitle,{icon:Clock,title:\"4. OS Thread Scheduling & Context Switching\",subtitle:\"How the kernel decides which thread runs and when\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-sm font-bold text-white mb-3 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Activity,{size:14,className:\"text-blue-400\"}),\"Thread State Transitions\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-surface-900/60 rounded-xl p-4 border border-surface-700/30 space-y-2 font-mono text-[11px]\",children:[{from:'NEW',to:'READY',trigger:'pthread_create()',color:'text-emerald-400'},{from:'READY',to:'RUNNING',trigger:'OS scheduler picks thread',color:'text-blue-400'},{from:'RUNNING',to:'BLOCKED',trigger:'pthread_mutex_lock() on held mutex',color:'text-rose-400'},{from:'RUNNING',to:'SLEEPING',trigger:'sleep(N) â€” voluntary CPU yield',color:'text-amber-400'},{from:'BLOCKED',to:'READY',trigger:'pthread_mutex_unlock() by owner',color:'text-emerald-400'},{from:'SLEEPING',to:'READY',trigger:'Timer interrupt after N seconds',color:'text-blue-400'},{from:'RUNNING',to:'TERMINATED',trigger:'Thread function returns',color:'text-surface-400'}].map((_ref5,i)=>{let{from,to,trigger,color}=_ref5;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 py-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-surface-400 w-20 text-right\",children:from}),/*#__PURE__*/_jsx(ArrowRight,{size:12,className:color}),/*#__PURE__*/_jsx(\"span\",{className:\"font-bold w-24 \".concat(color),children:to}),/*#__PURE__*/_jsx(\"span\",{className:\"text-surface-500 text-[10px]\",children:trigger})]},i);})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-sm font-bold text-white mb-3 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(RefreshCw,{size:14,className:\"text-amber-400\"}),\"Context Switch Sequence\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:[{step:'1',text:'Timer interrupt or blocking syscall fires',detail:'Hardware signals the CPU to stop current thread'},{step:'2',text:'Save thread context (registers, PC, SP)',detail:'OS saves running thread state to its Thread Control Block'},{step:'3',text:'Scheduler selects next READY thread',detail:'Linux CFS / Windows dispatcher picks highest-priority thread'},{step:'4',text:'Restore new thread context from TCB',detail:'Load registers, program counter, stack pointer'},{step:'5',text:'Resume execution of new thread',detail:'CPU continues where the new thread left off'}].map(_ref6=>{let{step,text,detail}=_ref6;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-3 p-3 rounded-lg bg-surface-900/40 border border-surface-700/30\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"flex items-center justify-center w-6 h-6 rounded-md bg-amber-400/15 text-amber-400 text-[10px] font-bold border border-amber-400/30 flex-shrink-0\",children:step}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-white font-medium\",children:text}),/*#__PURE__*/_jsx(\"p\",{className:\"text-[10px] text-surface-400 mt-0.5\",children:detail})]})]},step);})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-5 p-4 rounded-xl bg-surface-900/40 border border-surface-700/30\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-surface-300 leading-relaxed\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-semibold\",children:\"In our application:\"}),\" The\",' ',/*#__PURE__*/_jsx(\"code\",{className:\"text-amber-400 bg-surface-800/60 px-1 rounded\",children:\"sleep(1)\"}),\" calls in \",/*#__PURE__*/_jsx(\"code\",{className:\"text-accent-light bg-surface-800/60 px-1 rounded\",children:\"process_order()\"}),' ',\"voluntarily yield the CPU. The OS moves the thread to SLEEPING state, schedules another thread, and wakes it after the interval via a timer interrupt. This deliberate delay between resource acquisitions is what creates the window for deadlocks.\"]})})]})})),/*#__PURE__*/_jsx(motion.div,_objectSpread(_objectSpread({},fadeUp),{},{transition:{delay:0.3},children:/*#__PURE__*/_jsxs(GlassCard,{className:\"p-6\",children:[/*#__PURE__*/_jsx(SectionTitle,{icon:AlertTriangle,title:\"5. The Deadlock \\u2014 How It Happens\",subtitle:\"Circular wait created by opposite resource acquisition orders\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-5\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-bold text-white mb-3\",children:\"Timeline\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-1.5\",children:[{time:'t=0',event:'Customer 0 locks Resource 0 (mutex)',icon:'ðŸ”’',color:'text-blue-400'},{time:'t=0',event:'Customer 1 locks Resource 1 (mutex)',icon:'ðŸ”’',color:'text-emerald-400'},{time:'t=1s',event:'sleep(1) expires â€” OS wakes both threads',icon:'â°',color:'text-amber-400'},{time:'t=1s',event:'Customer 0 tries Resource 1 â†’ BLOCKED',icon:'ðŸš«',color:'text-rose-400'},{time:'t=1s',event:'Customer 1 tries Resource 0 â†’ BLOCKED',icon:'ðŸš«',color:'text-rose-400'},{time:'âˆž',event:'DEADLOCK: both threads in kernel wait queue forever',icon:'ðŸ’€',color:'text-danger'}].map((_ref7,i)=>{let{time,event,icon,color}=_ref7;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 py-2 px-3 rounded-lg bg-surface-900/40 border border-surface-700/30\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-mono text-[10px] text-surface-500 w-10\",children:time}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:icon}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs \".concat(color),children:event})]},i);})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-bold text-white mb-3\",children:\"Circular Wait Diagram\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-surface-900/60 rounded-xl p-6 border border-surface-700/30\",children:/*#__PURE__*/_jsxs(\"svg\",{viewBox:\"0 0 280 200\",className:\"w-full h-auto max-h-48\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"60\",cy:\"60\",r:\"30\",fill:\"rgba(59,130,246,0.15)\",stroke:\"#3b82f6\",strokeWidth:\"2\"}),/*#__PURE__*/_jsx(\"text\",{x:\"60\",y:\"57\",textAnchor:\"middle\",fill:\"#93c5fd\",fontSize:\"10\",fontWeight:\"bold\",children:\"C0\"}),/*#__PURE__*/_jsx(\"text\",{x:\"60\",y:\"70\",textAnchor:\"middle\",fill:\"#9ca3af\",fontSize:\"8\",children:\"Even\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"220\",cy:\"60\",r:\"30\",fill:\"rgba(16,185,129,0.15)\",stroke:\"#10b981\",strokeWidth:\"2\"}),/*#__PURE__*/_jsx(\"text\",{x:\"220\",y:\"57\",textAnchor:\"middle\",fill:\"#6ee7b7\",fontSize:\"10\",fontWeight:\"bold\",children:\"C1\"}),/*#__PURE__*/_jsx(\"text\",{x:\"220\",y:\"70\",textAnchor:\"middle\",fill:\"#9ca3af\",fontSize:\"8\",children:\"Odd\"}),/*#__PURE__*/_jsx(\"rect\",{x:\"25\",y:\"130\",width:\"70\",height:\"40\",rx:\"6\",fill:\"rgba(245,158,11,0.15)\",stroke:\"#f59e0b\",strokeWidth:\"1.5\"}),/*#__PURE__*/_jsx(\"text\",{x:\"60\",y:\"155\",textAnchor:\"middle\",fill:\"#fbbf24\",fontSize:\"9\",fontWeight:\"bold\",children:\"R0\"}),/*#__PURE__*/_jsx(\"rect\",{x:\"185\",y:\"130\",width:\"70\",height:\"40\",rx:\"6\",fill:\"rgba(245,158,11,0.15)\",stroke:\"#f59e0b\",strokeWidth:\"1.5\"}),/*#__PURE__*/_jsx(\"text\",{x:\"220\",y:\"155\",textAnchor:\"middle\",fill:\"#fbbf24\",fontSize:\"9\",fontWeight:\"bold\",children:\"R1\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"60\",y1:\"90\",x2:\"60\",y2:\"130\",stroke:\"#3b82f6\",strokeWidth:\"2\"}),/*#__PURE__*/_jsx(\"text\",{x:\"22\",y:\"115\",fill:\"#60a5fa\",fontSize:\"7\",children:\"HOLDS\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"220\",y1:\"90\",x2:\"220\",y2:\"130\",stroke:\"#10b981\",strokeWidth:\"2\"}),/*#__PURE__*/_jsx(\"text\",{x:\"230\",y:\"115\",fill:\"#6ee7b7\",fontSize:\"7\",children:\"HOLDS\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"90\",y1:\"65\",x2:\"185\",y2:\"145\",stroke:\"#ef4444\",strokeWidth:\"2\",strokeDasharray:\"6 3\"}),/*#__PURE__*/_jsx(\"text\",{x:\"140\",y:\"95\",fill:\"#ef4444\",fontSize:\"7\",fontWeight:\"bold\",children:\"WAITS\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"190\",y1:\"65\",x2:\"95\",y2:\"145\",stroke:\"#ef4444\",strokeWidth:\"2\",strokeDasharray:\"6 3\"}),/*#__PURE__*/_jsx(\"text\",{x:\"130\",y:\"120\",fill:\"#ef4444\",fontSize:\"7\",fontWeight:\"bold\",children:\"WAITS\"})]})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-[10px] text-surface-500 text-center mt-2\",children:\"Red dashed lines show the circular wait \\u2014 forming a cycle in the Wait-For Graph\"})]})]}),/*#__PURE__*/_jsx(\"pre\",{className:\"text-[11px] text-surface-300 bg-surface-900/60 rounded-lg p-4 overflow-x-auto font-mono border border-surface-700/30\",children:\"void* process_order(void* arg) {\\n    int id = *(int*)arg;\\n\\n    if(id % 2 == 0) {\\n        request_resources(id, {R0});     // Even: lock R0 first\\n        sleep(1);                        // OS puts thread to sleep \\u2192 context switch\\n        request_resources(id, {R1});     // Then try R1 \\u2192 BLOCKED (held by odd customer)\\n    } else {\\n        request_resources(id, {R1});     // Odd: lock R1 first\\n        sleep(1);                        // OS puts thread to sleep \\u2192 context switch\\n        request_resources(id, {R0});     // Then try R0 \\u2192 BLOCKED (held by even customer)\\n    }\\n    // \\u2192 Both threads stuck in kernel wait queue: DEADLOCK\\n}\"})]})})),/*#__PURE__*/_jsx(motion.div,_objectSpread(_objectSpread({},fadeUp),{},{transition:{delay:0.35},children:/*#__PURE__*/_jsxs(GlassCard,{className:\"p-6\",children:[/*#__PURE__*/_jsx(SectionTitle,{icon:Layers,title:\"6. Four Necessary Conditions for Deadlock\",subtitle:\"All four must hold simultaneously \\u2014 our application satisfies all four\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 gap-3\",children:[{title:'Mutual Exclusion',desc:'Each pthread_mutex can be held by only one thread at a time',code:'pthread_mutex_lock(&resource_locks[i])',color:'blue'},{title:'Hold and Wait',desc:'Customers hold R0 while waiting for R1 (and vice versa)',code:'request(R0); sleep(1); request(R1);',color:'amber'},{title:'No Preemption',desc:'OS cannot force a thread to release its mutex â€” only the owner can unlock',code:'Only owner calls pthread_mutex_unlock()',color:'rose'},{title:'Circular Wait',desc:'C0 waits for R1 (held by C1), C1 waits for R0 (held by C0)',code:'C0 â†’ R1 â†’ C1 â†’ R0 â†’ C0    (cycle!)',color:'purple'}].map(_ref8=>{let{title,desc,code,color}=_ref8;return/*#__PURE__*/_jsx(StepCard,{number:title.charAt(0),title:title,description:desc,code:code,color:color},title);})})]})})),/*#__PURE__*/_jsx(motion.div,_objectSpread(_objectSpread({},fadeUp),{},{transition:{delay:0.4},children:/*#__PURE__*/_jsxs(GlassCard,{className:\"p-6\",children:[/*#__PURE__*/_jsx(SectionTitle,{icon:Zap,title:\"7. Detection & Recovery (OS-Level View)\",subtitle:\"Background thread performs DFS cycle detection on the Wait-For Graph\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-5\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-bold text-white mb-3\",children:\"Detection Thread Lifecycle\"}),/*#__PURE__*/_jsx(\"pre\",{className:\"text-[11px] text-surface-300 bg-surface-900/60 rounded-lg p-4 overflow-x-auto font-mono border border-surface-700/30\",children:\"void* detection_thread(void* arg) {\\n    while(1) {\\n        sleep(2);  // OS: thread \\u2192 SLEEPING for 2s\\n\\n        // Reset visited arrays\\n        // Run DFS on wait_for[][] adjacency matrix\\n        for(int i = 0; i < NUM_CUSTOMERS; i++) {\\n            if(!visited[i] && dfs_cycle(i)) {\\n                printf(\\\"\\uD83D\\uDD25 Deadlock Detected!\\\\n\\\");\\n                recover_deadlock();  // Preempt victim\\n                break;\\n            }\\n        }\\n    }\\n}\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-bold text-white mb-3\",children:\"Recovery Mechanism\"}),/*#__PURE__*/_jsx(\"pre\",{className:\"text-[11px] text-surface-300 bg-surface-900/60 rounded-lg p-4 overflow-x-auto font-mono border border-surface-700/30\",children:\"void recover_deadlock() {\\n    int victim = 0;  // Lowest-ID victim selection\\n\\n    // Force-release victim's mutexes\\n    for(int i = 0; i < NUM_RESOURCES; i++) {\\n        if(resource_owner[i] == victim) {\\n            pthread_mutex_unlock(&resource_locks[i]);\\n            // OS wakes up blocked threads waiting\\n            // on this mutex \\u2192 BLOCKED \\u2192 READY\\n            resource_owner[i] = -1;\\n            available[i]++;\\n        }\\n    }\\n    // Clear wait-for edges\\n    for(int i = 0; i < NUM_CUSTOMERS; i++) {\\n        wait_for[victim][i] = 0;\\n        wait_for[i][victim] = 0;\\n    }\\n}\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 p-4 rounded-xl bg-rose-500/5 border border-rose-500/20\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-surface-300 leading-relaxed\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-rose-400 font-bold\",children:\"Key Insight:\"}),\" When\",' ',/*#__PURE__*/_jsx(\"code\",{className:\"text-rose-400 bg-surface-800/60 px-1 rounded\",children:\"recover_deadlock()\"}),' ',\"calls \",/*#__PURE__*/_jsx(\"code\",{className:\"text-rose-400 bg-surface-800/60 px-1 rounded\",children:\"pthread_mutex_unlock()\"}),' ',\"on the victim's mutexes, the OS kernel\",' ',/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-semibold\",children:\"wakes up all threads\"}),\" that were blocked in the wait queue for those mutexes. This breaks the circular wait and resolves the deadlock.\"]})})]})})),/*#__PURE__*/_jsx(motion.div,_objectSpread(_objectSpread({},fadeUp),{},{transition:{delay:0.45},children:/*#__PURE__*/_jsxs(GlassCard,{className:\"p-6\",children:[/*#__PURE__*/_jsx(SectionTitle,{icon:ShieldCheck,title:\"8. Prevention \\u2014 Resource Ordering\",subtitle:\"Break circular wait by enforcing a global lock acquisition order\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 text-xs text-surface-300 leading-relaxed\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-semibold\",children:\"The idea:\"}),\" If all threads acquire resources in the \",/*#__PURE__*/_jsx(\"span\",{className:\"text-emerald-400 font-semibold\",children:\"same global order\"}),' ',\"(e.g., always R0 before R1), a circular wait \",/*#__PURE__*/_jsx(\"span\",{className:\"text-emerald-400 font-semibold\",children:\"can never form\"}),\".\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 rounded-lg bg-emerald-500/5 border border-emerald-500/20\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-emerald-400 font-semibold mb-1\",children:\"With Prevention:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-mono text-[11px]\",children:\"Customer 0: lock R0 \\u2192 lock R1 \\u2713\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-mono text-[11px]\",children:\"Customer 1: lock R0 \\u2192 lock R1 \\u2713\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-[10px] text-emerald-300 mt-1\",children:\"\\u2192 No circular dependency possible!\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 rounded-lg bg-rose-500/5 border border-rose-500/20\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-rose-400 font-semibold mb-1\",children:\"Without Prevention:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-mono text-[11px]\",children:\"Customer 0: lock R0 \\u2192 lock R1\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-mono text-[11px]\",children:\"Customer 1: lock R1 \\u2192 lock R0\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-[10px] text-rose-300 mt-1\",children:\"\\u2192 Circular wait \\u2192 DEADLOCK!\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-bold text-white mb-3\",children:\"Banker's Algorithm (Avoidance)\"}),/*#__PURE__*/_jsx(\"pre\",{className:\"text-[11px] text-surface-300 bg-surface-900/60 rounded-lg p-4 overflow-x-auto font-mono border border-surface-700/30\",children:\"int is_safe_state() {\\n    int work[NUM_RESOURCES];\\n    int finish[NUM_CUSTOMERS] = {0};\\n\\n    for(int i=0; i<NUM_RESOURCES; i++)\\n        work[i] = available[i];\\n\\n    // Try to find a safe sequence\\n    int count = 0;\\n    while(count < NUM_CUSTOMERS) {\\n        int found = 0;\\n        for(int i=0; i<NUM_CUSTOMERS; i++) {\\n            if(!finish[i]) {\\n                // Can customer i finish with\\n                // current available resources?\\n                if(need[i] <= work) {\\n                    work += allocation[i];\\n                    finish[i] = 1;\\n                    found = 1; count++;\\n                }\\n            }\\n        }\\n        if(!found) return 0; // UNSAFE\\n    }\\n    return 1; // SAFE \\u2014 grant the request\\n}\"})]})]})]})})),/*#__PURE__*/_jsx(motion.div,_objectSpread(_objectSpread({},fadeUp),{},{transition:{delay:0.5},children:/*#__PURE__*/_jsxs(GlassCard,{className:\"p-6\",children:[/*#__PURE__*/_jsx(SectionTitle,{icon:Terminal,title:\"9. Complete OS Execution Flow\",subtitle:\"End-to-end view of how the OS manages our application\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:[{step:'1',label:'OS loads binary',detail:'Creates process with PCB, maps virtual memory segments',color:'accent'},{step:'2',label:'main() calls init_resources()',detail:'Initializes pthread_mutex_t array â€” kernel allocates futex objects',color:'blue'},{step:'3',label:'pthread_create() Ã— 3',detail:'OS creates kernel threads: 1 detector + 2 customers, each with own stack',color:'green'},{step:'4',label:'OS scheduler dispatches threads',detail:'CFS/dispatcher time-slices threads across CPU cores (preemptive scheduling)',color:'amber'},{step:'5',label:'Threads acquire mutexes',detail:'pthread_mutex_lock/trylock â€” kernel manages wait queues per mutex',color:'purple'},{step:'6',label:'sleep(1) â€” voluntary yield',detail:'OS moves threads to SLEEPING state, timer interrupt wakes them after 1 second',color:'blue'},{step:'7',label:'Circular wait â†’ DEADLOCK',detail:'Both customer threads BLOCKED in kernel wait queue â€” OS cannot resolve this automatically',color:'rose'},{step:'8',label:'Detection thread wakes up',detail:'sleep(2) expires â†’ DFS scan finds cycle in wait_for[][] â†’ triggers recovery',color:'amber'},{step:'9',label:'Recovery: force-unlock mutexes',detail:'OS wakes blocked threads from wait queue â†’ threads resume â†’ deadlock broken',color:'green'},{step:'10',label:'Threads complete & exit',detail:'pthread_join() returns â†’ main() exits â†’ OS reclaims all process resources',color:'accent'}].map(_ref9=>{let{step,label,detail,color}=_ref9;const colorMap={accent:'bg-accent/15 text-accent-light border-accent/30',blue:'bg-blue-400/15 text-blue-400 border-blue-400/30',green:'bg-emerald-400/15 text-emerald-400 border-emerald-400/30',amber:'bg-amber-400/15 text-amber-400 border-amber-400/30',rose:'bg-rose-400/15 text-rose-400 border-rose-400/30',purple:'bg-purple-400/15 text-purple-400 border-purple-400/30'};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-3 p-3 rounded-xl bg-surface-900/40 border border-surface-700/30\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"flex items-center justify-center w-7 h-7 rounded-lg text-[10px] font-bold border flex-shrink-0 \".concat(colorMap[color]),children:step}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-white font-semibold\",children:label}),/*#__PURE__*/_jsx(\"p\",{className:\"text-[10px] text-surface-400 mt-0.5\",children:detail})]})]},step);})})]})})),/*#__PURE__*/_jsx(motion.div,_objectSpread(_objectSpread({},fadeUp),{},{transition:{delay:0.55},children:/*#__PURE__*/_jsxs(GlassCard,{className:\"p-6 text-center\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-surface-300 leading-relaxed max-w-2xl mx-auto\",children:[\"This page demonstrates how the \",/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-semibold\",children:\"Operating System\"}),\" manages our deadlock simulation at the kernel level \\u2014 from\",' ',/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-400 font-semibold\",children:\"process creation\"}),\" and\",' ',/*#__PURE__*/_jsx(\"span\",{className:\"text-emerald-400 font-semibold\",children:\"thread scheduling\"}),\" to\",' ',/*#__PURE__*/_jsx(\"span\",{className:\"text-amber-400 font-semibold\",children:\"mutex synchronization\"}),\" and\",' ',/*#__PURE__*/_jsx(\"span\",{className:\"text-rose-400 font-semibold\",children:\"deadlock recovery\"}),\".\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 text-xs text-surface-500\",children:\"Deadlock Management Framework \\u2014 OS Execution Deep Dive\"})]})}))]});}","map":{"version":3,"names":["React","motion","GlassCard","OSSimulation","Cpu","Layers","GitBranch","Lock","Unlock","Clock","MemoryStick","AlertTriangle","ShieldCheck","ArrowRight","Activity","Zap","Server","RefreshCw","Terminal","jsx","_jsx","jsxs","_jsxs","fadeUp","initial","opacity","y","animate","transition","duration","SectionTitle","_ref","icon","Icon","title","subtitle","className","children","size","StepCard","_ref2","number","description","code","color","colorMap","accent","blue","green","amber","rose","purple","numColor","concat","ThreadBox","_ref3","name","role","status","OSExecutionPage","div","_objectSpread","glow","delay","map","item","i","segment","desc","arrow","_ref4","from","to","trigger","_ref5","step","text","detail","_ref6","time","event","_ref7","viewBox","cx","cy","r","fill","stroke","strokeWidth","x","textAnchor","fontSize","fontWeight","width","height","rx","x1","y1","x2","y2","strokeDasharray","_ref8","charAt","label","_ref9"],"sources":["C:/Users/suchindra/Downloads/Deadlock_Online_Shopping/dashboard/src/components/OSExecutionPage.jsx"],"sourcesContent":["import React from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport GlassCard from './GlassCard';\r\nimport OSSimulation from './OSSimulation';\r\nimport {\r\n  Cpu,\r\n  Layers,\r\n  GitBranch,\r\n  Lock,\r\n  Unlock,\r\n  Clock,\r\n  MemoryStick,\r\n  AlertTriangle,\r\n  ShieldCheck,\r\n  ArrowRight,\r\n  Activity,\r\n  Zap,\r\n  Server,\r\n  RefreshCw,\r\n  Terminal,\r\n} from 'lucide-react';\r\n\r\nconst fadeUp = {\r\n  initial: { opacity: 0, y: 20 },\r\n  animate: { opacity: 1, y: 0 },\r\n  transition: { duration: 0.5 },\r\n};\r\n\r\nfunction SectionTitle({ icon: Icon, title, subtitle }) {\r\n  return (\r\n    <div className=\"flex items-start gap-3 mb-4\">\r\n      <div className=\"p-2 rounded-xl bg-accent/10 border border-accent/20 mt-0.5\">\r\n        <Icon size={18} className=\"text-accent-light\" />\r\n      </div>\r\n      <div>\r\n        <h2 className=\"text-lg font-bold text-white\">{title}</h2>\r\n        {subtitle && (\r\n          <p className=\"text-xs text-surface-400 mt-0.5\">{subtitle}</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction StepCard({ number, title, description, code, color = 'accent' }) {\r\n  const colorMap = {\r\n    accent: 'border-accent/30 bg-accent/5',\r\n    blue: 'border-blue-400/30 bg-blue-400/5',\r\n    green: 'border-emerald-400/30 bg-emerald-400/5',\r\n    amber: 'border-amber-400/30 bg-amber-400/5',\r\n    rose: 'border-rose-400/30 bg-rose-400/5',\r\n    purple: 'border-purple-400/30 bg-purple-400/5',\r\n  };\r\n  const numColor = {\r\n    accent: 'bg-accent/20 text-accent-light border-accent/30',\r\n    blue: 'bg-blue-400/20 text-blue-400 border-blue-400/30',\r\n    green: 'bg-emerald-400/20 text-emerald-400 border-emerald-400/30',\r\n    amber: 'bg-amber-400/20 text-amber-400 border-amber-400/30',\r\n    rose: 'bg-rose-400/20 text-rose-400 border-rose-400/30',\r\n    purple: 'bg-purple-400/20 text-purple-400 border-purple-400/30',\r\n  };\r\n  return (\r\n    <div className={`rounded-xl border p-5 ${colorMap[color]}`}>\r\n      <div className=\"flex items-center gap-3 mb-3\">\r\n        <span\r\n          className={`flex items-center justify-center w-8 h-8 rounded-lg text-xs font-bold border ${numColor[color]}`}\r\n        >\r\n          {number}\r\n        </span>\r\n        <h3 className=\"text-sm font-bold text-white\">{title}</h3>\r\n      </div>\r\n      <p className=\"text-xs text-surface-300 leading-relaxed mb-3\">\r\n        {description}\r\n      </p>\r\n      {code && (\r\n        <pre className=\"text-[11px] text-surface-300 bg-surface-900/60 rounded-lg p-3 overflow-x-auto font-mono border border-surface-700/30\">\r\n          {code}\r\n        </pre>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ThreadBox({ name, role, color, status }) {\r\n  const colorMap = {\r\n    blue: 'border-blue-400/40 bg-blue-400/10 text-blue-400',\r\n    green: 'border-emerald-400/40 bg-emerald-400/10 text-emerald-400',\r\n    amber: 'border-amber-400/40 bg-amber-400/10 text-amber-400',\r\n    rose: 'border-rose-400/40 bg-rose-400/10 text-rose-400',\r\n    purple: 'border-purple-400/40 bg-purple-400/10 text-purple-400',\r\n  };\r\n  return (\r\n    <div className={`rounded-xl border p-4 ${colorMap[color]} text-center`}>\r\n      <div className=\"text-xs font-bold mb-1\">{name}</div>\r\n      <div className=\"text-[10px] text-surface-400 mb-2\">{role}</div>\r\n      <span className=\"inline-block text-[9px] font-semibold px-2 py-0.5 rounded-full bg-surface-800/60 border border-surface-600/30 text-surface-300\">\r\n        {status}\r\n      </span>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function OSExecutionPage() {\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      {/* Hero */}\r\n      <motion.div {...fadeUp}>\r\n        <GlassCard className=\"p-8 text-center\" glow=\"accent\">\r\n          <div className=\"flex justify-center mb-4\">\r\n            <div className=\"p-3 rounded-2xl bg-accent/10 border border-accent/20\">\r\n              <Cpu size={32} className=\"text-accent-light\" />\r\n            </div>\r\n          </div>\r\n          <h1 className=\"text-2xl sm:text-3xl font-extrabold text-white mb-3\">\r\n            How the OS Executes This Application\r\n          </h1>\r\n          <p className=\"text-surface-300 text-sm max-w-2xl mx-auto leading-relaxed\">\r\n            A deep dive into how the operating system manages{' '}\r\n            <span className=\"text-accent-light font-semibold\">processes</span>,{' '}\r\n            <span className=\"text-blue-400 font-semibold\">threads</span>,{' '}\r\n            <span className=\"text-amber-400 font-semibold\">synchronization</span>, and{' '}\r\n            <span className=\"text-rose-400 font-semibold\">deadlock scenarios</span>{' '}\r\n            when running our C backend.\r\n          </p>\r\n        </GlassCard>\r\n      </motion.div>\r\n\r\n      {/* Interactive Simulation */}\r\n      <motion.div {...fadeUp} transition={{ delay: 0.05 }}>\r\n        <OSSimulation />\r\n      </motion.div>\r\n\r\n      {/* 1. Process Creation */}\r\n      <motion.div {...fadeUp} transition={{ delay: 0.1 }}>\r\n        <GlassCard className=\"p-6\">\r\n          <SectionTitle\r\n            icon={Server}\r\n            title=\"1. Process Creation\"\r\n            subtitle=\"How the OS loads and starts our program\"\r\n          />\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\r\n            <div className=\"space-y-3 text-xs text-surface-300 leading-relaxed\">\r\n              <p>\r\n                When you execute the compiled binary, the OS performs these steps:\r\n              </p>\r\n              <ul className=\"space-y-2\">\r\n                {[\r\n                  'The shell calls fork() to create a new child process',\r\n                  'exec() replaces the child\\'s memory image with our program binary',\r\n                  'The OS loader maps code, data, BSS, heap, and stack segments into virtual memory',\r\n                  'The kernel creates a Process Control Block (PCB) with PID, state, registers, and page tables',\r\n                  'Execution begins at main() â€” our program\\'s entry point',\r\n                ].map((item, i) => (\r\n                  <li key={i} className=\"flex items-start gap-2\">\r\n                    <span className=\"text-accent-light mt-0.5 font-bold\">{i + 1}.</span>\r\n                    {item}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n            <div className=\"bg-surface-900/60 rounded-xl p-4 border border-surface-700/30\">\r\n              <h4 className=\"text-xs font-bold text-white mb-3 flex items-center gap-2\">\r\n                <MemoryStick size={14} className=\"text-accent-light\" />\r\n                Process Memory Layout\r\n              </h4>\r\n              <div className=\"space-y-1 font-mono text-[11px]\">\r\n                {[\r\n                  { segment: 'Stack', desc: 'Local vars, function calls', color: 'text-rose-400', arrow: 'â†“ grows down' },\r\n                  { segment: '   â†•', desc: '', color: 'text-surface-600', arrow: '' },\r\n                  { segment: 'Heap', desc: 'Dynamic allocations (malloc)', color: 'text-amber-400', arrow: 'â†‘ grows up' },\r\n                  { segment: 'BSS', desc: 'Uninitialized globals (wait_for[][])', color: 'text-blue-400', arrow: '' },\r\n                  { segment: 'Data', desc: 'Initialized globals (available[])', color: 'text-emerald-400', arrow: '' },\r\n                  { segment: 'Text', desc: 'Compiled C code (read-only)', color: 'text-purple-400', arrow: '' },\r\n                ].map(({ segment, desc, color, arrow }, i) => (\r\n                  <div key={i} className={`flex items-center justify-between py-1.5 px-3 rounded ${i !== 2 ? 'bg-surface-800/50' : ''}`}>\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <span className={`font-bold ${color} w-12`}>{segment}</span>\r\n                      <span className=\"text-surface-400\">{desc}</span>\r\n                    </div>\r\n                    {arrow && <span className=\"text-surface-500 text-[10px]\">{arrow}</span>}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </GlassCard>\r\n      </motion.div>\r\n\r\n      {/* 2. Thread Architecture */}\r\n      <motion.div {...fadeUp} transition={{ delay: 0.15 }}>\r\n        <GlassCard className=\"p-6\">\r\n          <SectionTitle\r\n            icon={GitBranch}\r\n            title=\"2. Multi-Thread Architecture\"\r\n            subtitle=\"POSIX Threads (pthreads) â€” kernel-level concurrency\"\r\n          />\r\n          <p className=\"text-xs text-surface-300 leading-relaxed mb-4\">\r\n            Our application uses <span className=\"text-white font-semibold\">pthread_create()</span> to\r\n            spawn OS-level kernel threads. Each thread gets its own stack but shares the process's\r\n            heap, data, and code segments. The OS scheduler independently manages these threads\r\n            on available CPU cores.\r\n          </p>\r\n\r\n          <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-5\">\r\n            <ThreadBox name=\"Main Thread\" role=\"Entry point, menu, coordination\" color=\"blue\" status=\"pthread_join()\" />\r\n            <ThreadBox name=\"Detection Thread\" role=\"Background DFS cycle scan\" color=\"rose\" status=\"Loops forever\" />\r\n            <ThreadBox name=\"Customer 0\" role=\"Even â€” lock R0 â†’ R1\" color=\"green\" status=\"pthread_create()\" />\r\n            <ThreadBox name=\"Customer 1\" role=\"Odd â€” lock R1 â†’ R0\" color=\"amber\" status=\"pthread_create()\" />\r\n          </div>\r\n\r\n          <pre className=\"text-[11px] text-surface-300 bg-surface-900/60 rounded-lg p-4 overflow-x-auto font-mono border border-surface-700/30\">\r\n{`int main() {\r\n    init_resources();                          // Initialize mutexes & shared data\r\n\r\n    pthread_t detector;\r\n    pthread_create(&detector, NULL,            // OS allocates a new kernel thread\r\n                   detection_thread, NULL);     // â†’ runs DFS cycle detection in background\r\n\r\n    run_prevention();                          // Spawns NUM_CUSTOMERS threads\r\n    // Each thread calls process_order() which acquires mutexes\r\n\r\n    pthread_join(detector, NULL);              // Main thread waits for detector to finish\r\n    return 0;\r\n}`}\r\n          </pre>\r\n        </GlassCard>\r\n      </motion.div>\r\n\r\n      {/* 3. Synchronization */}\r\n      <motion.div {...fadeUp} transition={{ delay: 0.2 }}>\r\n        <GlassCard className=\"p-6\">\r\n          <SectionTitle\r\n            icon={Lock}\r\n            title=\"3. OS Synchronization Primitives\"\r\n            subtitle=\"How the kernel manages concurrent access to shared resources\"\r\n          />\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <StepCard\r\n              number=\"A\"\r\n              title=\"pthread_mutex_init()\"\r\n              description=\"Initializes a mutex â€” the OS creates a kernel futex (fast userspace mutex) for each shopping resource. Our program creates NUM_RESOURCES mutexes to protect Cart_Lock, Payment_Gateway, etc.\"\r\n              code={`pthread_mutex_t resource_locks[NUM_RESOURCES];\\n\\nvoid init_resources() {\\n    for(int i = 0; i < NUM_RESOURCES; i++) {\\n        pthread_mutex_init(&resource_locks[i], NULL);\\n        resource_owner[i] = -1;\\n    }\\n}`}\r\n              color=\"blue\"\r\n            />\r\n            <StepCard\r\n              number=\"B\"\r\n              title=\"pthread_mutex_trylock()\"\r\n              description=\"Non-blocking lock attempt. The OS immediately returns 0 (success) or EBUSY (already held). This lets customers check resource availability without blocking.\"\r\n              code={`if(pthread_mutex_trylock(&resource_locks[i]) == 0) {\\n    resource_owner[i] = customer_id;  // Got it!\\n    available[i]--;\\n} else {\\n    // Resource is held by someone else\\n    int owner = resource_owner[i];\\n    wait_for[customer_id][owner] = 1; // Record dependency\\n}`}\r\n              color=\"green\"\r\n            />\r\n            <StepCard\r\n              number=\"C\"\r\n              title=\"pthread_mutex_lock() â€” BLOCKING\"\r\n              description=\"The OS suspends the calling thread and puts it in a kernel wait queue. The thread stays in BLOCKED state until the mutex owner calls unlock. This is where deadlocks happen â€” two threads can block forever waiting for each other.\"\r\n              code={`pthread_mutex_lock(&resource_locks[i]);\\n// âš  Thread is BLOCKED here until the lock is released\\n// OS context-switches this thread out\\n// If two threads wait for each other â†’ DEADLOCK`}\r\n              color=\"rose\"\r\n            />\r\n            <StepCard\r\n              number=\"D\"\r\n              title=\"pthread_mutex_unlock()\"\r\n              description=\"Releases the mutex. The OS checks if any threads are waiting in the queue for this mutex, and if so, wakes one of them up (moves it from BLOCKED â†’ READY state). The scheduler then picks it up.\"\r\n              code={`void release_resources(int customer_id, int request[]) {\\n    for(int i = 0; i < NUM_RESOURCES; i++) {\\n        if(request[i] == 1) {\\n            pthread_mutex_unlock(&resource_locks[i]);\\n            resource_owner[i] = -1;  // Release ownership\\n            available[i]++;          // Mark available\\n        }\\n    }\\n}`}\r\n              color=\"amber\"\r\n            />\r\n          </div>\r\n        </GlassCard>\r\n      </motion.div>\r\n\r\n      {/* 4. Thread Scheduling */}\r\n      <motion.div {...fadeUp} transition={{ delay: 0.25 }}>\r\n        <GlassCard className=\"p-6\">\r\n          <SectionTitle\r\n            icon={Clock}\r\n            title=\"4. OS Thread Scheduling & Context Switching\"\r\n            subtitle=\"How the kernel decides which thread runs and when\"\r\n          />\r\n\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n            <div>\r\n              <h3 className=\"text-sm font-bold text-white mb-3 flex items-center gap-2\">\r\n                <Activity size={14} className=\"text-blue-400\" />\r\n                Thread State Transitions\r\n              </h3>\r\n              <div className=\"bg-surface-900/60 rounded-xl p-4 border border-surface-700/30 space-y-2 font-mono text-[11px]\">\r\n                {[\r\n                  { from: 'NEW', to: 'READY', trigger: 'pthread_create()', color: 'text-emerald-400' },\r\n                  { from: 'READY', to: 'RUNNING', trigger: 'OS scheduler picks thread', color: 'text-blue-400' },\r\n                  { from: 'RUNNING', to: 'BLOCKED', trigger: 'pthread_mutex_lock() on held mutex', color: 'text-rose-400' },\r\n                  { from: 'RUNNING', to: 'SLEEPING', trigger: 'sleep(N) â€” voluntary CPU yield', color: 'text-amber-400' },\r\n                  { from: 'BLOCKED', to: 'READY', trigger: 'pthread_mutex_unlock() by owner', color: 'text-emerald-400' },\r\n                  { from: 'SLEEPING', to: 'READY', trigger: 'Timer interrupt after N seconds', color: 'text-blue-400' },\r\n                  { from: 'RUNNING', to: 'TERMINATED', trigger: 'Thread function returns', color: 'text-surface-400' },\r\n                ].map(({ from, to, trigger, color }, i) => (\r\n                  <div key={i} className=\"flex items-center gap-2 py-1\">\r\n                    <span className=\"text-surface-400 w-20 text-right\">{from}</span>\r\n                    <ArrowRight size={12} className={color} />\r\n                    <span className={`font-bold w-24 ${color}`}>{to}</span>\r\n                    <span className=\"text-surface-500 text-[10px]\">{trigger}</span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <h3 className=\"text-sm font-bold text-white mb-3 flex items-center gap-2\">\r\n                <RefreshCw size={14} className=\"text-amber-400\" />\r\n                Context Switch Sequence\r\n              </h3>\r\n              <div className=\"space-y-2\">\r\n                {[\r\n                  { step: '1', text: 'Timer interrupt or blocking syscall fires', detail: 'Hardware signals the CPU to stop current thread' },\r\n                  { step: '2', text: 'Save thread context (registers, PC, SP)', detail: 'OS saves running thread state to its Thread Control Block' },\r\n                  { step: '3', text: 'Scheduler selects next READY thread', detail: 'Linux CFS / Windows dispatcher picks highest-priority thread' },\r\n                  { step: '4', text: 'Restore new thread context from TCB', detail: 'Load registers, program counter, stack pointer' },\r\n                  { step: '5', text: 'Resume execution of new thread', detail: 'CPU continues where the new thread left off' },\r\n                ].map(({ step, text, detail }) => (\r\n                  <div key={step} className=\"flex items-start gap-3 p-3 rounded-lg bg-surface-900/40 border border-surface-700/30\">\r\n                    <span className=\"flex items-center justify-center w-6 h-6 rounded-md bg-amber-400/15 text-amber-400 text-[10px] font-bold border border-amber-400/30 flex-shrink-0\">\r\n                      {step}\r\n                    </span>\r\n                    <div>\r\n                      <p className=\"text-xs text-white font-medium\">{text}</p>\r\n                      <p className=\"text-[10px] text-surface-400 mt-0.5\">{detail}</p>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"mt-5 p-4 rounded-xl bg-surface-900/40 border border-surface-700/30\">\r\n            <p className=\"text-xs text-surface-300 leading-relaxed\">\r\n              <span className=\"text-white font-semibold\">In our application:</span> The{' '}\r\n              <code className=\"text-amber-400 bg-surface-800/60 px-1 rounded\">sleep(1)</code> calls\r\n              in <code className=\"text-accent-light bg-surface-800/60 px-1 rounded\">process_order()</code>{' '}\r\n              voluntarily yield the CPU. The OS moves the thread to SLEEPING state, schedules\r\n              another thread, and wakes it after the interval via a timer interrupt. This deliberate\r\n              delay between resource acquisitions is what creates the window for deadlocks.\r\n            </p>\r\n          </div>\r\n        </GlassCard>\r\n      </motion.div>\r\n\r\n      {/* 5. The Deadlock Scenario */}\r\n      <motion.div {...fadeUp} transition={{ delay: 0.3 }}>\r\n        <GlassCard className=\"p-6\">\r\n          <SectionTitle\r\n            icon={AlertTriangle}\r\n            title=\"5. The Deadlock â€” How It Happens\"\r\n            subtitle=\"Circular wait created by opposite resource acquisition orders\"\r\n          />\r\n\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-5\">\r\n            <div>\r\n              <h3 className=\"text-sm font-bold text-white mb-3\">Timeline</h3>\r\n              <div className=\"space-y-1.5\">\r\n                {[\r\n                  { time: 't=0', event: 'Customer 0 locks Resource 0 (mutex)', icon: 'ðŸ”’', color: 'text-blue-400' },\r\n                  { time: 't=0', event: 'Customer 1 locks Resource 1 (mutex)', icon: 'ðŸ”’', color: 'text-emerald-400' },\r\n                  { time: 't=1s', event: 'sleep(1) expires â€” OS wakes both threads', icon: 'â°', color: 'text-amber-400' },\r\n                  { time: 't=1s', event: 'Customer 0 tries Resource 1 â†’ BLOCKED', icon: 'ðŸš«', color: 'text-rose-400' },\r\n                  { time: 't=1s', event: 'Customer 1 tries Resource 0 â†’ BLOCKED', icon: 'ðŸš«', color: 'text-rose-400' },\r\n                  { time: 'âˆž', event: 'DEADLOCK: both threads in kernel wait queue forever', icon: 'ðŸ’€', color: 'text-danger' },\r\n                ].map(({ time, event, icon, color }, i) => (\r\n                  <div key={i} className=\"flex items-center gap-3 py-2 px-3 rounded-lg bg-surface-900/40 border border-surface-700/30\">\r\n                    <span className=\"font-mono text-[10px] text-surface-500 w-10\">{time}</span>\r\n                    <span className=\"text-sm\">{icon}</span>\r\n                    <span className={`text-xs ${color}`}>{event}</span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <h3 className=\"text-sm font-bold text-white mb-3\">Circular Wait Diagram</h3>\r\n              <div className=\"bg-surface-900/60 rounded-xl p-6 border border-surface-700/30\">\r\n                <svg viewBox=\"0 0 280 200\" className=\"w-full h-auto max-h-48\">\r\n                  {/* Customer 0 */}\r\n                  <circle cx=\"60\" cy=\"60\" r=\"30\" fill=\"rgba(59,130,246,0.15)\" stroke=\"#3b82f6\" strokeWidth=\"2\" />\r\n                  <text x=\"60\" y=\"57\" textAnchor=\"middle\" fill=\"#93c5fd\" fontSize=\"10\" fontWeight=\"bold\">C0</text>\r\n                  <text x=\"60\" y=\"70\" textAnchor=\"middle\" fill=\"#9ca3af\" fontSize=\"8\">Even</text>\r\n\r\n                  {/* Customer 1 */}\r\n                  <circle cx=\"220\" cy=\"60\" r=\"30\" fill=\"rgba(16,185,129,0.15)\" stroke=\"#10b981\" strokeWidth=\"2\" />\r\n                  <text x=\"220\" y=\"57\" textAnchor=\"middle\" fill=\"#6ee7b7\" fontSize=\"10\" fontWeight=\"bold\">C1</text>\r\n                  <text x=\"220\" y=\"70\" textAnchor=\"middle\" fill=\"#9ca3af\" fontSize=\"8\">Odd</text>\r\n\r\n                  {/* Resource 0 */}\r\n                  <rect x=\"25\" y=\"130\" width=\"70\" height=\"40\" rx=\"6\" fill=\"rgba(245,158,11,0.15)\" stroke=\"#f59e0b\" strokeWidth=\"1.5\" />\r\n                  <text x=\"60\" y=\"155\" textAnchor=\"middle\" fill=\"#fbbf24\" fontSize=\"9\" fontWeight=\"bold\">R0</text>\r\n\r\n                  {/* Resource 1 */}\r\n                  <rect x=\"185\" y=\"130\" width=\"70\" height=\"40\" rx=\"6\" fill=\"rgba(245,158,11,0.15)\" stroke=\"#f59e0b\" strokeWidth=\"1.5\" />\r\n                  <text x=\"220\" y=\"155\" textAnchor=\"middle\" fill=\"#fbbf24\" fontSize=\"9\" fontWeight=\"bold\">R1</text>\r\n\r\n                  {/* C0 holds R0 */}\r\n                  <line x1=\"60\" y1=\"90\" x2=\"60\" y2=\"130\" stroke=\"#3b82f6\" strokeWidth=\"2\" />\r\n                  <text x=\"22\" y=\"115\" fill=\"#60a5fa\" fontSize=\"7\">HOLDS</text>\r\n\r\n                  {/* C1 holds R1 */}\r\n                  <line x1=\"220\" y1=\"90\" x2=\"220\" y2=\"130\" stroke=\"#10b981\" strokeWidth=\"2\" />\r\n                  <text x=\"230\" y=\"115\" fill=\"#6ee7b7\" fontSize=\"7\">HOLDS</text>\r\n\r\n                  {/* C0 waits for R1 â€” red cycle edge */}\r\n                  <line x1=\"90\" y1=\"65\" x2=\"185\" y2=\"145\" stroke=\"#ef4444\" strokeWidth=\"2\" strokeDasharray=\"6 3\" />\r\n                  <text x=\"140\" y=\"95\" fill=\"#ef4444\" fontSize=\"7\" fontWeight=\"bold\">WAITS</text>\r\n\r\n                  {/* C1 waits for R0 â€” red cycle edge */}\r\n                  <line x1=\"190\" y1=\"65\" x2=\"95\" y2=\"145\" stroke=\"#ef4444\" strokeWidth=\"2\" strokeDasharray=\"6 3\" />\r\n                  <text x=\"130\" y=\"120\" fill=\"#ef4444\" fontSize=\"7\" fontWeight=\"bold\">WAITS</text>\r\n                </svg>\r\n              </div>\r\n              <p className=\"text-[10px] text-surface-500 text-center mt-2\">\r\n                Red dashed lines show the circular wait â€” forming a cycle in the Wait-For Graph\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          <pre className=\"text-[11px] text-surface-300 bg-surface-900/60 rounded-lg p-4 overflow-x-auto font-mono border border-surface-700/30\">\r\n{`void* process_order(void* arg) {\r\n    int id = *(int*)arg;\r\n\r\n    if(id % 2 == 0) {\r\n        request_resources(id, {R0});     // Even: lock R0 first\r\n        sleep(1);                        // OS puts thread to sleep â†’ context switch\r\n        request_resources(id, {R1});     // Then try R1 â†’ BLOCKED (held by odd customer)\r\n    } else {\r\n        request_resources(id, {R1});     // Odd: lock R1 first\r\n        sleep(1);                        // OS puts thread to sleep â†’ context switch\r\n        request_resources(id, {R0});     // Then try R0 â†’ BLOCKED (held by even customer)\r\n    }\r\n    // â†’ Both threads stuck in kernel wait queue: DEADLOCK\r\n}`}\r\n          </pre>\r\n        </GlassCard>\r\n      </motion.div>\r\n\r\n      {/* 6. Four Necessary Conditions */}\r\n      <motion.div {...fadeUp} transition={{ delay: 0.35 }}>\r\n        <GlassCard className=\"p-6\">\r\n          <SectionTitle\r\n            icon={Layers}\r\n            title=\"6. Four Necessary Conditions for Deadlock\"\r\n            subtitle=\"All four must hold simultaneously â€” our application satisfies all four\"\r\n          />\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\r\n            {[\r\n              {\r\n                title: 'Mutual Exclusion',\r\n                desc: 'Each pthread_mutex can be held by only one thread at a time',\r\n                code: 'pthread_mutex_lock(&resource_locks[i])',\r\n                color: 'blue',\r\n              },\r\n              {\r\n                title: 'Hold and Wait',\r\n                desc: 'Customers hold R0 while waiting for R1 (and vice versa)',\r\n                code: 'request(R0); sleep(1); request(R1);',\r\n                color: 'amber',\r\n              },\r\n              {\r\n                title: 'No Preemption',\r\n                desc: 'OS cannot force a thread to release its mutex â€” only the owner can unlock',\r\n                code: 'Only owner calls pthread_mutex_unlock()',\r\n                color: 'rose',\r\n              },\r\n              {\r\n                title: 'Circular Wait',\r\n                desc: 'C0 waits for R1 (held by C1), C1 waits for R0 (held by C0)',\r\n                code: 'C0 â†’ R1 â†’ C1 â†’ R0 â†’ C0    (cycle!)',\r\n                color: 'purple',\r\n              },\r\n            ].map(({ title, desc, code, color }) => (\r\n              <StepCard\r\n                key={title}\r\n                number={title.charAt(0)}\r\n                title={title}\r\n                description={desc}\r\n                code={code}\r\n                color={color}\r\n              />\r\n            ))}\r\n          </div>\r\n        </GlassCard>\r\n      </motion.div>\r\n\r\n      {/* 7. Detection & Recovery */}\r\n      <motion.div {...fadeUp} transition={{ delay: 0.4 }}>\r\n        <GlassCard className=\"p-6\">\r\n          <SectionTitle\r\n            icon={Zap}\r\n            title=\"7. Detection & Recovery (OS-Level View)\"\r\n            subtitle=\"Background thread performs DFS cycle detection on the Wait-For Graph\"\r\n          />\r\n\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-5\">\r\n            <div>\r\n              <h3 className=\"text-sm font-bold text-white mb-3\">Detection Thread Lifecycle</h3>\r\n              <pre className=\"text-[11px] text-surface-300 bg-surface-900/60 rounded-lg p-4 overflow-x-auto font-mono border border-surface-700/30\">\r\n{`void* detection_thread(void* arg) {\r\n    while(1) {\r\n        sleep(2);  // OS: thread â†’ SLEEPING for 2s\r\n\r\n        // Reset visited arrays\r\n        // Run DFS on wait_for[][] adjacency matrix\r\n        for(int i = 0; i < NUM_CUSTOMERS; i++) {\r\n            if(!visited[i] && dfs_cycle(i)) {\r\n                printf(\"ðŸ”¥ Deadlock Detected!\\\\n\");\r\n                recover_deadlock();  // Preempt victim\r\n                break;\r\n            }\r\n        }\r\n    }\r\n}`}\r\n              </pre>\r\n            </div>\r\n\r\n            <div>\r\n              <h3 className=\"text-sm font-bold text-white mb-3\">Recovery Mechanism</h3>\r\n              <pre className=\"text-[11px] text-surface-300 bg-surface-900/60 rounded-lg p-4 overflow-x-auto font-mono border border-surface-700/30\">\r\n{`void recover_deadlock() {\r\n    int victim = 0;  // Lowest-ID victim selection\r\n\r\n    // Force-release victim's mutexes\r\n    for(int i = 0; i < NUM_RESOURCES; i++) {\r\n        if(resource_owner[i] == victim) {\r\n            pthread_mutex_unlock(&resource_locks[i]);\r\n            // OS wakes up blocked threads waiting\r\n            // on this mutex â†’ BLOCKED â†’ READY\r\n            resource_owner[i] = -1;\r\n            available[i]++;\r\n        }\r\n    }\r\n    // Clear wait-for edges\r\n    for(int i = 0; i < NUM_CUSTOMERS; i++) {\r\n        wait_for[victim][i] = 0;\r\n        wait_for[i][victim] = 0;\r\n    }\r\n}`}\r\n              </pre>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"mt-4 p-4 rounded-xl bg-rose-500/5 border border-rose-500/20\">\r\n            <p className=\"text-xs text-surface-300 leading-relaxed\">\r\n              <span className=\"text-rose-400 font-bold\">Key Insight:</span> When{' '}\r\n              <code className=\"text-rose-400 bg-surface-800/60 px-1 rounded\">recover_deadlock()</code>{' '}\r\n              calls <code className=\"text-rose-400 bg-surface-800/60 px-1 rounded\">pthread_mutex_unlock()</code>{' '}\r\n              on the victim's mutexes, the OS kernel{' '}\r\n              <span className=\"text-white font-semibold\">wakes up all threads</span> that were blocked\r\n              in the wait queue for those mutexes. This breaks the circular wait and resolves the deadlock.\r\n            </p>\r\n          </div>\r\n        </GlassCard>\r\n      </motion.div>\r\n\r\n      {/* 8. Prevention via Resource Ordering */}\r\n      <motion.div {...fadeUp} transition={{ delay: 0.45 }}>\r\n        <GlassCard className=\"p-6\">\r\n          <SectionTitle\r\n            icon={ShieldCheck}\r\n            title=\"8. Prevention â€” Resource Ordering\"\r\n            subtitle=\"Break circular wait by enforcing a global lock acquisition order\"\r\n          />\r\n\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-5\">\r\n            <div className=\"space-y-3 text-xs text-surface-300 leading-relaxed\">\r\n              <p>\r\n                <span className=\"text-white font-semibold\">The idea:</span> If all threads acquire\r\n                resources in the <span className=\"text-emerald-400 font-semibold\">same global order</span>{' '}\r\n                (e.g., always R0 before R1), a circular wait <span className=\"text-emerald-400 font-semibold\">can never form</span>.\r\n              </p>\r\n              <div className=\"p-3 rounded-lg bg-emerald-500/5 border border-emerald-500/20\">\r\n                <p className=\"text-emerald-400 font-semibold mb-1\">With Prevention:</p>\r\n                <p className=\"font-mono text-[11px]\">Customer 0: lock R0 â†’ lock R1 âœ“</p>\r\n                <p className=\"font-mono text-[11px]\">Customer 1: lock R0 â†’ lock R1 âœ“</p>\r\n                <p className=\"text-[10px] text-emerald-300 mt-1\">â†’ No circular dependency possible!</p>\r\n              </div>\r\n              <div className=\"p-3 rounded-lg bg-rose-500/5 border border-rose-500/20\">\r\n                <p className=\"text-rose-400 font-semibold mb-1\">Without Prevention:</p>\r\n                <p className=\"font-mono text-[11px]\">Customer 0: lock R0 â†’ lock R1</p>\r\n                <p className=\"font-mono text-[11px]\">Customer 1: lock R1 â†’ lock R0</p>\r\n                <p className=\"text-[10px] text-rose-300 mt-1\">â†’ Circular wait â†’ DEADLOCK!</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <h3 className=\"text-sm font-bold text-white mb-3\">Banker's Algorithm (Avoidance)</h3>\r\n              <pre className=\"text-[11px] text-surface-300 bg-surface-900/60 rounded-lg p-4 overflow-x-auto font-mono border border-surface-700/30\">\r\n{`int is_safe_state() {\r\n    int work[NUM_RESOURCES];\r\n    int finish[NUM_CUSTOMERS] = {0};\r\n\r\n    for(int i=0; i<NUM_RESOURCES; i++)\r\n        work[i] = available[i];\r\n\r\n    // Try to find a safe sequence\r\n    int count = 0;\r\n    while(count < NUM_CUSTOMERS) {\r\n        int found = 0;\r\n        for(int i=0; i<NUM_CUSTOMERS; i++) {\r\n            if(!finish[i]) {\r\n                // Can customer i finish with\r\n                // current available resources?\r\n                if(need[i] <= work) {\r\n                    work += allocation[i];\r\n                    finish[i] = 1;\r\n                    found = 1; count++;\r\n                }\r\n            }\r\n        }\r\n        if(!found) return 0; // UNSAFE\r\n    }\r\n    return 1; // SAFE â€” grant the request\r\n}`}\r\n              </pre>\r\n            </div>\r\n          </div>\r\n        </GlassCard>\r\n      </motion.div>\r\n\r\n      {/* 9. Summary Diagram */}\r\n      <motion.div {...fadeUp} transition={{ delay: 0.5 }}>\r\n        <GlassCard className=\"p-6\">\r\n          <SectionTitle\r\n            icon={Terminal}\r\n            title=\"9. Complete OS Execution Flow\"\r\n            subtitle=\"End-to-end view of how the OS manages our application\"\r\n          />\r\n\r\n          <div className=\"space-y-2\">\r\n            {[\r\n              { step: '1', label: 'OS loads binary', detail: 'Creates process with PCB, maps virtual memory segments', color: 'accent' },\r\n              { step: '2', label: 'main() calls init_resources()', detail: 'Initializes pthread_mutex_t array â€” kernel allocates futex objects', color: 'blue' },\r\n              { step: '3', label: 'pthread_create() Ã— 3', detail: 'OS creates kernel threads: 1 detector + 2 customers, each with own stack', color: 'green' },\r\n              { step: '4', label: 'OS scheduler dispatches threads', detail: 'CFS/dispatcher time-slices threads across CPU cores (preemptive scheduling)', color: 'amber' },\r\n              { step: '5', label: 'Threads acquire mutexes', detail: 'pthread_mutex_lock/trylock â€” kernel manages wait queues per mutex', color: 'purple' },\r\n              { step: '6', label: 'sleep(1) â€” voluntary yield', detail: 'OS moves threads to SLEEPING state, timer interrupt wakes them after 1 second', color: 'blue' },\r\n              { step: '7', label: 'Circular wait â†’ DEADLOCK', detail: 'Both customer threads BLOCKED in kernel wait queue â€” OS cannot resolve this automatically', color: 'rose' },\r\n              { step: '8', label: 'Detection thread wakes up', detail: 'sleep(2) expires â†’ DFS scan finds cycle in wait_for[][] â†’ triggers recovery', color: 'amber' },\r\n              { step: '9', label: 'Recovery: force-unlock mutexes', detail: 'OS wakes blocked threads from wait queue â†’ threads resume â†’ deadlock broken', color: 'green' },\r\n              { step: '10', label: 'Threads complete & exit', detail: 'pthread_join() returns â†’ main() exits â†’ OS reclaims all process resources', color: 'accent' },\r\n            ].map(({ step, label, detail, color }) => {\r\n              const colorMap = {\r\n                accent: 'bg-accent/15 text-accent-light border-accent/30',\r\n                blue: 'bg-blue-400/15 text-blue-400 border-blue-400/30',\r\n                green: 'bg-emerald-400/15 text-emerald-400 border-emerald-400/30',\r\n                amber: 'bg-amber-400/15 text-amber-400 border-amber-400/30',\r\n                rose: 'bg-rose-400/15 text-rose-400 border-rose-400/30',\r\n                purple: 'bg-purple-400/15 text-purple-400 border-purple-400/30',\r\n              };\r\n              return (\r\n                <div key={step} className=\"flex items-start gap-3 p-3 rounded-xl bg-surface-900/40 border border-surface-700/30\">\r\n                  <span className={`flex items-center justify-center w-7 h-7 rounded-lg text-[10px] font-bold border flex-shrink-0 ${colorMap[color]}`}>\r\n                    {step}\r\n                  </span>\r\n                  <div>\r\n                    <p className=\"text-xs text-white font-semibold\">{label}</p>\r\n                    <p className=\"text-[10px] text-surface-400 mt-0.5\">{detail}</p>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </GlassCard>\r\n      </motion.div>\r\n\r\n      {/* Footer note */}\r\n      <motion.div {...fadeUp} transition={{ delay: 0.55 }}>\r\n        <GlassCard className=\"p-6 text-center\">\r\n          <p className=\"text-sm text-surface-300 leading-relaxed max-w-2xl mx-auto\">\r\n            This page demonstrates how the <span className=\"text-white font-semibold\">Operating System</span> manages\r\n            our deadlock simulation at the kernel level â€” from{' '}\r\n            <span className=\"text-blue-400 font-semibold\">process creation</span> and{' '}\r\n            <span className=\"text-emerald-400 font-semibold\">thread scheduling</span> to{' '}\r\n            <span className=\"text-amber-400 font-semibold\">mutex synchronization</span> and{' '}\r\n            <span className=\"text-rose-400 font-semibold\">deadlock recovery</span>.\r\n          </p>\r\n          <div className=\"mt-4 text-xs text-surface-500\">\r\n            Deadlock Management Framework â€” OS Execution Deep Dive\r\n          </div>\r\n        </GlassCard>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"oJAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,MAAM,KAAQ,eAAe,CACtC,MAAO,CAAAC,SAAS,KAAM,aAAa,CACnC,MAAO,CAAAC,YAAY,KAAM,gBAAgB,CACzC,OACEC,GAAG,CACHC,MAAM,CACNC,SAAS,CACTC,IAAI,CACJC,MAAM,CACNC,KAAK,CACLC,WAAW,CACXC,aAAa,CACbC,WAAW,CACXC,UAAU,CACVC,QAAQ,CACRC,GAAG,CACHC,MAAM,CACNC,SAAS,CACTC,QAAQ,KACH,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEtB,KAAM,CAAAC,MAAM,CAAG,CACbC,OAAO,CAAE,CAAEC,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,EAAG,CAAC,CAC9BC,OAAO,CAAE,CAAEF,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAE,CAAC,CAC7BE,UAAU,CAAE,CAAEC,QAAQ,CAAE,GAAI,CAC9B,CAAC,CAED,QAAS,CAAAC,YAAYA,CAAAC,IAAA,CAAkC,IAAjC,CAAEC,IAAI,CAAEC,IAAI,CAAEC,KAAK,CAAEC,QAAS,CAAC,CAAAJ,IAAA,CACnD,mBACET,KAAA,QAAKc,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CjB,IAAA,QAAKgB,SAAS,CAAC,4DAA4D,CAAAC,QAAA,cACzEjB,IAAA,CAACa,IAAI,EAACK,IAAI,CAAE,EAAG,CAACF,SAAS,CAAC,mBAAmB,CAAE,CAAC,CAC7C,CAAC,cACNd,KAAA,QAAAe,QAAA,eACEjB,IAAA,OAAIgB,SAAS,CAAC,8BAA8B,CAAAC,QAAA,CAAEH,KAAK,CAAK,CAAC,CACxDC,QAAQ,eACPf,IAAA,MAAGgB,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAAEF,QAAQ,CAAI,CAC7D,EACE,CAAC,EACH,CAAC,CAEV,CAEA,QAAS,CAAAI,QAAQA,CAAAC,KAAA,CAAyD,IAAxD,CAAEC,MAAM,CAAEP,KAAK,CAAEQ,WAAW,CAAEC,IAAI,CAAEC,KAAK,CAAG,QAAS,CAAC,CAAAJ,KAAA,CACtE,KAAM,CAAAK,QAAQ,CAAG,CACfC,MAAM,CAAE,8BAA8B,CACtCC,IAAI,CAAE,kCAAkC,CACxCC,KAAK,CAAE,wCAAwC,CAC/CC,KAAK,CAAE,oCAAoC,CAC3CC,IAAI,CAAE,kCAAkC,CACxCC,MAAM,CAAE,sCACV,CAAC,CACD,KAAM,CAAAC,QAAQ,CAAG,CACfN,MAAM,CAAE,iDAAiD,CACzDC,IAAI,CAAE,iDAAiD,CACvDC,KAAK,CAAE,0DAA0D,CACjEC,KAAK,CAAE,oDAAoD,CAC3DC,IAAI,CAAE,iDAAiD,CACvDC,MAAM,CAAE,uDACV,CAAC,CACD,mBACE7B,KAAA,QAAKc,SAAS,0BAAAiB,MAAA,CAA2BR,QAAQ,CAACD,KAAK,CAAC,CAAG,CAAAP,QAAA,eACzDf,KAAA,QAAKc,SAAS,CAAC,8BAA8B,CAAAC,QAAA,eAC3CjB,IAAA,SACEgB,SAAS,iFAAAiB,MAAA,CAAkFD,QAAQ,CAACR,KAAK,CAAC,CAAG,CAAAP,QAAA,CAE5GI,MAAM,CACH,CAAC,cACPrB,IAAA,OAAIgB,SAAS,CAAC,8BAA8B,CAAAC,QAAA,CAAEH,KAAK,CAAK,CAAC,EACtD,CAAC,cACNd,IAAA,MAAGgB,SAAS,CAAC,+CAA+C,CAAAC,QAAA,CACzDK,WAAW,CACX,CAAC,CACHC,IAAI,eACHvB,IAAA,QAAKgB,SAAS,CAAC,sHAAsH,CAAAC,QAAA,CAClIM,IAAI,CACF,CACN,EACE,CAAC,CAEV,CAEA,QAAS,CAAAW,SAASA,CAAAC,KAAA,CAAgC,IAA/B,CAAEC,IAAI,CAAEC,IAAI,CAAEb,KAAK,CAAEc,MAAO,CAAC,CAAAH,KAAA,CAC9C,KAAM,CAAAV,QAAQ,CAAG,CACfE,IAAI,CAAE,iDAAiD,CACvDC,KAAK,CAAE,0DAA0D,CACjEC,KAAK,CAAE,oDAAoD,CAC3DC,IAAI,CAAE,iDAAiD,CACvDC,MAAM,CAAE,uDACV,CAAC,CACD,mBACE7B,KAAA,QAAKc,SAAS,0BAAAiB,MAAA,CAA2BR,QAAQ,CAACD,KAAK,CAAC,gBAAe,CAAAP,QAAA,eACrEjB,IAAA,QAAKgB,SAAS,CAAC,wBAAwB,CAAAC,QAAA,CAAEmB,IAAI,CAAM,CAAC,cACpDpC,IAAA,QAAKgB,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAEoB,IAAI,CAAM,CAAC,cAC/DrC,IAAA,SAAMgB,SAAS,CAAC,gIAAgI,CAAAC,QAAA,CAC7IqB,MAAM,CACH,CAAC,EACJ,CAAC,CAEV,CAEA,cAAe,SAAS,CAAAC,eAAeA,CAAA,CAAG,CACxC,mBACErC,KAAA,QAAKc,SAAS,CAAC,WAAW,CAAAC,QAAA,eAExBjB,IAAA,CAACnB,MAAM,CAAC2D,GAAG,CAAAC,aAAA,CAAAA,aAAA,IAAKtC,MAAM,MAAAc,QAAA,cACpBf,KAAA,CAACpB,SAAS,EAACkC,SAAS,CAAC,iBAAiB,CAAC0B,IAAI,CAAC,QAAQ,CAAAzB,QAAA,eAClDjB,IAAA,QAAKgB,SAAS,CAAC,0BAA0B,CAAAC,QAAA,cACvCjB,IAAA,QAAKgB,SAAS,CAAC,sDAAsD,CAAAC,QAAA,cACnEjB,IAAA,CAAChB,GAAG,EAACkC,IAAI,CAAE,EAAG,CAACF,SAAS,CAAC,mBAAmB,CAAE,CAAC,CAC5C,CAAC,CACH,CAAC,cACNhB,IAAA,OAAIgB,SAAS,CAAC,qDAAqD,CAAAC,QAAA,CAAC,sCAEpE,CAAI,CAAC,cACLf,KAAA,MAAGc,SAAS,CAAC,4DAA4D,CAAAC,QAAA,EAAC,mDACvB,CAAC,GAAG,cACrDjB,IAAA,SAAMgB,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAAC,WAAS,CAAM,CAAC,IAAC,CAAC,GAAG,cACvEjB,IAAA,SAAMgB,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAC,SAAO,CAAM,CAAC,IAAC,CAAC,GAAG,cACjEjB,IAAA,SAAMgB,SAAS,CAAC,8BAA8B,CAAAC,QAAA,CAAC,iBAAe,CAAM,CAAC,QAAK,CAAC,GAAG,cAC9EjB,IAAA,SAAMgB,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAC,oBAAkB,CAAM,CAAC,CAAC,GAAG,CAAC,6BAE9E,EAAG,CAAC,EACK,CAAC,EACF,CAAC,cAGbjB,IAAA,CAACnB,MAAM,CAAC2D,GAAG,CAAAC,aAAA,CAAAA,aAAA,IAAKtC,MAAM,MAAEK,UAAU,CAAE,CAAEmC,KAAK,CAAE,IAAK,CAAE,CAAA1B,QAAA,cAClDjB,IAAA,CAACjB,YAAY,GAAE,CAAC,EACN,CAAC,cAGbiB,IAAA,CAACnB,MAAM,CAAC2D,GAAG,CAAAC,aAAA,CAAAA,aAAA,IAAKtC,MAAM,MAAEK,UAAU,CAAE,CAAEmC,KAAK,CAAE,GAAI,CAAE,CAAA1B,QAAA,cACjDf,KAAA,CAACpB,SAAS,EAACkC,SAAS,CAAC,KAAK,CAAAC,QAAA,eACxBjB,IAAA,CAACU,YAAY,EACXE,IAAI,CAAEhB,MAAO,CACbkB,KAAK,CAAC,qBAAqB,CAC3BC,QAAQ,CAAC,yCAAyC,CACnD,CAAC,cACFb,KAAA,QAAKc,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eACpDf,KAAA,QAAKc,SAAS,CAAC,oDAAoD,CAAAC,QAAA,eACjEjB,IAAA,MAAAiB,QAAA,CAAG,oEAEH,CAAG,CAAC,cACJjB,IAAA,OAAIgB,SAAS,CAAC,WAAW,CAAAC,QAAA,CACtB,CACC,sDAAsD,CACtD,mEAAmE,CACnE,kFAAkF,CAClF,8FAA8F,CAC9F,yDAAyD,CAC1D,CAAC2B,GAAG,CAAC,CAACC,IAAI,CAAEC,CAAC,gBACZ5C,KAAA,OAAYc,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eAC5Cf,KAAA,SAAMc,SAAS,CAAC,oCAAoC,CAAAC,QAAA,EAAE6B,CAAC,CAAG,CAAC,CAAC,GAAC,EAAM,CAAC,CACnED,IAAI,GAFEC,CAGL,CACL,CAAC,CACA,CAAC,EACF,CAAC,cACN5C,KAAA,QAAKc,SAAS,CAAC,+DAA+D,CAAAC,QAAA,eAC5Ef,KAAA,OAAIc,SAAS,CAAC,2DAA2D,CAAAC,QAAA,eACvEjB,IAAA,CAACV,WAAW,EAAC4B,IAAI,CAAE,EAAG,CAACF,SAAS,CAAC,mBAAmB,CAAE,CAAC,wBAEzD,EAAI,CAAC,cACLhB,IAAA,QAAKgB,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAC7C,CACC,CAAE8B,OAAO,CAAE,OAAO,CAAEC,IAAI,CAAE,4BAA4B,CAAExB,KAAK,CAAE,eAAe,CAAEyB,KAAK,CAAE,cAAe,CAAC,CACvG,CAAEF,OAAO,CAAE,MAAM,CAAEC,IAAI,CAAE,EAAE,CAAExB,KAAK,CAAE,kBAAkB,CAAEyB,KAAK,CAAE,EAAG,CAAC,CACnE,CAAEF,OAAO,CAAE,MAAM,CAAEC,IAAI,CAAE,8BAA8B,CAAExB,KAAK,CAAE,gBAAgB,CAAEyB,KAAK,CAAE,YAAa,CAAC,CACvG,CAAEF,OAAO,CAAE,KAAK,CAAEC,IAAI,CAAE,sCAAsC,CAAExB,KAAK,CAAE,eAAe,CAAEyB,KAAK,CAAE,EAAG,CAAC,CACnG,CAAEF,OAAO,CAAE,MAAM,CAAEC,IAAI,CAAE,mCAAmC,CAAExB,KAAK,CAAE,kBAAkB,CAAEyB,KAAK,CAAE,EAAG,CAAC,CACpG,CAAEF,OAAO,CAAE,MAAM,CAAEC,IAAI,CAAE,6BAA6B,CAAExB,KAAK,CAAE,iBAAiB,CAAEyB,KAAK,CAAE,EAAG,CAAC,CAC9F,CAACL,GAAG,CAAC,CAAAM,KAAA,CAAkCJ,CAAC,OAAlC,CAAEC,OAAO,CAAEC,IAAI,CAAExB,KAAK,CAAEyB,KAAM,CAAC,CAAAC,KAAA,oBACpChD,KAAA,QAAac,SAAS,0DAAAiB,MAAA,CAA2Da,CAAC,GAAK,CAAC,CAAG,mBAAmB,CAAG,EAAE,CAAG,CAAA7B,QAAA,eACpHf,KAAA,QAAKc,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eACtCjB,IAAA,SAAMgB,SAAS,cAAAiB,MAAA,CAAeT,KAAK,SAAQ,CAAAP,QAAA,CAAE8B,OAAO,CAAO,CAAC,cAC5D/C,IAAA,SAAMgB,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAE+B,IAAI,CAAO,CAAC,EAC7C,CAAC,CACLC,KAAK,eAAIjD,IAAA,SAAMgB,SAAS,CAAC,8BAA8B,CAAAC,QAAA,CAAEgC,KAAK,CAAO,CAAC,GAL/DH,CAML,CAAC,EACP,CAAC,CACC,CAAC,EACH,CAAC,EACH,CAAC,EACG,CAAC,EACF,CAAC,cAGb9C,IAAA,CAACnB,MAAM,CAAC2D,GAAG,CAAAC,aAAA,CAAAA,aAAA,IAAKtC,MAAM,MAAEK,UAAU,CAAE,CAAEmC,KAAK,CAAE,IAAK,CAAE,CAAA1B,QAAA,cAClDf,KAAA,CAACpB,SAAS,EAACkC,SAAS,CAAC,KAAK,CAAAC,QAAA,eACxBjB,IAAA,CAACU,YAAY,EACXE,IAAI,CAAE1B,SAAU,CAChB4B,KAAK,CAAC,8BAA8B,CACpCC,QAAQ,CAAC,0DAAqD,CAC/D,CAAC,cACFb,KAAA,MAAGc,SAAS,CAAC,+CAA+C,CAAAC,QAAA,EAAC,uBACtC,cAAAjB,IAAA,SAAMgB,SAAS,CAAC,0BAA0B,CAAAC,QAAA,CAAC,kBAAgB,CAAM,CAAC,yMAIzF,EAAG,CAAC,cAEJf,KAAA,QAAKc,SAAS,CAAC,4CAA4C,CAAAC,QAAA,eACzDjB,IAAA,CAACkC,SAAS,EAACE,IAAI,CAAC,aAAa,CAACC,IAAI,CAAC,iCAAiC,CAACb,KAAK,CAAC,MAAM,CAACc,MAAM,CAAC,gBAAgB,CAAE,CAAC,cAC5GtC,IAAA,CAACkC,SAAS,EAACE,IAAI,CAAC,kBAAkB,CAACC,IAAI,CAAC,2BAA2B,CAACb,KAAK,CAAC,MAAM,CAACc,MAAM,CAAC,eAAe,CAAE,CAAC,cAC1GtC,IAAA,CAACkC,SAAS,EAACE,IAAI,CAAC,YAAY,CAACC,IAAI,CAAC,+BAAqB,CAACb,KAAK,CAAC,OAAO,CAACc,MAAM,CAAC,kBAAkB,CAAE,CAAC,cAClGtC,IAAA,CAACkC,SAAS,EAACE,IAAI,CAAC,YAAY,CAACC,IAAI,CAAC,8BAAoB,CAACb,KAAK,CAAC,OAAO,CAACc,MAAM,CAAC,kBAAkB,CAAE,CAAC,EAC9F,CAAC,cAENtC,IAAA,QAAKgB,SAAS,CAAC,sHAAsH,CAAAC,QAAA,wjBAchI,CAAC,EACG,CAAC,EACF,CAAC,cAGbjB,IAAA,CAACnB,MAAM,CAAC2D,GAAG,CAAAC,aAAA,CAAAA,aAAA,IAAKtC,MAAM,MAAEK,UAAU,CAAE,CAAEmC,KAAK,CAAE,GAAI,CAAE,CAAA1B,QAAA,cACjDf,KAAA,CAACpB,SAAS,EAACkC,SAAS,CAAC,KAAK,CAAAC,QAAA,eACxBjB,IAAA,CAACU,YAAY,EACXE,IAAI,CAAEzB,IAAK,CACX2B,KAAK,CAAC,kCAAkC,CACxCC,QAAQ,CAAC,8DAA8D,CACxE,CAAC,cAEFb,KAAA,QAAKc,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eACpDjB,IAAA,CAACmB,QAAQ,EACPE,MAAM,CAAC,GAAG,CACVP,KAAK,CAAC,sBAAsB,CAC5BQ,WAAW,CAAC,mMAA8L,CAC1MC,IAAI,4NAA8N,CAClOC,KAAK,CAAC,MAAM,CACb,CAAC,cACFxB,IAAA,CAACmB,QAAQ,EACPE,MAAM,CAAC,GAAG,CACVP,KAAK,CAAC,yBAAyB,CAC/BQ,WAAW,CAAC,8JAA8J,CAC1KC,IAAI,oRAAsR,CAC1RC,KAAK,CAAC,OAAO,CACd,CAAC,cACFxB,IAAA,CAACmB,QAAQ,EACPE,MAAM,CAAC,GAAG,CACVP,KAAK,CAAC,sCAAiC,CACvCQ,WAAW,CAAC,0OAAqO,CACjPC,IAAI,sMAA8L,CAClMC,KAAK,CAAC,MAAM,CACb,CAAC,cACFxB,IAAA,CAACmB,QAAQ,EACPE,MAAM,CAAC,GAAG,CACVP,KAAK,CAAC,wBAAwB,CAC9BQ,WAAW,CAAC,uMAAkM,CAC9MC,IAAI,uUAAyU,CAC7UC,KAAK,CAAC,OAAO,CACd,CAAC,EACC,CAAC,EACG,CAAC,EACF,CAAC,cAGbxB,IAAA,CAACnB,MAAM,CAAC2D,GAAG,CAAAC,aAAA,CAAAA,aAAA,IAAKtC,MAAM,MAAEK,UAAU,CAAE,CAAEmC,KAAK,CAAE,IAAK,CAAE,CAAA1B,QAAA,cAClDf,KAAA,CAACpB,SAAS,EAACkC,SAAS,CAAC,KAAK,CAAAC,QAAA,eACxBjB,IAAA,CAACU,YAAY,EACXE,IAAI,CAAEvB,KAAM,CACZyB,KAAK,CAAC,6CAA6C,CACnDC,QAAQ,CAAC,mDAAmD,CAC7D,CAAC,cAEFb,KAAA,QAAKc,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eACpDf,KAAA,QAAAe,QAAA,eACEf,KAAA,OAAIc,SAAS,CAAC,2DAA2D,CAAAC,QAAA,eACvEjB,IAAA,CAACN,QAAQ,EAACwB,IAAI,CAAE,EAAG,CAACF,SAAS,CAAC,eAAe,CAAE,CAAC,2BAElD,EAAI,CAAC,cACLhB,IAAA,QAAKgB,SAAS,CAAC,+FAA+F,CAAAC,QAAA,CAC3G,CACC,CAAEkC,IAAI,CAAE,KAAK,CAAEC,EAAE,CAAE,OAAO,CAAEC,OAAO,CAAE,kBAAkB,CAAE7B,KAAK,CAAE,kBAAmB,CAAC,CACpF,CAAE2B,IAAI,CAAE,OAAO,CAAEC,EAAE,CAAE,SAAS,CAAEC,OAAO,CAAE,2BAA2B,CAAE7B,KAAK,CAAE,eAAgB,CAAC,CAC9F,CAAE2B,IAAI,CAAE,SAAS,CAAEC,EAAE,CAAE,SAAS,CAAEC,OAAO,CAAE,oCAAoC,CAAE7B,KAAK,CAAE,eAAgB,CAAC,CACzG,CAAE2B,IAAI,CAAE,SAAS,CAAEC,EAAE,CAAE,UAAU,CAAEC,OAAO,CAAE,gCAAgC,CAAE7B,KAAK,CAAE,gBAAiB,CAAC,CACvG,CAAE2B,IAAI,CAAE,SAAS,CAAEC,EAAE,CAAE,OAAO,CAAEC,OAAO,CAAE,iCAAiC,CAAE7B,KAAK,CAAE,kBAAmB,CAAC,CACvG,CAAE2B,IAAI,CAAE,UAAU,CAAEC,EAAE,CAAE,OAAO,CAAEC,OAAO,CAAE,iCAAiC,CAAE7B,KAAK,CAAE,eAAgB,CAAC,CACrG,CAAE2B,IAAI,CAAE,SAAS,CAAEC,EAAE,CAAE,YAAY,CAAEC,OAAO,CAAE,yBAAyB,CAAE7B,KAAK,CAAE,kBAAmB,CAAC,CACrG,CAACoB,GAAG,CAAC,CAAAU,KAAA,CAA+BR,CAAC,OAA/B,CAAEK,IAAI,CAAEC,EAAE,CAAEC,OAAO,CAAE7B,KAAM,CAAC,CAAA8B,KAAA,oBACjCpD,KAAA,QAAac,SAAS,CAAC,8BAA8B,CAAAC,QAAA,eACnDjB,IAAA,SAAMgB,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAEkC,IAAI,CAAO,CAAC,cAChEnD,IAAA,CAACP,UAAU,EAACyB,IAAI,CAAE,EAAG,CAACF,SAAS,CAAEQ,KAAM,CAAE,CAAC,cAC1CxB,IAAA,SAAMgB,SAAS,mBAAAiB,MAAA,CAAoBT,KAAK,CAAG,CAAAP,QAAA,CAAEmC,EAAE,CAAO,CAAC,cACvDpD,IAAA,SAAMgB,SAAS,CAAC,8BAA8B,CAAAC,QAAA,CAAEoC,OAAO,CAAO,CAAC,GAJvDP,CAKL,CAAC,EACP,CAAC,CACC,CAAC,EACH,CAAC,cAEN5C,KAAA,QAAAe,QAAA,eACEf,KAAA,OAAIc,SAAS,CAAC,2DAA2D,CAAAC,QAAA,eACvEjB,IAAA,CAACH,SAAS,EAACqB,IAAI,CAAE,EAAG,CAACF,SAAS,CAAC,gBAAgB,CAAE,CAAC,0BAEpD,EAAI,CAAC,cACLhB,IAAA,QAAKgB,SAAS,CAAC,WAAW,CAAAC,QAAA,CACvB,CACC,CAAEsC,IAAI,CAAE,GAAG,CAAEC,IAAI,CAAE,2CAA2C,CAAEC,MAAM,CAAE,iDAAkD,CAAC,CAC3H,CAAEF,IAAI,CAAE,GAAG,CAAEC,IAAI,CAAE,yCAAyC,CAAEC,MAAM,CAAE,2DAA4D,CAAC,CACnI,CAAEF,IAAI,CAAE,GAAG,CAAEC,IAAI,CAAE,qCAAqC,CAAEC,MAAM,CAAE,8DAA+D,CAAC,CAClI,CAAEF,IAAI,CAAE,GAAG,CAAEC,IAAI,CAAE,qCAAqC,CAAEC,MAAM,CAAE,gDAAiD,CAAC,CACpH,CAAEF,IAAI,CAAE,GAAG,CAAEC,IAAI,CAAE,gCAAgC,CAAEC,MAAM,CAAE,6CAA8C,CAAC,CAC7G,CAACb,GAAG,CAACc,KAAA,MAAC,CAAEH,IAAI,CAAEC,IAAI,CAAEC,MAAO,CAAC,CAAAC,KAAA,oBAC3BxD,KAAA,QAAgBc,SAAS,CAAC,sFAAsF,CAAAC,QAAA,eAC9GjB,IAAA,SAAMgB,SAAS,CAAC,mJAAmJ,CAAAC,QAAA,CAChKsC,IAAI,CACD,CAAC,cACPrD,KAAA,QAAAe,QAAA,eACEjB,IAAA,MAAGgB,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAAEuC,IAAI,CAAI,CAAC,cACxDxD,IAAA,MAAGgB,SAAS,CAAC,qCAAqC,CAAAC,QAAA,CAAEwC,MAAM,CAAI,CAAC,EAC5D,CAAC,GAPEF,IAQL,CAAC,EACP,CAAC,CACC,CAAC,EACH,CAAC,EACH,CAAC,cAENvD,IAAA,QAAKgB,SAAS,CAAC,oEAAoE,CAAAC,QAAA,cACjFf,KAAA,MAAGc,SAAS,CAAC,0CAA0C,CAAAC,QAAA,eACrDjB,IAAA,SAAMgB,SAAS,CAAC,0BAA0B,CAAAC,QAAA,CAAC,qBAAmB,CAAM,CAAC,OAAI,CAAC,GAAG,cAC7EjB,IAAA,SAAMgB,SAAS,CAAC,+CAA+C,CAAAC,QAAA,CAAC,UAAQ,CAAM,CAAC,aAC5E,cAAAjB,IAAA,SAAMgB,SAAS,CAAC,kDAAkD,CAAAC,QAAA,CAAC,iBAAe,CAAM,CAAC,CAAC,GAAG,CAAC,sPAInG,EAAG,CAAC,CACD,CAAC,EACG,CAAC,EACF,CAAC,cAGbjB,IAAA,CAACnB,MAAM,CAAC2D,GAAG,CAAAC,aAAA,CAAAA,aAAA,IAAKtC,MAAM,MAAEK,UAAU,CAAE,CAAEmC,KAAK,CAAE,GAAI,CAAE,CAAA1B,QAAA,cACjDf,KAAA,CAACpB,SAAS,EAACkC,SAAS,CAAC,KAAK,CAAAC,QAAA,eACxBjB,IAAA,CAACU,YAAY,EACXE,IAAI,CAAErB,aAAc,CACpBuB,KAAK,CAAC,uCAAkC,CACxCC,QAAQ,CAAC,+DAA+D,CACzE,CAAC,cAEFb,KAAA,QAAKc,SAAS,CAAC,4CAA4C,CAAAC,QAAA,eACzDf,KAAA,QAAAe,QAAA,eACEjB,IAAA,OAAIgB,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAC,UAAQ,CAAI,CAAC,cAC/DjB,IAAA,QAAKgB,SAAS,CAAC,aAAa,CAAAC,QAAA,CACzB,CACC,CAAE0C,IAAI,CAAE,KAAK,CAAEC,KAAK,CAAE,qCAAqC,CAAEhD,IAAI,CAAE,IAAI,CAAEY,KAAK,CAAE,eAAgB,CAAC,CACjG,CAAEmC,IAAI,CAAE,KAAK,CAAEC,KAAK,CAAE,qCAAqC,CAAEhD,IAAI,CAAE,IAAI,CAAEY,KAAK,CAAE,kBAAmB,CAAC,CACpG,CAAEmC,IAAI,CAAE,MAAM,CAAEC,KAAK,CAAE,0CAA0C,CAAEhD,IAAI,CAAE,GAAG,CAAEY,KAAK,CAAE,gBAAiB,CAAC,CACvG,CAAEmC,IAAI,CAAE,MAAM,CAAEC,KAAK,CAAE,uCAAuC,CAAEhD,IAAI,CAAE,IAAI,CAAEY,KAAK,CAAE,eAAgB,CAAC,CACpG,CAAEmC,IAAI,CAAE,MAAM,CAAEC,KAAK,CAAE,uCAAuC,CAAEhD,IAAI,CAAE,IAAI,CAAEY,KAAK,CAAE,eAAgB,CAAC,CACpG,CAAEmC,IAAI,CAAE,GAAG,CAAEC,KAAK,CAAE,qDAAqD,CAAEhD,IAAI,CAAE,IAAI,CAAEY,KAAK,CAAE,aAAc,CAAC,CAC9G,CAACoB,GAAG,CAAC,CAAAiB,KAAA,CAA+Bf,CAAC,OAA/B,CAAEa,IAAI,CAAEC,KAAK,CAAEhD,IAAI,CAAEY,KAAM,CAAC,CAAAqC,KAAA,oBACjC3D,KAAA,QAAac,SAAS,CAAC,6FAA6F,CAAAC,QAAA,eAClHjB,IAAA,SAAMgB,SAAS,CAAC,6CAA6C,CAAAC,QAAA,CAAE0C,IAAI,CAAO,CAAC,cAC3E3D,IAAA,SAAMgB,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAEL,IAAI,CAAO,CAAC,cACvCZ,IAAA,SAAMgB,SAAS,YAAAiB,MAAA,CAAaT,KAAK,CAAG,CAAAP,QAAA,CAAE2C,KAAK,CAAO,CAAC,GAH3Cd,CAIL,CAAC,EACP,CAAC,CACC,CAAC,EACH,CAAC,cAEN5C,KAAA,QAAAe,QAAA,eACEjB,IAAA,OAAIgB,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAC,uBAAqB,CAAI,CAAC,cAC5EjB,IAAA,QAAKgB,SAAS,CAAC,+DAA+D,CAAAC,QAAA,cAC5Ef,KAAA,QAAK4D,OAAO,CAAC,aAAa,CAAC9C,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eAE3DjB,IAAA,WAAQ+D,EAAE,CAAC,IAAI,CAACC,EAAE,CAAC,IAAI,CAACC,CAAC,CAAC,IAAI,CAACC,IAAI,CAAC,uBAAuB,CAACC,MAAM,CAAC,SAAS,CAACC,WAAW,CAAC,GAAG,CAAE,CAAC,cAC/FpE,IAAA,SAAMqE,CAAC,CAAC,IAAI,CAAC/D,CAAC,CAAC,IAAI,CAACgE,UAAU,CAAC,QAAQ,CAACJ,IAAI,CAAC,SAAS,CAACK,QAAQ,CAAC,IAAI,CAACC,UAAU,CAAC,MAAM,CAAAvD,QAAA,CAAC,IAAE,CAAM,CAAC,cAChGjB,IAAA,SAAMqE,CAAC,CAAC,IAAI,CAAC/D,CAAC,CAAC,IAAI,CAACgE,UAAU,CAAC,QAAQ,CAACJ,IAAI,CAAC,SAAS,CAACK,QAAQ,CAAC,GAAG,CAAAtD,QAAA,CAAC,MAAI,CAAM,CAAC,cAG/EjB,IAAA,WAAQ+D,EAAE,CAAC,KAAK,CAACC,EAAE,CAAC,IAAI,CAACC,CAAC,CAAC,IAAI,CAACC,IAAI,CAAC,uBAAuB,CAACC,MAAM,CAAC,SAAS,CAACC,WAAW,CAAC,GAAG,CAAE,CAAC,cAChGpE,IAAA,SAAMqE,CAAC,CAAC,KAAK,CAAC/D,CAAC,CAAC,IAAI,CAACgE,UAAU,CAAC,QAAQ,CAACJ,IAAI,CAAC,SAAS,CAACK,QAAQ,CAAC,IAAI,CAACC,UAAU,CAAC,MAAM,CAAAvD,QAAA,CAAC,IAAE,CAAM,CAAC,cACjGjB,IAAA,SAAMqE,CAAC,CAAC,KAAK,CAAC/D,CAAC,CAAC,IAAI,CAACgE,UAAU,CAAC,QAAQ,CAACJ,IAAI,CAAC,SAAS,CAACK,QAAQ,CAAC,GAAG,CAAAtD,QAAA,CAAC,KAAG,CAAM,CAAC,cAG/EjB,IAAA,SAAMqE,CAAC,CAAC,IAAI,CAAC/D,CAAC,CAAC,KAAK,CAACmE,KAAK,CAAC,IAAI,CAACC,MAAM,CAAC,IAAI,CAACC,EAAE,CAAC,GAAG,CAACT,IAAI,CAAC,uBAAuB,CAACC,MAAM,CAAC,SAAS,CAACC,WAAW,CAAC,KAAK,CAAE,CAAC,cACrHpE,IAAA,SAAMqE,CAAC,CAAC,IAAI,CAAC/D,CAAC,CAAC,KAAK,CAACgE,UAAU,CAAC,QAAQ,CAACJ,IAAI,CAAC,SAAS,CAACK,QAAQ,CAAC,GAAG,CAACC,UAAU,CAAC,MAAM,CAAAvD,QAAA,CAAC,IAAE,CAAM,CAAC,cAGhGjB,IAAA,SAAMqE,CAAC,CAAC,KAAK,CAAC/D,CAAC,CAAC,KAAK,CAACmE,KAAK,CAAC,IAAI,CAACC,MAAM,CAAC,IAAI,CAACC,EAAE,CAAC,GAAG,CAACT,IAAI,CAAC,uBAAuB,CAACC,MAAM,CAAC,SAAS,CAACC,WAAW,CAAC,KAAK,CAAE,CAAC,cACtHpE,IAAA,SAAMqE,CAAC,CAAC,KAAK,CAAC/D,CAAC,CAAC,KAAK,CAACgE,UAAU,CAAC,QAAQ,CAACJ,IAAI,CAAC,SAAS,CAACK,QAAQ,CAAC,GAAG,CAACC,UAAU,CAAC,MAAM,CAAAvD,QAAA,CAAC,IAAE,CAAM,CAAC,cAGjGjB,IAAA,SAAM4E,EAAE,CAAC,IAAI,CAACC,EAAE,CAAC,IAAI,CAACC,EAAE,CAAC,IAAI,CAACC,EAAE,CAAC,KAAK,CAACZ,MAAM,CAAC,SAAS,CAACC,WAAW,CAAC,GAAG,CAAE,CAAC,cAC1EpE,IAAA,SAAMqE,CAAC,CAAC,IAAI,CAAC/D,CAAC,CAAC,KAAK,CAAC4D,IAAI,CAAC,SAAS,CAACK,QAAQ,CAAC,GAAG,CAAAtD,QAAA,CAAC,OAAK,CAAM,CAAC,cAG7DjB,IAAA,SAAM4E,EAAE,CAAC,KAAK,CAACC,EAAE,CAAC,IAAI,CAACC,EAAE,CAAC,KAAK,CAACC,EAAE,CAAC,KAAK,CAACZ,MAAM,CAAC,SAAS,CAACC,WAAW,CAAC,GAAG,CAAE,CAAC,cAC5EpE,IAAA,SAAMqE,CAAC,CAAC,KAAK,CAAC/D,CAAC,CAAC,KAAK,CAAC4D,IAAI,CAAC,SAAS,CAACK,QAAQ,CAAC,GAAG,CAAAtD,QAAA,CAAC,OAAK,CAAM,CAAC,cAG9DjB,IAAA,SAAM4E,EAAE,CAAC,IAAI,CAACC,EAAE,CAAC,IAAI,CAACC,EAAE,CAAC,KAAK,CAACC,EAAE,CAAC,KAAK,CAACZ,MAAM,CAAC,SAAS,CAACC,WAAW,CAAC,GAAG,CAACY,eAAe,CAAC,KAAK,CAAE,CAAC,cACjGhF,IAAA,SAAMqE,CAAC,CAAC,KAAK,CAAC/D,CAAC,CAAC,IAAI,CAAC4D,IAAI,CAAC,SAAS,CAACK,QAAQ,CAAC,GAAG,CAACC,UAAU,CAAC,MAAM,CAAAvD,QAAA,CAAC,OAAK,CAAM,CAAC,cAG/EjB,IAAA,SAAM4E,EAAE,CAAC,KAAK,CAACC,EAAE,CAAC,IAAI,CAACC,EAAE,CAAC,IAAI,CAACC,EAAE,CAAC,KAAK,CAACZ,MAAM,CAAC,SAAS,CAACC,WAAW,CAAC,GAAG,CAACY,eAAe,CAAC,KAAK,CAAE,CAAC,cACjGhF,IAAA,SAAMqE,CAAC,CAAC,KAAK,CAAC/D,CAAC,CAAC,KAAK,CAAC4D,IAAI,CAAC,SAAS,CAACK,QAAQ,CAAC,GAAG,CAACC,UAAU,CAAC,MAAM,CAAAvD,QAAA,CAAC,OAAK,CAAM,CAAC,EAC7E,CAAC,CACH,CAAC,cACNjB,IAAA,MAAGgB,SAAS,CAAC,+CAA+C,CAAAC,QAAA,CAAC,sFAE7D,CAAG,CAAC,EACD,CAAC,EACH,CAAC,cAENjB,IAAA,QAAKgB,SAAS,CAAC,sHAAsH,CAAAC,QAAA,sqBAehI,CAAC,EACG,CAAC,EACF,CAAC,cAGbjB,IAAA,CAACnB,MAAM,CAAC2D,GAAG,CAAAC,aAAA,CAAAA,aAAA,IAAKtC,MAAM,MAAEK,UAAU,CAAE,CAAEmC,KAAK,CAAE,IAAK,CAAE,CAAA1B,QAAA,cAClDf,KAAA,CAACpB,SAAS,EAACkC,SAAS,CAAC,KAAK,CAAAC,QAAA,eACxBjB,IAAA,CAACU,YAAY,EACXE,IAAI,CAAE3B,MAAO,CACb6B,KAAK,CAAC,2CAA2C,CACjDC,QAAQ,CAAC,6EAAwE,CAClF,CAAC,cACFf,IAAA,QAAKgB,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CACnD,CACC,CACEH,KAAK,CAAE,kBAAkB,CACzBkC,IAAI,CAAE,6DAA6D,CACnEzB,IAAI,CAAE,wCAAwC,CAC9CC,KAAK,CAAE,MACT,CAAC,CACD,CACEV,KAAK,CAAE,eAAe,CACtBkC,IAAI,CAAE,yDAAyD,CAC/DzB,IAAI,CAAE,qCAAqC,CAC3CC,KAAK,CAAE,OACT,CAAC,CACD,CACEV,KAAK,CAAE,eAAe,CACtBkC,IAAI,CAAE,2EAA2E,CACjFzB,IAAI,CAAE,yCAAyC,CAC/CC,KAAK,CAAE,MACT,CAAC,CACD,CACEV,KAAK,CAAE,eAAe,CACtBkC,IAAI,CAAE,4DAA4D,CAClEzB,IAAI,CAAE,oCAAoC,CAC1CC,KAAK,CAAE,QACT,CAAC,CACF,CAACoB,GAAG,CAACqC,KAAA,MAAC,CAAEnE,KAAK,CAAEkC,IAAI,CAAEzB,IAAI,CAAEC,KAAM,CAAC,CAAAyD,KAAA,oBACjCjF,IAAA,CAACmB,QAAQ,EAEPE,MAAM,CAAEP,KAAK,CAACoE,MAAM,CAAC,CAAC,CAAE,CACxBpE,KAAK,CAAEA,KAAM,CACbQ,WAAW,CAAE0B,IAAK,CAClBzB,IAAI,CAAEA,IAAK,CACXC,KAAK,CAAEA,KAAM,EALRV,KAMN,CAAC,EACH,CAAC,CACC,CAAC,EACG,CAAC,EACF,CAAC,cAGbd,IAAA,CAACnB,MAAM,CAAC2D,GAAG,CAAAC,aAAA,CAAAA,aAAA,IAAKtC,MAAM,MAAEK,UAAU,CAAE,CAAEmC,KAAK,CAAE,GAAI,CAAE,CAAA1B,QAAA,cACjDf,KAAA,CAACpB,SAAS,EAACkC,SAAS,CAAC,KAAK,CAAAC,QAAA,eACxBjB,IAAA,CAACU,YAAY,EACXE,IAAI,CAAEjB,GAAI,CACVmB,KAAK,CAAC,yCAAyC,CAC/CC,QAAQ,CAAC,sEAAsE,CAChF,CAAC,cAEFb,KAAA,QAAKc,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eACpDf,KAAA,QAAAe,QAAA,eACEjB,IAAA,OAAIgB,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAC,4BAA0B,CAAI,CAAC,cACjFjB,IAAA,QAAKgB,SAAS,CAAC,sHAAsH,CAAAC,QAAA,8dAgBhI,CAAC,EACH,CAAC,cAENf,KAAA,QAAAe,QAAA,eACEjB,IAAA,OAAIgB,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAC,oBAAkB,CAAI,CAAC,cACzEjB,IAAA,QAAKgB,SAAS,CAAC,sHAAsH,CAAAC,QAAA,qmBAoBhI,CAAC,EACH,CAAC,EACH,CAAC,cAENjB,IAAA,QAAKgB,SAAS,CAAC,6DAA6D,CAAAC,QAAA,cAC1Ef,KAAA,MAAGc,SAAS,CAAC,0CAA0C,CAAAC,QAAA,eACrDjB,IAAA,SAAMgB,SAAS,CAAC,yBAAyB,CAAAC,QAAA,CAAC,cAAY,CAAM,CAAC,QAAK,CAAC,GAAG,cACtEjB,IAAA,SAAMgB,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,oBAAkB,CAAM,CAAC,CAAC,GAAG,CAAC,QACvF,cAAAjB,IAAA,SAAMgB,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,wBAAsB,CAAM,CAAC,CAAC,GAAG,CAAC,wCACjE,CAAC,GAAG,cAC1CjB,IAAA,SAAMgB,SAAS,CAAC,0BAA0B,CAAAC,QAAA,CAAC,sBAAoB,CAAM,CAAC,mHAExE,EAAG,CAAC,CACD,CAAC,EACG,CAAC,EACF,CAAC,cAGbjB,IAAA,CAACnB,MAAM,CAAC2D,GAAG,CAAAC,aAAA,CAAAA,aAAA,IAAKtC,MAAM,MAAEK,UAAU,CAAE,CAAEmC,KAAK,CAAE,IAAK,CAAE,CAAA1B,QAAA,cAClDf,KAAA,CAACpB,SAAS,EAACkC,SAAS,CAAC,KAAK,CAAAC,QAAA,eACxBjB,IAAA,CAACU,YAAY,EACXE,IAAI,CAAEpB,WAAY,CAClBsB,KAAK,CAAC,wCAAmC,CACzCC,QAAQ,CAAC,kEAAkE,CAC5E,CAAC,cAEFb,KAAA,QAAKc,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eACpDf,KAAA,QAAKc,SAAS,CAAC,oDAAoD,CAAAC,QAAA,eACjEf,KAAA,MAAAe,QAAA,eACEjB,IAAA,SAAMgB,SAAS,CAAC,0BAA0B,CAAAC,QAAA,CAAC,WAAS,CAAM,CAAC,4CAC1C,cAAAjB,IAAA,SAAMgB,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAAC,mBAAiB,CAAM,CAAC,CAAC,GAAG,CAAC,+CAClD,cAAAjB,IAAA,SAAMgB,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAAC,gBAAc,CAAM,CAAC,IACrH,EAAG,CAAC,cACJf,KAAA,QAAKc,SAAS,CAAC,8DAA8D,CAAAC,QAAA,eAC3EjB,IAAA,MAAGgB,SAAS,CAAC,qCAAqC,CAAAC,QAAA,CAAC,kBAAgB,CAAG,CAAC,cACvEjB,IAAA,MAAGgB,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,2CAA+B,CAAG,CAAC,cACxEjB,IAAA,MAAGgB,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,2CAA+B,CAAG,CAAC,cACxEjB,IAAA,MAAGgB,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAC,yCAAkC,CAAG,CAAC,EACpF,CAAC,cACNf,KAAA,QAAKc,SAAS,CAAC,wDAAwD,CAAAC,QAAA,eACrEjB,IAAA,MAAGgB,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,qBAAmB,CAAG,CAAC,cACvEjB,IAAA,MAAGgB,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,oCAA6B,CAAG,CAAC,cACtEjB,IAAA,MAAGgB,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,oCAA6B,CAAG,CAAC,cACtEjB,IAAA,MAAGgB,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAAC,uCAA2B,CAAG,CAAC,EAC1E,CAAC,EACH,CAAC,cAENf,KAAA,QAAAe,QAAA,eACEjB,IAAA,OAAIgB,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAC,gCAA8B,CAAI,CAAC,cACrFjB,IAAA,QAAKgB,SAAS,CAAC,sHAAsH,CAAAC,QAAA,yvBA2BhI,CAAC,EACH,CAAC,EACH,CAAC,EACG,CAAC,EACF,CAAC,cAGbjB,IAAA,CAACnB,MAAM,CAAC2D,GAAG,CAAAC,aAAA,CAAAA,aAAA,IAAKtC,MAAM,MAAEK,UAAU,CAAE,CAAEmC,KAAK,CAAE,GAAI,CAAE,CAAA1B,QAAA,cACjDf,KAAA,CAACpB,SAAS,EAACkC,SAAS,CAAC,KAAK,CAAAC,QAAA,eACxBjB,IAAA,CAACU,YAAY,EACXE,IAAI,CAAEd,QAAS,CACfgB,KAAK,CAAC,+BAA+B,CACrCC,QAAQ,CAAC,uDAAuD,CACjE,CAAC,cAEFf,IAAA,QAAKgB,SAAS,CAAC,WAAW,CAAAC,QAAA,CACvB,CACC,CAAEsC,IAAI,CAAE,GAAG,CAAE4B,KAAK,CAAE,iBAAiB,CAAE1B,MAAM,CAAE,wDAAwD,CAAEjC,KAAK,CAAE,QAAS,CAAC,CAC1H,CAAE+B,IAAI,CAAE,GAAG,CAAE4B,KAAK,CAAE,+BAA+B,CAAE1B,MAAM,CAAE,oEAAoE,CAAEjC,KAAK,CAAE,MAAO,CAAC,CAClJ,CAAE+B,IAAI,CAAE,GAAG,CAAE4B,KAAK,CAAE,sBAAsB,CAAE1B,MAAM,CAAE,0EAA0E,CAAEjC,KAAK,CAAE,OAAQ,CAAC,CAChJ,CAAE+B,IAAI,CAAE,GAAG,CAAE4B,KAAK,CAAE,iCAAiC,CAAE1B,MAAM,CAAE,6EAA6E,CAAEjC,KAAK,CAAE,OAAQ,CAAC,CAC9J,CAAE+B,IAAI,CAAE,GAAG,CAAE4B,KAAK,CAAE,yBAAyB,CAAE1B,MAAM,CAAE,mEAAmE,CAAEjC,KAAK,CAAE,QAAS,CAAC,CAC7I,CAAE+B,IAAI,CAAE,GAAG,CAAE4B,KAAK,CAAE,4BAA4B,CAAE1B,MAAM,CAAE,+EAA+E,CAAEjC,KAAK,CAAE,MAAO,CAAC,CAC1J,CAAE+B,IAAI,CAAE,GAAG,CAAE4B,KAAK,CAAE,0BAA0B,CAAE1B,MAAM,CAAE,2FAA2F,CAAEjC,KAAK,CAAE,MAAO,CAAC,CACpK,CAAE+B,IAAI,CAAE,GAAG,CAAE4B,KAAK,CAAE,2BAA2B,CAAE1B,MAAM,CAAE,6EAA6E,CAAEjC,KAAK,CAAE,OAAQ,CAAC,CACxJ,CAAE+B,IAAI,CAAE,GAAG,CAAE4B,KAAK,CAAE,gCAAgC,CAAE1B,MAAM,CAAE,6EAA6E,CAAEjC,KAAK,CAAE,OAAQ,CAAC,CAC7J,CAAE+B,IAAI,CAAE,IAAI,CAAE4B,KAAK,CAAE,yBAAyB,CAAE1B,MAAM,CAAE,2EAA2E,CAAEjC,KAAK,CAAE,QAAS,CAAC,CACvJ,CAACoB,GAAG,CAACwC,KAAA,EAAoC,IAAnC,CAAE7B,IAAI,CAAE4B,KAAK,CAAE1B,MAAM,CAAEjC,KAAM,CAAC,CAAA4D,KAAA,CACnC,KAAM,CAAA3D,QAAQ,CAAG,CACfC,MAAM,CAAE,iDAAiD,CACzDC,IAAI,CAAE,iDAAiD,CACvDC,KAAK,CAAE,0DAA0D,CACjEC,KAAK,CAAE,oDAAoD,CAC3DC,IAAI,CAAE,iDAAiD,CACvDC,MAAM,CAAE,uDACV,CAAC,CACD,mBACE7B,KAAA,QAAgBc,SAAS,CAAC,sFAAsF,CAAAC,QAAA,eAC9GjB,IAAA,SAAMgB,SAAS,mGAAAiB,MAAA,CAAoGR,QAAQ,CAACD,KAAK,CAAC,CAAG,CAAAP,QAAA,CAClIsC,IAAI,CACD,CAAC,cACPrD,KAAA,QAAAe,QAAA,eACEjB,IAAA,MAAGgB,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAEkE,KAAK,CAAI,CAAC,cAC3DnF,IAAA,MAAGgB,SAAS,CAAC,qCAAqC,CAAAC,QAAA,CAAEwC,MAAM,CAAI,CAAC,EAC5D,CAAC,GAPEF,IAQL,CAAC,CAEV,CAAC,CAAC,CACC,CAAC,EACG,CAAC,EACF,CAAC,cAGbvD,IAAA,CAACnB,MAAM,CAAC2D,GAAG,CAAAC,aAAA,CAAAA,aAAA,IAAKtC,MAAM,MAAEK,UAAU,CAAE,CAAEmC,KAAK,CAAE,IAAK,CAAE,CAAA1B,QAAA,cAClDf,KAAA,CAACpB,SAAS,EAACkC,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eACpCf,KAAA,MAAGc,SAAS,CAAC,4DAA4D,CAAAC,QAAA,EAAC,iCACzC,cAAAjB,IAAA,SAAMgB,SAAS,CAAC,0BAA0B,CAAAC,QAAA,CAAC,kBAAgB,CAAM,CAAC,mEAC/C,CAAC,GAAG,cACtDjB,IAAA,SAAMgB,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAC,kBAAgB,CAAM,CAAC,OAAI,CAAC,GAAG,cAC7EjB,IAAA,SAAMgB,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAAC,mBAAiB,CAAM,CAAC,MAAG,CAAC,GAAG,cAChFjB,IAAA,SAAMgB,SAAS,CAAC,8BAA8B,CAAAC,QAAA,CAAC,uBAAqB,CAAM,CAAC,OAAI,CAAC,GAAG,cACnFjB,IAAA,SAAMgB,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAC,mBAAiB,CAAM,CAAC,IACxE,EAAG,CAAC,cACJjB,IAAA,QAAKgB,SAAS,CAAC,+BAA+B,CAAAC,QAAA,CAAC,6DAE/C,CAAK,CAAC,EACG,CAAC,EACF,CAAC,EACV,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}