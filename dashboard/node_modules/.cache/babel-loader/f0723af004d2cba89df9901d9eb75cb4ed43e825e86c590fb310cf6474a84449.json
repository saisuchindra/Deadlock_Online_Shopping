{"ast":null,"code":"import React,{useState,useEffect,useRef,useCallback}from'react';import{motion,AnimatePresence}from'framer-motion';import GlassCard from'./GlassCard';import{Play,Pause,SkipForward,SkipBack,RotateCcw,FastForward}from'lucide-react';/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ SIMULATION STEPS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const STEPS=[{id:0,title:'Program Start ‚Äî OS Creates Process',osAction:'fork() + exec() ‚Üí kernel creates process with PCB',description:'The user runs the compiled binary. The OS creates a new process, allocates a Process Control Block (PCB), and maps the executable into virtual memory (Text, Data, BSS, Heap, Stack segments). Execution begins at main().',threads:[{id:'main',label:'Main Thread',state:'running',holding:[],waiting:null}],resources:[{id:'R0',label:'Cart_Lock',owner:null,queue:[]},{id:'R1',label:'Payment_GW',owner:null,queue:[]}],arrows:[],highlight:'main',codeSnippet:\"int main() {\\n    init_resources();  // \\u2190 OS: Process running main()\\n    ...\\n}\"},{id:1,title:'init_resources() ‚Äî Initialize Mutexes',osAction:'pthread_mutex_init() √ó N ‚Üí kernel creates futex objects',description:'main() calls init_resources(). The OS kernel allocates futex (fast userspace mutex) objects for each resource. These are kernel-level synchronization primitives that threads will compete for.',threads:[{id:'main',label:'Main Thread',state:'running',holding:[],waiting:null}],resources:[{id:'R0',label:'Cart_Lock',owner:null,queue:[],justCreated:true},{id:'R1',label:'Payment_GW',owner:null,queue:[],justCreated:true}],arrows:[],highlight:'resources',codeSnippet:\"void init_resources() {\\n    for(int i = 0; i < NUM_RESOURCES; i++) {\\n        pthread_mutex_init(&resource_locks[i], NULL);\\n        //  \\u2191 OS: kernel creates futex object\\n    }\\n}\"},{id:2,title:'pthread_create() ‚Äî Spawn Detection Thread',osAction:'OS allocates kernel thread + stack for detector',description:'main() calls pthread_create() for the detection thread. The OS allocates a new kernel-level thread with its own stack (typically 8MB). The scheduler adds it to the READY queue. It starts running detection_thread() in the background.',threads:[{id:'main',label:'Main Thread',state:'running',holding:[],waiting:null},{id:'detector',label:'Detector Thread',state:'ready',holding:[],waiting:null}],resources:[{id:'R0',label:'Cart_Lock',owner:null,queue:[]},{id:'R1',label:'Payment_GW',owner:null,queue:[]}],arrows:[],highlight:'detector',codeSnippet:\"pthread_t detector;\\npthread_create(&detector, NULL,\\n               detection_thread, NULL);\\n// OS: new kernel thread created \\u2192 READY queue\"},{id:3,title:'pthread_create() √ó 2 ‚Äî Spawn Customer Threads',osAction:'OS creates 2 more kernel threads for Customer 0 & 1',description:'run_prevention() calls pthread_create() for each customer. The OS creates two more kernel threads. Each runs process_order() with its customer ID. All threads are now managed by the OS scheduler.',threads:[{id:'main',label:'Main Thread',state:'waiting',holding:[],waiting:'join'},{id:'detector',label:'Detector Thread',state:'sleeping',holding:[],waiting:null},{id:'C0',label:'Customer 0 (Even)',state:'ready',holding:[],waiting:null},{id:'C1',label:'Customer 1 (Odd)',state:'ready',holding:[],waiting:null}],resources:[{id:'R0',label:'Cart_Lock',owner:null,queue:[]},{id:'R1',label:'Payment_GW',owner:null,queue:[]}],arrows:[],highlight:'customers',codeSnippet:\"void run_prevention() {\\n    for(int i=0; i<NUM_CUSTOMERS; i++) {\\n        pthread_create(&threads[i], NULL,\\n                       process_order, &ids[i]);\\n        // OS: thread i \\u2192 READY queue\\n    }\\n    // main thread now calls pthread_join()\\n}\"},{id:4,title:'Customer 0 ‚Äî Acquires R0 (Cart_Lock)',osAction:'pthread_mutex_trylock(R0) ‚Üí success! OS grants lock',description:'The OS scheduler picks Customer 0. Being an even customer, it first tries to lock R0 (Cart_Lock). Since R0 is free, pthread_mutex_trylock() succeeds immediately. The OS marks the mutex as owned by C0.',threads:[{id:'main',label:'Main Thread',state:'waiting',holding:[],waiting:'join'},{id:'detector',label:'Detector Thread',state:'sleeping',holding:[],waiting:null},{id:'C0',label:'Customer 0 (Even)',state:'running',holding:['R0'],waiting:null},{id:'C1',label:'Customer 1 (Odd)',state:'ready',holding:[],waiting:null}],resources:[{id:'R0',label:'Cart_Lock',owner:'C0',queue:[]},{id:'R1',label:'Payment_GW',owner:null,queue:[]}],arrows:[{from:'R0',to:'C0',type:'holds',cycle:false}],highlight:'C0',codeSnippet:\"// Customer 0 (even):\\nrequest1[0] = 1;  // Want R0\\nrequest_resources(0, request1);\\n// \\u2192 pthread_mutex_trylock(R0) == 0  \\u2713 SUCCESS\\n// \\u2192 resource_owner[0] = 0;  // C0 owns R0\"},{id:5,title:'Customer 1 ‚Äî Acquires R1 (Payment_GW)',osAction:'pthread_mutex_trylock(R1) ‚Üí success! OS grants lock',description:'OS context-switches to Customer 1. Being an odd customer, it first tries R1 (Payment_GW). R1 is free, so trylock succeeds. Now C0 holds R0 and C1 holds R1.',threads:[{id:'main',label:'Main Thread',state:'waiting',holding:[],waiting:'join'},{id:'detector',label:'Detector Thread',state:'sleeping',holding:[],waiting:null},{id:'C0',label:'Customer 0 (Even)',state:'sleeping',holding:['R0'],waiting:null},{id:'C1',label:'Customer 1 (Odd)',state:'running',holding:['R1'],waiting:null}],resources:[{id:'R0',label:'Cart_Lock',owner:'C0',queue:[]},{id:'R1',label:'Payment_GW',owner:'C1',queue:[]}],arrows:[{from:'R0',to:'C0',type:'holds',cycle:false},{from:'R1',to:'C1',type:'holds',cycle:false}],highlight:'C1',codeSnippet:\"// Customer 1 (odd):\\nrequest1[1] = 1;  // Want R1\\nrequest_resources(1, request1);\\n// \\u2192 pthread_mutex_trylock(R1) == 0  \\u2713 SUCCESS\\n// \\u2192 resource_owner[1] = 1;  // C1 owns R1\"},{id:6,title:'Both Threads call sleep(1) ‚Äî Voluntary CPU Yield',osAction:'sleep() ‚Üí OS moves both threads to SLEEPING state',description:'Both customers call sleep(1) after their first lock. The OS moves them from RUNNING to SLEEPING state and sets a timer interrupt. The CPU is free to run other threads (like the detector). After 1 second, the timer interrupt fires and the OS moves them back to READY.',threads:[{id:'main',label:'Main Thread',state:'waiting',holding:[],waiting:'join'},{id:'detector',label:'Detector Thread',state:'sleeping',holding:[],waiting:null},{id:'C0',label:'Customer 0 (Even)',state:'sleeping',holding:['R0'],waiting:null},{id:'C1',label:'Customer 1 (Odd)',state:'sleeping',holding:['R1'],waiting:null}],resources:[{id:'R0',label:'Cart_Lock',owner:'C0',queue:[]},{id:'R1',label:'Payment_GW',owner:'C1',queue:[]}],arrows:[{from:'R0',to:'C0',type:'holds',cycle:false},{from:'R1',to:'C1',type:'holds',cycle:false}],highlight:'sleep',codeSnippet:\"// Both threads:\\nsleep(1);\\n// OS: thread \\u2192 SLEEPING state\\n// OS: set timer interrupt for 1 second\\n// OS: context-switch to another READY thread\\n// ... 1 second later ...\\n// OS: timer interrupt \\u2192 thread \\u2192 READY queue\"},{id:7,title:'Customer 0 Tries R1 ‚Äî BLOCKED!',osAction:'pthread_mutex_lock(R1) ‚Üí R1 held by C1 ‚Üí OS BLOCKS C0',description:'sleep(1) expires. Customer 0 now tries to acquire R1 (Payment_GW). But R1 is held by Customer 1! pthread_mutex_trylock fails, so C0 falls through to pthread_mutex_lock() which is BLOCKING. The OS suspends C0 and puts it in R1\\'s kernel wait queue.',threads:[{id:'main',label:'Main Thread',state:'waiting',holding:[],waiting:'join'},{id:'detector',label:'Detector Thread',state:'sleeping',holding:[],waiting:null},{id:'C0',label:'Customer 0 (Even)',state:'blocked',holding:['R0'],waiting:'R1'},{id:'C1',label:'Customer 1 (Odd)',state:'ready',holding:['R1'],waiting:null}],resources:[{id:'R0',label:'Cart_Lock',owner:'C0',queue:[]},{id:'R1',label:'Payment_GW',owner:'C1',queue:['C0']}],arrows:[{from:'R0',to:'C0',type:'holds',cycle:false},{from:'R1',to:'C1',type:'holds',cycle:false},{from:'C0',to:'R1',type:'waits',cycle:false}],highlight:'C0',codeSnippet:\"// Customer 0 tries R1:\\nif(pthread_mutex_trylock(&resource_locks[1]) == 0) {\\n    // FAILS \\u2014 R1 is held by C1\\n} else {\\n    wait_for[0][1] = 1;  // C0 waits for C1\\n    pthread_mutex_lock(&resource_locks[1]);\\n    // \\u26A0 OS: C0 \\u2192 BLOCKED, added to R1's wait queue\\n}\"},{id:8,title:'‚ö† Customer 1 Tries R0 ‚Äî BLOCKED! ‚Üí DEADLOCK!',osAction:'pthread_mutex_lock(R0) ‚Üí R0 held by C0 ‚Üí OS BLOCKS C1 ‚Üí CIRCULAR WAIT!',description:'Customer 1 now tries to acquire R0 (Cart_Lock). But R0 is held by Customer 0! The OS blocks C1 and adds it to R0\\'s wait queue. NOW: C0 waits for R1 (held by C1), C1 waits for R0 (held by C0). This is a CIRCULAR WAIT ‚Äî DEADLOCK! Both threads are permanently stuck in the kernel wait queue.',threads:[{id:'main',label:'Main Thread',state:'waiting',holding:[],waiting:'join'},{id:'detector',label:'Detector Thread',state:'sleeping',holding:[],waiting:null},{id:'C0',label:'Customer 0 (Even)',state:'deadlocked',holding:['R0'],waiting:'R1'},{id:'C1',label:'Customer 1 (Odd)',state:'deadlocked',holding:['R1'],waiting:'R0'}],resources:[{id:'R0',label:'Cart_Lock',owner:'C0',queue:['C1']},{id:'R1',label:'Payment_GW',owner:'C1',queue:['C0']}],arrows:[{from:'R0',to:'C0',type:'holds',cycle:true},{from:'R1',to:'C1',type:'holds',cycle:true},{from:'C0',to:'R1',type:'waits',cycle:true},{from:'C1',to:'R0',type:'waits',cycle:true}],highlight:'deadlock',codeSnippet:\"// Customer 1 tries R0:\\nwait_for[1][0] = 1;  // C1 waits for C0\\npthread_mutex_lock(&resource_locks[0]);\\n// \\u26A0 OS: C1 \\u2192 BLOCKED, added to R0's wait queue\\n//\\n// \\uD83D\\uDC80 DEADLOCK: C0\\u2192R1\\u2192C1\\u2192R0\\u2192C0 (circular wait!)\\n// Both threads PERMANENTLY stuck in kernel\"},{id:9,title:'üîç Detection Thread Wakes Up ‚Äî sleep(2) Expires',osAction:'Timer interrupt ‚Üí OS wakes detector thread ‚Üí READY ‚Üí RUNNING',description:'The detection thread was sleeping for 2 seconds. The OS timer interrupt fires, moving the detector from SLEEPING to READY. The scheduler picks it up since C0 and C1 are both blocked. The detector starts running DFS cycle detection on the wait_for[][] matrix.',threads:[{id:'main',label:'Main Thread',state:'waiting',holding:[],waiting:'join'},{id:'detector',label:'Detector Thread',state:'running',holding:[],waiting:null},{id:'C0',label:'Customer 0 (Even)',state:'deadlocked',holding:['R0'],waiting:'R1'},{id:'C1',label:'Customer 1 (Odd)',state:'deadlocked',holding:['R1'],waiting:'R0'}],resources:[{id:'R0',label:'Cart_Lock',owner:'C0',queue:['C1']},{id:'R1',label:'Payment_GW',owner:'C1',queue:['C0']}],arrows:[{from:'R0',to:'C0',type:'holds',cycle:true},{from:'R1',to:'C1',type:'holds',cycle:true},{from:'C0',to:'R1',type:'waits',cycle:true},{from:'C1',to:'R0',type:'waits',cycle:true}],highlight:'detector',codeSnippet:\"void* detection_thread(void* arg) {\\n    while(1) {\\n        sleep(2);  // \\u2190 Timer interrupt wakes this thread\\n        // Run DFS on wait_for[][] adjacency matrix\\n        for(int i = 0; i < NUM_CUSTOMERS; i++) {\\n            if(!visited[i] && dfs_cycle(i)) {\\n                printf(\\\"\\uD83D\\uDD25 Deadlock Detected!\\\\n\\\");\\n                recover_deadlock();\\n            }\\n        }\\n    }\\n}\"},{id:10,title:'üî• DFS Detects Cycle! ‚Üí Deadlock Confirmed',osAction:'DFS traversal: C0 ‚Üí C1 ‚Üí C0 (back edge = cycle found!)',description:'The detector runs DFS on the wait_for[][] matrix. Starting from C0: C0 waits for C1 (wait_for[0][1] = 1), C1 waits for C0 (wait_for[1][0] = 1). C0 is already in the recursion stack ‚Äî BACK EDGE detected! This confirms a cycle = DEADLOCK.',threads:[{id:'main',label:'Main Thread',state:'waiting',holding:[],waiting:'join'},{id:'detector',label:'Detector Thread',state:'running',holding:[],waiting:null},{id:'C0',label:'Customer 0 (Even)',state:'deadlocked',holding:['R0'],waiting:'R1'},{id:'C1',label:'Customer 1 (Odd)',state:'deadlocked',holding:['R1'],waiting:'R0'}],resources:[{id:'R0',label:'Cart_Lock',owner:'C0',queue:['C1']},{id:'R1',label:'Payment_GW',owner:'C1',queue:['C0']}],arrows:[{from:'R0',to:'C0',type:'holds',cycle:true},{from:'R1',to:'C1',type:'holds',cycle:true},{from:'C0',to:'R1',type:'waits',cycle:true},{from:'C1',to:'R0',type:'waits',cycle:true}],highlight:'cycle',codeSnippet:\"int dfs_cycle(int node) {\\n    visited[node] = 1;\\n    recursion_stack[node] = 1;\\n    for(int i = 0; i < NUM_CUSTOMERS; i++) {\\n        if(wait_for[node][i]) {\\n            if(recursion_stack[i])  // \\u2190 BACK EDGE!\\n                return 1;  // CYCLE FOUND = DEADLOCK\\n            if(!visited[i] && dfs_cycle(i))\\n                return 1;\\n        }\\n    }\\n    recursion_stack[node] = 0;\\n    return 0;\\n}\"},{id:11,title:'üõ† Recovery ‚Äî Force-Unlock Victim\\'s Mutexes',osAction:'pthread_mutex_unlock(R0) ‚Üí OS wakes C1 from R0 wait queue',description:'The detector calls recover_deadlock() with victim = C0 (lowest ID). It force-unlocks all mutexes held by C0. When pthread_mutex_unlock(R0) is called, the OS kernel checks R0\\'s wait queue, finds C1 waiting there, and wakes C1 up (BLOCKED ‚Üí READY). The circular wait is broken!',threads:[{id:'main',label:'Main Thread',state:'waiting',holding:[],waiting:'join'},{id:'detector',label:'Detector Thread',state:'running',holding:[],waiting:null},{id:'C0',label:'Customer 0 (Even)',state:'terminated',holding:[],waiting:null},{id:'C1',label:'Customer 1 (Odd)',state:'ready',holding:['R1'],waiting:null}],resources:[{id:'R0',label:'Cart_Lock',owner:null,queue:[]},{id:'R1',label:'Payment_GW',owner:'C1',queue:[]}],arrows:[{from:'R1',to:'C1',type:'holds',cycle:false}],highlight:'recovery',codeSnippet:\"void recover_deadlock() {\\n    int victim = 0;  // Kill C0 (lowest ID)\\n    for(int i = 0; i < NUM_RESOURCES; i++) {\\n        if(resource_owner[i] == victim) {\\n            pthread_mutex_unlock(&resource_locks[i]);\\n            // \\u2191 OS: wake ALL threads in this mutex's\\n            //   wait queue \\u2192 BLOCKED \\u2192 READY\\n            resource_owner[i] = -1;\\n        }\\n    }\\n    // Circular wait is BROKEN!\\n}\"},{id:12,title:'‚úÖ Customer 1 Resumes ‚Äî Acquires R0',osAction:'OS scheduler runs C1 ‚Üí pthread_mutex_lock(R0) returns ‚Üí C1 gets R0',description:'The OS woke C1 from the wait queue. C1\\'s blocked pthread_mutex_lock(R0) call finally returns. C1 now holds both R0 and R1, completes its order, and releases both resources. The system is fully recovered.',threads:[{id:'main',label:'Main Thread',state:'waiting',holding:[],waiting:'join'},{id:'detector',label:'Detector Thread',state:'sleeping',holding:[],waiting:null},{id:'C0',label:'Customer 0 (Even)',state:'terminated',holding:[],waiting:null},{id:'C1',label:'Customer 1 (Odd)',state:'running',holding:['R0','R1'],waiting:null}],resources:[{id:'R0',label:'Cart_Lock',owner:'C1',queue:[]},{id:'R1',label:'Payment_GW',owner:'C1',queue:[]}],arrows:[{from:'R0',to:'C1',type:'holds',cycle:false},{from:'R1',to:'C1',type:'holds',cycle:false}],highlight:'C1',codeSnippet:\"// C1's blocked lock call returns:\\npthread_mutex_lock(&resource_locks[0]);  // \\u2190 RETURNS!\\nresource_owner[0] = 1;  // C1 now owns R0 too\\n\\n// C1 finishes, releases everything:\\nrelease_resources(1, request1);\\nrelease_resources(1, request2);\\nprintf(\\\"Customer 1 finished.\\\\n\\\");\"},{id:13,title:'üèÅ All Threads Exit ‚Äî OS Reclaims Process',osAction:'pthread_join() returns ‚Üí main() exits ‚Üí OS frees all resources',description:'Customer 1 finishes and exits. pthread_join() in main() returns. The main thread exits, and the OS reclaims all process resources: virtual memory pages, file descriptors, kernel thread stacks, mutex objects, and the PCB. The process is fully terminated.',threads:[{id:'main',label:'Main Thread',state:'terminated',holding:[],waiting:null},{id:'detector',label:'Detector Thread',state:'terminated',holding:[],waiting:null},{id:'C0',label:'Customer 0 (Even)',state:'terminated',holding:[],waiting:null},{id:'C1',label:'Customer 1 (Odd)',state:'terminated',holding:[],waiting:null}],resources:[{id:'R0',label:'Cart_Lock',owner:null,queue:[]},{id:'R1',label:'Payment_GW',owner:null,queue:[]}],arrows:[],highlight:'done',codeSnippet:\"// Back in main():\\npthread_join(detector, NULL);  // \\u2190 returns\\nreturn 0;\\n// OS: reclaim virtual memory, destroy mutexes,\\n//     free thread stacks, delete PCB\\n// Process TERMINATED \\u2014 exit code 0\"}];/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ STATE COLORS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */const STATE_COLORS={running:{bg:'bg-emerald-500/20',border:'border-emerald-500/50',text:'text-emerald-400',label:'RUNNING',dot:'bg-emerald-400'},ready:{bg:'bg-blue-500/20',border:'border-blue-500/50',text:'text-blue-400',label:'READY',dot:'bg-blue-400'},sleeping:{bg:'bg-amber-500/20',border:'border-amber-500/50',text:'text-amber-400',label:'SLEEPING',dot:'bg-amber-400'},waiting:{bg:'bg-orange-500/20',border:'border-orange-500/50',text:'text-orange-400',label:'WAITING',dot:'bg-orange-400'},blocked:{bg:'bg-rose-500/20',border:'border-rose-500/50',text:'text-rose-400',label:'BLOCKED',dot:'bg-rose-400'},deadlocked:{bg:'bg-red-600/25',border:'border-red-500/60',text:'text-red-400',label:'DEADLOCKED',dot:'bg-red-500'},terminated:{bg:'bg-surface-700/30',border:'border-surface-600/40',text:'text-surface-500',label:'TERMINATED',dot:'bg-surface-500'}};/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ THREAD BOX COMPONENT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */function ThreadBox(_ref){let{thread,isHighlighted}=_ref;const sc=STATE_COLORS[thread.state]||STATE_COLORS.ready;return/*#__PURE__*/_jsxs(motion.div,{layout:true,initial:{opacity:0,scale:0.8},animate:{opacity:1,scale:isHighlighted?1.04:1,boxShadow:isHighlighted?'0 0 20px rgba(99,102,241,0.3)':'0 0 0px transparent'},transition:{type:'spring',stiffness:300,damping:25},className:\"rounded-xl border-2 p-3 \".concat(sc.bg,\" \").concat(sc.border,\" \").concat(isHighlighted?'ring-2 ring-accent/40':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-1.5\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-bold text-white truncate\",children:thread.label}),/*#__PURE__*/_jsxs(\"span\",{className:\"relative flex h-2 w-2 flex-shrink-0\",children:[(thread.state==='running'||thread.state==='deadlocked')&&/*#__PURE__*/_jsx(\"span\",{className:\"animate-ping absolute inline-flex h-full w-full rounded-full \".concat(sc.dot,\" opacity-75\")}),/*#__PURE__*/_jsx(\"span\",{className:\"relative inline-flex rounded-full h-2 w-2 \".concat(sc.dot)})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-[10px] font-bold uppercase tracking-wider \".concat(sc.text),children:sc.label}),thread.holding.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-1.5 flex flex-wrap gap-1\",children:thread.holding.map(r=>/*#__PURE__*/_jsxs(\"span\",{className:\"text-[9px] px-1.5 py-0.5 rounded bg-surface-700/60 text-surface-300 font-mono\",children:[\"\\uD83D\\uDD12 \",r]},r))}),thread.waiting&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-1.5\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-[9px] px-1.5 py-0.5 rounded bg-rose-500/15 text-rose-400 font-mono\",children:[\"\\u23F3 waiting: \",thread.waiting]})})]});}/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ RESOURCE BOX COMPONENT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */function ResourceBox(_ref2){let{resource,isHighlighted}=_ref2;const isHeld=resource.owner!==null;return/*#__PURE__*/_jsxs(motion.div,{layout:true,initial:{opacity:0,scale:0.8},animate:{opacity:1,scale:isHighlighted?1.05:1},transition:{type:'spring',stiffness:300,damping:25},className:\"rounded-xl border-2 p-3 text-center \".concat(resource.justCreated?'bg-accent/15 border-accent/50 ring-2 ring-accent/30':isHeld?'bg-amber-500/15 border-amber-500/40':'bg-surface-700/30 border-surface-600/30'),children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-bold text-white mb-0.5\",children:resource.id}),/*#__PURE__*/_jsx(\"div\",{className:\"text-[10px] text-surface-400 mb-1.5\",children:resource.label}),/*#__PURE__*/_jsx(\"div\",{className:\"text-[10px] font-bold \".concat(isHeld?'text-amber-400':'text-emerald-400'),children:isHeld?\"\\uD83D\\uDD12 \".concat(resource.owner):'üîì FREE'}),resource.queue.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1.5 text-[9px] text-rose-400 font-mono\",children:[\"Queue: [\",resource.queue.join(', '),\"]\"]})]});}/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ WAIT-FOR GRAPH SVG ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */function MiniWaitForGraph(_ref3){let{threads,resources,arrows}=_ref3;const customerThreads=threads.filter(t=>t.id.startsWith('C'));if(customerThreads.length===0&&arrows.length===0)return null;// Positions\nconst positions={C0:{x:80,y:50},C1:{x:280,y:50},R0:{x:80,y:150},R1:{x:280,y:150}};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-surface-900/60 rounded-xl border border-surface-700/30 p-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-[10px] font-bold text-surface-400 uppercase tracking-wider mb-2\",children:\"Wait-For Graph\"}),/*#__PURE__*/_jsxs(\"svg\",{viewBox:\"0 0 360 200\",className:\"w-full h-auto\",style:{maxHeight:180},children:[/*#__PURE__*/_jsxs(\"defs\",{children:[/*#__PURE__*/_jsx(\"marker\",{id:\"sim-arrow\",viewBox:\"0 0 10 7\",refX:\"10\",refY:\"3.5\",markerWidth:\"7\",markerHeight:\"5\",orient:\"auto-start-reverse\",children:/*#__PURE__*/_jsx(\"polygon\",{points:\"0 0, 10 3.5, 0 7\",fill:\"#6b7280\"})}),/*#__PURE__*/_jsx(\"marker\",{id:\"sim-arrow-red\",viewBox:\"0 0 10 7\",refX:\"10\",refY:\"3.5\",markerWidth:\"7\",markerHeight:\"5\",orient:\"auto-start-reverse\",children:/*#__PURE__*/_jsx(\"polygon\",{points:\"0 0, 10 3.5, 0 7\",fill:\"#ef4444\"})}),/*#__PURE__*/_jsx(\"marker\",{id:\"sim-arrow-green\",viewBox:\"0 0 10 7\",refX:\"10\",refY:\"3.5\",markerWidth:\"7\",markerHeight:\"5\",orient:\"auto-start-reverse\",children:/*#__PURE__*/_jsx(\"polygon\",{points:\"0 0, 10 3.5, 0 7\",fill:\"#10b981\"})})]}),arrows.map((a,i)=>{const from=positions[a.from];const to=positions[a.to];if(!from||!to)return null;const isCycle=a.cycle;const isHold=a.type==='holds';return/*#__PURE__*/_jsx(motion.line,{x1:from.x,y1:from.y,x2:to.x,y2:to.y,stroke:isCycle?'#ef4444':isHold?'#10b981':'#6b7280',strokeWidth:isCycle?3:2,strokeDasharray:a.type==='waits'?'6 3':'none',markerEnd:isCycle?'url(#sim-arrow-red)':isHold?'url(#sim-arrow-green)':'url(#sim-arrow)',initial:{opacity:0},animate:{opacity:1},transition:{duration:0.4,delay:i*0.1}},\"arr-\".concat(i));}),customerThreads.map(t=>{const pos=positions[t.id];if(!pos)return null;const sc=STATE_COLORS[t.state]||STATE_COLORS.ready;const isDeadlocked=t.state==='deadlocked';const fill=isDeadlocked?'rgba(239,68,68,0.25)':t.state==='terminated'?'rgba(75,85,99,0.2)':'rgba(59,130,246,0.2)';const stroke=isDeadlocked?'#ef4444':t.state==='terminated'?'#6b7280':'#3b82f6';return/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsx(motion.circle,{cx:pos.x,cy:pos.y,r:22,fill:fill,stroke:stroke,strokeWidth:isDeadlocked?3:2,initial:{scale:0},animate:{scale:1},transition:{type:'spring',stiffness:200}}),/*#__PURE__*/_jsx(\"text\",{x:pos.x,y:pos.y+4,textAnchor:\"middle\",fill:\"#e5e7eb\",fontSize:\"11\",fontWeight:\"bold\",fontFamily:\"JetBrains Mono, monospace\",children:t.id})]},t.id);}),resources.map(r=>{const pos=positions[r.id];if(!pos)return null;const isHeld=r.owner!==null;return/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsx(motion.rect,{x:pos.x-22,y:pos.y-22,width:44,height:44,rx:8,fill:isHeld?'rgba(245,158,11,0.2)':'rgba(99,102,241,0.15)',stroke:isHeld?'#f59e0b':'#6366f1',strokeWidth:2,initial:{scale:0},animate:{scale:1},transition:{type:'spring',stiffness:200}}),/*#__PURE__*/_jsx(\"text\",{x:pos.x,y:pos.y+4,textAnchor:\"middle\",fill:\"#e5e7eb\",fontSize:\"11\",fontWeight:\"bold\",fontFamily:\"JetBrains Mono, monospace\",children:r.id})]},r.id);}),/*#__PURE__*/_jsx(\"text\",{x:80,y:85,textAnchor:\"middle\",fill:\"#9ca3af\",fontSize:\"8\",children:\"Customer 0\"}),/*#__PURE__*/_jsx(\"text\",{x:280,y:85,textAnchor:\"middle\",fill:\"#9ca3af\",fontSize:\"8\",children:\"Customer 1\"}),/*#__PURE__*/_jsx(\"text\",{x:80,y:185,textAnchor:\"middle\",fill:\"#9ca3af\",fontSize:\"8\",children:\"Cart_Lock\"}),/*#__PURE__*/_jsx(\"text\",{x:280,y:185,textAnchor:\"middle\",fill:\"#9ca3af\",fontSize:\"8\",children:\"Payment_GW\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-3 mt-2 text-[9px] text-surface-400\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"w-3 h-0.5 bg-emerald-500 inline-block\"}),\" Holds\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"w-3 h-0.5 bg-surface-400 inline-block\",style:{borderTop:'1px dashed #6b7280'}}),\" Waits\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"w-3 h-0.5 bg-red-500 inline-block\"}),\" Cycle\"]})]})]});}/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ MAIN SIMULATION COMPONENT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */export default function OSSimulation(){const[currentStep,setCurrentStep]=useState(0);const[isPlaying,setIsPlaying]=useState(false);const[speed,setSpeed]=useState(3000);const intervalRef=useRef(null);const scrollRef=useRef(null);const step=STEPS[currentStep];const totalSteps=STEPS.length;const goNext=useCallback(()=>{setCurrentStep(prev=>prev<totalSteps-1?prev+1:prev);},[totalSteps]);const goPrev=useCallback(()=>{setCurrentStep(prev=>prev>0?prev-1:prev);},[]);const reset=useCallback(()=>{setCurrentStep(0);setIsPlaying(false);},[]);const togglePlay=useCallback(()=>{setIsPlaying(prev=>!prev);},[]);const toggleSpeed=useCallback(()=>{setSpeed(prev=>prev===3000?1500:prev===1500?800:3000);},[]);// Auto-play\nuseEffect(()=>{if(isPlaying){intervalRef.current=setInterval(()=>{setCurrentStep(prev=>{if(prev>=totalSteps-1){setIsPlaying(false);return prev;}return prev+1;});},speed);}else{if(intervalRef.current)clearInterval(intervalRef.current);}return()=>{if(intervalRef.current)clearInterval(intervalRef.current);};},[isPlaying,speed,totalSteps]);// Scroll timeline into view\nuseEffect(()=>{if(scrollRef.current){const activeEl=scrollRef.current.querySelector(\"[data-step=\\\"\".concat(currentStep,\"\\\"]\"));if(activeEl){activeEl.scrollIntoView({behavior:'smooth',block:'nearest',inline:'center'});}}},[currentStep]);const speedLabel=speed===3000?'1√ó':speed===1500?'2√ó':'3√ó';return/*#__PURE__*/_jsxs(GlassCard,{className:\"p-6\",glow:step.highlight==='deadlock'||step.highlight==='cycle'?'danger':step.highlight==='recovery'?'':'',children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mb-5\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-extrabold text-white flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-accent-light\",children:\"\\u25B6\"}),\" Interactive OS Execution Simulation\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-surface-400 mt-0.5\",children:\"Step through the exact sequence the OS follows when running the deadlock backend\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-surface-400 font-mono tabular-nums bg-surface-800/60 px-2 py-1 rounded-lg border border-surface-700/30\",children:[\"Step \",currentStep+1,\"/\",totalSteps]})})]}),/*#__PURE__*/_jsx(\"div\",{ref:scrollRef,className:\"flex gap-1 overflow-x-auto pb-3 mb-5 custom-scrollbar\",children:STEPS.map((s,i)=>/*#__PURE__*/_jsx(\"button\",{\"data-step\":i,onClick:()=>setCurrentStep(i),className:\"flex-shrink-0 w-8 h-8 rounded-lg text-[10px] font-bold transition-all duration-200 border \".concat(i===currentStep?s.highlight==='deadlock'||s.highlight==='cycle'?'bg-red-500/25 text-red-400 border-red-500/50 ring-2 ring-red-500/30':s.highlight==='recovery'?'bg-purple-500/25 text-purple-400 border-purple-500/50 ring-2 ring-purple-500/30':'bg-accent/20 text-accent-light border-accent/50 ring-2 ring-accent/30':i<currentStep?'bg-surface-700/40 text-surface-300 border-surface-600/30':'bg-surface-800/30 text-surface-500 border-surface-700/20 hover:bg-surface-700/40'),children:i+1},s.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-5\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:goPrev,disabled:currentStep===0,className:\"flex items-center gap-1 px-3 py-2 rounded-xl text-xs font-semibold bg-surface-700/40 text-surface-300 border border-surface-600/30 hover:bg-surface-600/40 hover:text-white transition-all disabled:opacity-30 disabled:cursor-not-allowed\",children:[/*#__PURE__*/_jsx(SkipBack,{size:13}),\"Prev\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:togglePlay,className:\"flex items-center gap-1.5 px-4 py-2 rounded-xl text-xs font-semibold border transition-all \".concat(isPlaying?'bg-amber-500/15 text-amber-400 border-amber-500/40 hover:bg-amber-500/25':'bg-emerald-500/15 text-emerald-400 border-emerald-500/40 hover:bg-emerald-500/25'),children:[isPlaying?/*#__PURE__*/_jsx(Pause,{size:13}):/*#__PURE__*/_jsx(Play,{size:13}),isPlaying?'Pause':'Auto-Play']}),/*#__PURE__*/_jsxs(\"button\",{onClick:goNext,disabled:currentStep===totalSteps-1,className:\"flex items-center gap-1 px-3 py-2 rounded-xl text-xs font-semibold bg-surface-700/40 text-surface-300 border border-surface-600/30 hover:bg-surface-600/40 hover:text-white transition-all disabled:opacity-30 disabled:cursor-not-allowed\",children:[\"Next\",/*#__PURE__*/_jsx(SkipForward,{size:13})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:toggleSpeed,className:\"flex items-center gap-1 px-3 py-2 rounded-xl text-xs font-semibold bg-surface-700/40 text-surface-300 border border-surface-600/30 hover:bg-surface-600/40 hover:text-white transition-all\",children:[/*#__PURE__*/_jsx(FastForward,{size:13}),speedLabel]}),/*#__PURE__*/_jsxs(\"button\",{onClick:reset,className:\"flex items-center gap-1 px-3 py-2 rounded-xl text-xs font-semibold bg-surface-700/40 text-surface-300 border border-surface-600/30 hover:bg-surface-600/40 hover:text-white transition-all\",children:[/*#__PURE__*/_jsx(RotateCcw,{size:13}),\"Reset\"]})]}),/*#__PURE__*/_jsx(AnimatePresence,{mode:\"wait\",children:/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:0.3},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-xl p-4 mb-5 border \".concat(step.highlight==='deadlock'||step.highlight==='cycle'?'bg-red-500/5 border-red-500/30':step.highlight==='recovery'?'bg-purple-500/5 border-purple-500/30':step.highlight==='done'?'bg-emerald-500/5 border-emerald-500/30':'bg-surface-800/40 border-surface-700/30'),children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-base font-bold text-white mb-1\",children:step.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs font-semibold mb-2 px-2 py-1 rounded-lg inline-block \".concat(step.highlight==='deadlock'||step.highlight==='cycle'?'bg-red-500/10 text-red-400':step.highlight==='recovery'?'bg-purple-500/10 text-purple-400':'bg-blue-500/10 text-blue-400'),children:[\"OS: \",step.osAction]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-surface-300 leading-relaxed mt-2\",children:step.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-4 mb-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-1 space-y-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-[10px] font-bold text-surface-400 uppercase tracking-wider mb-2\",children:\"Threads (OS Kernel View)\"}),step.threads.map(t=>/*#__PURE__*/_jsx(ThreadBox,{thread:t,isHighlighted:step.highlight===t.id||step.highlight==='customers'&&t.id.startsWith('C')||step.highlight==='deadlock'&&t.state==='deadlocked'||step.highlight==='cycle'&&t.state==='deadlocked'},t.id))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-1 space-y-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-[10px] font-bold text-surface-400 uppercase tracking-wider mb-2\",children:\"Resources (Mutex State)\"}),step.resources.map(r=>/*#__PURE__*/_jsx(ResourceBox,{resource:r,isHighlighted:step.highlight==='resources'},r.id)),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-3 rounded-xl bg-surface-900/40 border border-surface-700/30\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-[10px] font-bold text-surface-400 uppercase tracking-wider mb-2\",children:\"Thread States\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-1\",children:Object.entries(STATE_COLORS).map(_ref4=>{let[key,val]=_ref4;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1.5\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"w-2 h-2 rounded-full \".concat(val.dot)}),/*#__PURE__*/_jsx(\"span\",{className:\"text-[9px] \".concat(val.text),children:val.label})]},key);})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-[10px] font-bold text-surface-400 uppercase tracking-wider mb-2\",children:\"Resource Allocation Graph\"}),/*#__PURE__*/_jsx(MiniWaitForGraph,{threads:step.threads,resources:step.resources,arrows:step.arrows})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-[10px] font-bold text-surface-400 uppercase tracking-wider mb-2\",children:\"C Code Being Executed\"}),/*#__PURE__*/_jsx(\"pre\",{className:\"text-[11px] text-surface-300 bg-surface-900/70 rounded-xl p-4 overflow-x-auto font-mono border border-surface-700/30 leading-relaxed\",children:step.codeSnippet})]})]},step.id)})]});}","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","motion","AnimatePresence","GlassCard","Play","Pause","SkipForward","SkipBack","RotateCcw","FastForward","jsx","_jsx","jsxs","_jsxs","STEPS","id","title","osAction","description","threads","label","state","holding","waiting","resources","owner","queue","arrows","highlight","codeSnippet","justCreated","from","to","type","cycle","STATE_COLORS","running","bg","border","text","dot","ready","sleeping","blocked","deadlocked","terminated","ThreadBox","_ref","thread","isHighlighted","sc","div","layout","initial","opacity","scale","animate","boxShadow","transition","stiffness","damping","className","concat","children","length","map","r","ResourceBox","_ref2","resource","isHeld","join","MiniWaitForGraph","_ref3","customerThreads","filter","t","startsWith","positions","C0","x","y","C1","R0","R1","viewBox","style","maxHeight","refX","refY","markerWidth","markerHeight","orient","points","fill","a","i","isCycle","isHold","line","x1","y1","x2","y2","stroke","strokeWidth","strokeDasharray","markerEnd","duration","delay","pos","isDeadlocked","circle","cx","cy","textAnchor","fontSize","fontWeight","fontFamily","rect","width","height","rx","borderTop","OSSimulation","currentStep","setCurrentStep","isPlaying","setIsPlaying","speed","setSpeed","intervalRef","scrollRef","step","totalSteps","goNext","prev","goPrev","reset","togglePlay","toggleSpeed","current","setInterval","clearInterval","activeEl","querySelector","scrollIntoView","behavior","block","inline","speedLabel","glow","ref","s","onClick","disabled","size","mode","exit","Object","entries","_ref4","key","val"],"sources":["C:/Users/suchindra/Downloads/Deadlock_Online_Shopping/dashboard/src/components/OSSimulation.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport GlassCard from './GlassCard';\r\nimport {\r\n  Play, Pause, SkipForward, SkipBack, RotateCcw, FastForward,\r\n} from 'lucide-react';\r\n\r\n/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ SIMULATION STEPS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */\r\nconst STEPS = [\r\n  {\r\n    id: 0,\r\n    title: 'Program Start ‚Äî OS Creates Process',\r\n    osAction: 'fork() + exec() ‚Üí kernel creates process with PCB',\r\n    description:\r\n      'The user runs the compiled binary. The OS creates a new process, allocates a Process Control Block (PCB), and maps the executable into virtual memory (Text, Data, BSS, Heap, Stack segments). Execution begins at main().',\r\n    threads: [\r\n      { id: 'main', label: 'Main Thread', state: 'running', holding: [], waiting: null },\r\n    ],\r\n    resources: [\r\n      { id: 'R0', label: 'Cart_Lock', owner: null, queue: [] },\r\n      { id: 'R1', label: 'Payment_GW', owner: null, queue: [] },\r\n    ],\r\n    arrows: [],\r\n    highlight: 'main',\r\n    codeSnippet: `int main() {\\n    init_resources();  // ‚Üê OS: Process running main()\\n    ...\\n}`,\r\n  },\r\n  {\r\n    id: 1,\r\n    title: 'init_resources() ‚Äî Initialize Mutexes',\r\n    osAction: 'pthread_mutex_init() √ó N ‚Üí kernel creates futex objects',\r\n    description:\r\n      'main() calls init_resources(). The OS kernel allocates futex (fast userspace mutex) objects for each resource. These are kernel-level synchronization primitives that threads will compete for.',\r\n    threads: [\r\n      { id: 'main', label: 'Main Thread', state: 'running', holding: [], waiting: null },\r\n    ],\r\n    resources: [\r\n      { id: 'R0', label: 'Cart_Lock', owner: null, queue: [], justCreated: true },\r\n      { id: 'R1', label: 'Payment_GW', owner: null, queue: [], justCreated: true },\r\n    ],\r\n    arrows: [],\r\n    highlight: 'resources',\r\n    codeSnippet: `void init_resources() {\\n    for(int i = 0; i < NUM_RESOURCES; i++) {\\n        pthread_mutex_init(&resource_locks[i], NULL);\\n        //  ‚Üë OS: kernel creates futex object\\n    }\\n}`,\r\n  },\r\n  {\r\n    id: 2,\r\n    title: 'pthread_create() ‚Äî Spawn Detection Thread',\r\n    osAction: 'OS allocates kernel thread + stack for detector',\r\n    description:\r\n      'main() calls pthread_create() for the detection thread. The OS allocates a new kernel-level thread with its own stack (typically 8MB). The scheduler adds it to the READY queue. It starts running detection_thread() in the background.',\r\n    threads: [\r\n      { id: 'main', label: 'Main Thread', state: 'running', holding: [], waiting: null },\r\n      { id: 'detector', label: 'Detector Thread', state: 'ready', holding: [], waiting: null },\r\n    ],\r\n    resources: [\r\n      { id: 'R0', label: 'Cart_Lock', owner: null, queue: [] },\r\n      { id: 'R1', label: 'Payment_GW', owner: null, queue: [] },\r\n    ],\r\n    arrows: [],\r\n    highlight: 'detector',\r\n    codeSnippet: `pthread_t detector;\\npthread_create(&detector, NULL,\\n               detection_thread, NULL);\\n// OS: new kernel thread created ‚Üí READY queue`,\r\n  },\r\n  {\r\n    id: 3,\r\n    title: 'pthread_create() √ó 2 ‚Äî Spawn Customer Threads',\r\n    osAction: 'OS creates 2 more kernel threads for Customer 0 & 1',\r\n    description:\r\n      'run_prevention() calls pthread_create() for each customer. The OS creates two more kernel threads. Each runs process_order() with its customer ID. All threads are now managed by the OS scheduler.',\r\n    threads: [\r\n      { id: 'main', label: 'Main Thread', state: 'waiting', holding: [], waiting: 'join' },\r\n      { id: 'detector', label: 'Detector Thread', state: 'sleeping', holding: [], waiting: null },\r\n      { id: 'C0', label: 'Customer 0 (Even)', state: 'ready', holding: [], waiting: null },\r\n      { id: 'C1', label: 'Customer 1 (Odd)', state: 'ready', holding: [], waiting: null },\r\n    ],\r\n    resources: [\r\n      { id: 'R0', label: 'Cart_Lock', owner: null, queue: [] },\r\n      { id: 'R1', label: 'Payment_GW', owner: null, queue: [] },\r\n    ],\r\n    arrows: [],\r\n    highlight: 'customers',\r\n    codeSnippet: `void run_prevention() {\\n    for(int i=0; i<NUM_CUSTOMERS; i++) {\\n        pthread_create(&threads[i], NULL,\\n                       process_order, &ids[i]);\\n        // OS: thread i ‚Üí READY queue\\n    }\\n    // main thread now calls pthread_join()\\n}`,\r\n  },\r\n  {\r\n    id: 4,\r\n    title: 'Customer 0 ‚Äî Acquires R0 (Cart_Lock)',\r\n    osAction: 'pthread_mutex_trylock(R0) ‚Üí success! OS grants lock',\r\n    description:\r\n      'The OS scheduler picks Customer 0. Being an even customer, it first tries to lock R0 (Cart_Lock). Since R0 is free, pthread_mutex_trylock() succeeds immediately. The OS marks the mutex as owned by C0.',\r\n    threads: [\r\n      { id: 'main', label: 'Main Thread', state: 'waiting', holding: [], waiting: 'join' },\r\n      { id: 'detector', label: 'Detector Thread', state: 'sleeping', holding: [], waiting: null },\r\n      { id: 'C0', label: 'Customer 0 (Even)', state: 'running', holding: ['R0'], waiting: null },\r\n      { id: 'C1', label: 'Customer 1 (Odd)', state: 'ready', holding: [], waiting: null },\r\n    ],\r\n    resources: [\r\n      { id: 'R0', label: 'Cart_Lock', owner: 'C0', queue: [] },\r\n      { id: 'R1', label: 'Payment_GW', owner: null, queue: [] },\r\n    ],\r\n    arrows: [{ from: 'R0', to: 'C0', type: 'holds', cycle: false }],\r\n    highlight: 'C0',\r\n    codeSnippet: `// Customer 0 (even):\\nrequest1[0] = 1;  // Want R0\\nrequest_resources(0, request1);\\n// ‚Üí pthread_mutex_trylock(R0) == 0  ‚úì SUCCESS\\n// ‚Üí resource_owner[0] = 0;  // C0 owns R0`,\r\n  },\r\n  {\r\n    id: 5,\r\n    title: 'Customer 1 ‚Äî Acquires R1 (Payment_GW)',\r\n    osAction: 'pthread_mutex_trylock(R1) ‚Üí success! OS grants lock',\r\n    description:\r\n      'OS context-switches to Customer 1. Being an odd customer, it first tries R1 (Payment_GW). R1 is free, so trylock succeeds. Now C0 holds R0 and C1 holds R1.',\r\n    threads: [\r\n      { id: 'main', label: 'Main Thread', state: 'waiting', holding: [], waiting: 'join' },\r\n      { id: 'detector', label: 'Detector Thread', state: 'sleeping', holding: [], waiting: null },\r\n      { id: 'C0', label: 'Customer 0 (Even)', state: 'sleeping', holding: ['R0'], waiting: null },\r\n      { id: 'C1', label: 'Customer 1 (Odd)', state: 'running', holding: ['R1'], waiting: null },\r\n    ],\r\n    resources: [\r\n      { id: 'R0', label: 'Cart_Lock', owner: 'C0', queue: [] },\r\n      { id: 'R1', label: 'Payment_GW', owner: 'C1', queue: [] },\r\n    ],\r\n    arrows: [\r\n      { from: 'R0', to: 'C0', type: 'holds', cycle: false },\r\n      { from: 'R1', to: 'C1', type: 'holds', cycle: false },\r\n    ],\r\n    highlight: 'C1',\r\n    codeSnippet: `// Customer 1 (odd):\\nrequest1[1] = 1;  // Want R1\\nrequest_resources(1, request1);\\n// ‚Üí pthread_mutex_trylock(R1) == 0  ‚úì SUCCESS\\n// ‚Üí resource_owner[1] = 1;  // C1 owns R1`,\r\n  },\r\n  {\r\n    id: 6,\r\n    title: 'Both Threads call sleep(1) ‚Äî Voluntary CPU Yield',\r\n    osAction: 'sleep() ‚Üí OS moves both threads to SLEEPING state',\r\n    description:\r\n      'Both customers call sleep(1) after their first lock. The OS moves them from RUNNING to SLEEPING state and sets a timer interrupt. The CPU is free to run other threads (like the detector). After 1 second, the timer interrupt fires and the OS moves them back to READY.',\r\n    threads: [\r\n      { id: 'main', label: 'Main Thread', state: 'waiting', holding: [], waiting: 'join' },\r\n      { id: 'detector', label: 'Detector Thread', state: 'sleeping', holding: [], waiting: null },\r\n      { id: 'C0', label: 'Customer 0 (Even)', state: 'sleeping', holding: ['R0'], waiting: null },\r\n      { id: 'C1', label: 'Customer 1 (Odd)', state: 'sleeping', holding: ['R1'], waiting: null },\r\n    ],\r\n    resources: [\r\n      { id: 'R0', label: 'Cart_Lock', owner: 'C0', queue: [] },\r\n      { id: 'R1', label: 'Payment_GW', owner: 'C1', queue: [] },\r\n    ],\r\n    arrows: [\r\n      { from: 'R0', to: 'C0', type: 'holds', cycle: false },\r\n      { from: 'R1', to: 'C1', type: 'holds', cycle: false },\r\n    ],\r\n    highlight: 'sleep',\r\n    codeSnippet: `// Both threads:\\nsleep(1);\\n// OS: thread ‚Üí SLEEPING state\\n// OS: set timer interrupt for 1 second\\n// OS: context-switch to another READY thread\\n// ... 1 second later ...\\n// OS: timer interrupt ‚Üí thread ‚Üí READY queue`,\r\n  },\r\n  {\r\n    id: 7,\r\n    title: 'Customer 0 Tries R1 ‚Äî BLOCKED!',\r\n    osAction: 'pthread_mutex_lock(R1) ‚Üí R1 held by C1 ‚Üí OS BLOCKS C0',\r\n    description:\r\n      'sleep(1) expires. Customer 0 now tries to acquire R1 (Payment_GW). But R1 is held by Customer 1! pthread_mutex_trylock fails, so C0 falls through to pthread_mutex_lock() which is BLOCKING. The OS suspends C0 and puts it in R1\\'s kernel wait queue.',\r\n    threads: [\r\n      { id: 'main', label: 'Main Thread', state: 'waiting', holding: [], waiting: 'join' },\r\n      { id: 'detector', label: 'Detector Thread', state: 'sleeping', holding: [], waiting: null },\r\n      { id: 'C0', label: 'Customer 0 (Even)', state: 'blocked', holding: ['R0'], waiting: 'R1' },\r\n      { id: 'C1', label: 'Customer 1 (Odd)', state: 'ready', holding: ['R1'], waiting: null },\r\n    ],\r\n    resources: [\r\n      { id: 'R0', label: 'Cart_Lock', owner: 'C0', queue: [] },\r\n      { id: 'R1', label: 'Payment_GW', owner: 'C1', queue: ['C0'] },\r\n    ],\r\n    arrows: [\r\n      { from: 'R0', to: 'C0', type: 'holds', cycle: false },\r\n      { from: 'R1', to: 'C1', type: 'holds', cycle: false },\r\n      { from: 'C0', to: 'R1', type: 'waits', cycle: false },\r\n    ],\r\n    highlight: 'C0',\r\n    codeSnippet: `// Customer 0 tries R1:\\nif(pthread_mutex_trylock(&resource_locks[1]) == 0) {\\n    // FAILS ‚Äî R1 is held by C1\\n} else {\\n    wait_for[0][1] = 1;  // C0 waits for C1\\n    pthread_mutex_lock(&resource_locks[1]);\\n    // ‚ö† OS: C0 ‚Üí BLOCKED, added to R1's wait queue\\n}`,\r\n  },\r\n  {\r\n    id: 8,\r\n    title: '‚ö† Customer 1 Tries R0 ‚Äî BLOCKED! ‚Üí DEADLOCK!',\r\n    osAction: 'pthread_mutex_lock(R0) ‚Üí R0 held by C0 ‚Üí OS BLOCKS C1 ‚Üí CIRCULAR WAIT!',\r\n    description:\r\n      'Customer 1 now tries to acquire R0 (Cart_Lock). But R0 is held by Customer 0! The OS blocks C1 and adds it to R0\\'s wait queue. NOW: C0 waits for R1 (held by C1), C1 waits for R0 (held by C0). This is a CIRCULAR WAIT ‚Äî DEADLOCK! Both threads are permanently stuck in the kernel wait queue.',\r\n    threads: [\r\n      { id: 'main', label: 'Main Thread', state: 'waiting', holding: [], waiting: 'join' },\r\n      { id: 'detector', label: 'Detector Thread', state: 'sleeping', holding: [], waiting: null },\r\n      { id: 'C0', label: 'Customer 0 (Even)', state: 'deadlocked', holding: ['R0'], waiting: 'R1' },\r\n      { id: 'C1', label: 'Customer 1 (Odd)', state: 'deadlocked', holding: ['R1'], waiting: 'R0' },\r\n    ],\r\n    resources: [\r\n      { id: 'R0', label: 'Cart_Lock', owner: 'C0', queue: ['C1'] },\r\n      { id: 'R1', label: 'Payment_GW', owner: 'C1', queue: ['C0'] },\r\n    ],\r\n    arrows: [\r\n      { from: 'R0', to: 'C0', type: 'holds', cycle: true },\r\n      { from: 'R1', to: 'C1', type: 'holds', cycle: true },\r\n      { from: 'C0', to: 'R1', type: 'waits', cycle: true },\r\n      { from: 'C1', to: 'R0', type: 'waits', cycle: true },\r\n    ],\r\n    highlight: 'deadlock',\r\n    codeSnippet: `// Customer 1 tries R0:\\nwait_for[1][0] = 1;  // C1 waits for C0\\npthread_mutex_lock(&resource_locks[0]);\\n// ‚ö† OS: C1 ‚Üí BLOCKED, added to R0's wait queue\\n//\\n// üíÄ DEADLOCK: C0‚ÜíR1‚ÜíC1‚ÜíR0‚ÜíC0 (circular wait!)\\n// Both threads PERMANENTLY stuck in kernel`,\r\n  },\r\n  {\r\n    id: 9,\r\n    title: 'üîç Detection Thread Wakes Up ‚Äî sleep(2) Expires',\r\n    osAction: 'Timer interrupt ‚Üí OS wakes detector thread ‚Üí READY ‚Üí RUNNING',\r\n    description:\r\n      'The detection thread was sleeping for 2 seconds. The OS timer interrupt fires, moving the detector from SLEEPING to READY. The scheduler picks it up since C0 and C1 are both blocked. The detector starts running DFS cycle detection on the wait_for[][] matrix.',\r\n    threads: [\r\n      { id: 'main', label: 'Main Thread', state: 'waiting', holding: [], waiting: 'join' },\r\n      { id: 'detector', label: 'Detector Thread', state: 'running', holding: [], waiting: null },\r\n      { id: 'C0', label: 'Customer 0 (Even)', state: 'deadlocked', holding: ['R0'], waiting: 'R1' },\r\n      { id: 'C1', label: 'Customer 1 (Odd)', state: 'deadlocked', holding: ['R1'], waiting: 'R0' },\r\n    ],\r\n    resources: [\r\n      { id: 'R0', label: 'Cart_Lock', owner: 'C0', queue: ['C1'] },\r\n      { id: 'R1', label: 'Payment_GW', owner: 'C1', queue: ['C0'] },\r\n    ],\r\n    arrows: [\r\n      { from: 'R0', to: 'C0', type: 'holds', cycle: true },\r\n      { from: 'R1', to: 'C1', type: 'holds', cycle: true },\r\n      { from: 'C0', to: 'R1', type: 'waits', cycle: true },\r\n      { from: 'C1', to: 'R0', type: 'waits', cycle: true },\r\n    ],\r\n    highlight: 'detector',\r\n    codeSnippet: `void* detection_thread(void* arg) {\\n    while(1) {\\n        sleep(2);  // ‚Üê Timer interrupt wakes this thread\\n        // Run DFS on wait_for[][] adjacency matrix\\n        for(int i = 0; i < NUM_CUSTOMERS; i++) {\\n            if(!visited[i] && dfs_cycle(i)) {\\n                printf(\"üî• Deadlock Detected!\\\\n\");\\n                recover_deadlock();\\n            }\\n        }\\n    }\\n}`,\r\n  },\r\n  {\r\n    id: 10,\r\n    title: 'üî• DFS Detects Cycle! ‚Üí Deadlock Confirmed',\r\n    osAction: 'DFS traversal: C0 ‚Üí C1 ‚Üí C0 (back edge = cycle found!)',\r\n    description:\r\n      'The detector runs DFS on the wait_for[][] matrix. Starting from C0: C0 waits for C1 (wait_for[0][1] = 1), C1 waits for C0 (wait_for[1][0] = 1). C0 is already in the recursion stack ‚Äî BACK EDGE detected! This confirms a cycle = DEADLOCK.',\r\n    threads: [\r\n      { id: 'main', label: 'Main Thread', state: 'waiting', holding: [], waiting: 'join' },\r\n      { id: 'detector', label: 'Detector Thread', state: 'running', holding: [], waiting: null },\r\n      { id: 'C0', label: 'Customer 0 (Even)', state: 'deadlocked', holding: ['R0'], waiting: 'R1' },\r\n      { id: 'C1', label: 'Customer 1 (Odd)', state: 'deadlocked', holding: ['R1'], waiting: 'R0' },\r\n    ],\r\n    resources: [\r\n      { id: 'R0', label: 'Cart_Lock', owner: 'C0', queue: ['C1'] },\r\n      { id: 'R1', label: 'Payment_GW', owner: 'C1', queue: ['C0'] },\r\n    ],\r\n    arrows: [\r\n      { from: 'R0', to: 'C0', type: 'holds', cycle: true },\r\n      { from: 'R1', to: 'C1', type: 'holds', cycle: true },\r\n      { from: 'C0', to: 'R1', type: 'waits', cycle: true },\r\n      { from: 'C1', to: 'R0', type: 'waits', cycle: true },\r\n    ],\r\n    highlight: 'cycle',\r\n    codeSnippet: `int dfs_cycle(int node) {\\n    visited[node] = 1;\\n    recursion_stack[node] = 1;\\n    for(int i = 0; i < NUM_CUSTOMERS; i++) {\\n        if(wait_for[node][i]) {\\n            if(recursion_stack[i])  // ‚Üê BACK EDGE!\\n                return 1;  // CYCLE FOUND = DEADLOCK\\n            if(!visited[i] && dfs_cycle(i))\\n                return 1;\\n        }\\n    }\\n    recursion_stack[node] = 0;\\n    return 0;\\n}`,\r\n  },\r\n  {\r\n    id: 11,\r\n    title: 'üõ† Recovery ‚Äî Force-Unlock Victim\\'s Mutexes',\r\n    osAction: 'pthread_mutex_unlock(R0) ‚Üí OS wakes C1 from R0 wait queue',\r\n    description:\r\n      'The detector calls recover_deadlock() with victim = C0 (lowest ID). It force-unlocks all mutexes held by C0. When pthread_mutex_unlock(R0) is called, the OS kernel checks R0\\'s wait queue, finds C1 waiting there, and wakes C1 up (BLOCKED ‚Üí READY). The circular wait is broken!',\r\n    threads: [\r\n      { id: 'main', label: 'Main Thread', state: 'waiting', holding: [], waiting: 'join' },\r\n      { id: 'detector', label: 'Detector Thread', state: 'running', holding: [], waiting: null },\r\n      { id: 'C0', label: 'Customer 0 (Even)', state: 'terminated', holding: [], waiting: null },\r\n      { id: 'C1', label: 'Customer 1 (Odd)', state: 'ready', holding: ['R1'], waiting: null },\r\n    ],\r\n    resources: [\r\n      { id: 'R0', label: 'Cart_Lock', owner: null, queue: [] },\r\n      { id: 'R1', label: 'Payment_GW', owner: 'C1', queue: [] },\r\n    ],\r\n    arrows: [\r\n      { from: 'R1', to: 'C1', type: 'holds', cycle: false },\r\n    ],\r\n    highlight: 'recovery',\r\n    codeSnippet: `void recover_deadlock() {\\n    int victim = 0;  // Kill C0 (lowest ID)\\n    for(int i = 0; i < NUM_RESOURCES; i++) {\\n        if(resource_owner[i] == victim) {\\n            pthread_mutex_unlock(&resource_locks[i]);\\n            // ‚Üë OS: wake ALL threads in this mutex's\\n            //   wait queue ‚Üí BLOCKED ‚Üí READY\\n            resource_owner[i] = -1;\\n        }\\n    }\\n    // Circular wait is BROKEN!\\n}`,\r\n  },\r\n  {\r\n    id: 12,\r\n    title: '‚úÖ Customer 1 Resumes ‚Äî Acquires R0',\r\n    osAction: 'OS scheduler runs C1 ‚Üí pthread_mutex_lock(R0) returns ‚Üí C1 gets R0',\r\n    description:\r\n      'The OS woke C1 from the wait queue. C1\\'s blocked pthread_mutex_lock(R0) call finally returns. C1 now holds both R0 and R1, completes its order, and releases both resources. The system is fully recovered.',\r\n    threads: [\r\n      { id: 'main', label: 'Main Thread', state: 'waiting', holding: [], waiting: 'join' },\r\n      { id: 'detector', label: 'Detector Thread', state: 'sleeping', holding: [], waiting: null },\r\n      { id: 'C0', label: 'Customer 0 (Even)', state: 'terminated', holding: [], waiting: null },\r\n      { id: 'C1', label: 'Customer 1 (Odd)', state: 'running', holding: ['R0', 'R1'], waiting: null },\r\n    ],\r\n    resources: [\r\n      { id: 'R0', label: 'Cart_Lock', owner: 'C1', queue: [] },\r\n      { id: 'R1', label: 'Payment_GW', owner: 'C1', queue: [] },\r\n    ],\r\n    arrows: [\r\n      { from: 'R0', to: 'C1', type: 'holds', cycle: false },\r\n      { from: 'R1', to: 'C1', type: 'holds', cycle: false },\r\n    ],\r\n    highlight: 'C1',\r\n    codeSnippet: `// C1's blocked lock call returns:\\npthread_mutex_lock(&resource_locks[0]);  // ‚Üê RETURNS!\\nresource_owner[0] = 1;  // C1 now owns R0 too\\n\\n// C1 finishes, releases everything:\\nrelease_resources(1, request1);\\nrelease_resources(1, request2);\\nprintf(\"Customer 1 finished.\\\\n\");`,\r\n  },\r\n  {\r\n    id: 13,\r\n    title: 'üèÅ All Threads Exit ‚Äî OS Reclaims Process',\r\n    osAction: 'pthread_join() returns ‚Üí main() exits ‚Üí OS frees all resources',\r\n    description:\r\n      'Customer 1 finishes and exits. pthread_join() in main() returns. The main thread exits, and the OS reclaims all process resources: virtual memory pages, file descriptors, kernel thread stacks, mutex objects, and the PCB. The process is fully terminated.',\r\n    threads: [\r\n      { id: 'main', label: 'Main Thread', state: 'terminated', holding: [], waiting: null },\r\n      { id: 'detector', label: 'Detector Thread', state: 'terminated', holding: [], waiting: null },\r\n      { id: 'C0', label: 'Customer 0 (Even)', state: 'terminated', holding: [], waiting: null },\r\n      { id: 'C1', label: 'Customer 1 (Odd)', state: 'terminated', holding: [], waiting: null },\r\n    ],\r\n    resources: [\r\n      { id: 'R0', label: 'Cart_Lock', owner: null, queue: [] },\r\n      { id: 'R1', label: 'Payment_GW', owner: null, queue: [] },\r\n    ],\r\n    arrows: [],\r\n    highlight: 'done',\r\n    codeSnippet: `// Back in main():\\npthread_join(detector, NULL);  // ‚Üê returns\\nreturn 0;\\n// OS: reclaim virtual memory, destroy mutexes,\\n//     free thread stacks, delete PCB\\n// Process TERMINATED ‚Äî exit code 0`,\r\n  },\r\n];\r\n\r\n/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ STATE COLORS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */\r\nconst STATE_COLORS = {\r\n  running: { bg: 'bg-emerald-500/20', border: 'border-emerald-500/50', text: 'text-emerald-400', label: 'RUNNING', dot: 'bg-emerald-400' },\r\n  ready: { bg: 'bg-blue-500/20', border: 'border-blue-500/50', text: 'text-blue-400', label: 'READY', dot: 'bg-blue-400' },\r\n  sleeping: { bg: 'bg-amber-500/20', border: 'border-amber-500/50', text: 'text-amber-400', label: 'SLEEPING', dot: 'bg-amber-400' },\r\n  waiting: { bg: 'bg-orange-500/20', border: 'border-orange-500/50', text: 'text-orange-400', label: 'WAITING', dot: 'bg-orange-400' },\r\n  blocked: { bg: 'bg-rose-500/20', border: 'border-rose-500/50', text: 'text-rose-400', label: 'BLOCKED', dot: 'bg-rose-400' },\r\n  deadlocked: { bg: 'bg-red-600/25', border: 'border-red-500/60', text: 'text-red-400', label: 'DEADLOCKED', dot: 'bg-red-500' },\r\n  terminated: { bg: 'bg-surface-700/30', border: 'border-surface-600/40', text: 'text-surface-500', label: 'TERMINATED', dot: 'bg-surface-500' },\r\n};\r\n\r\n/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ THREAD BOX COMPONENT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */\r\nfunction ThreadBox({ thread, isHighlighted }) {\r\n  const sc = STATE_COLORS[thread.state] || STATE_COLORS.ready;\r\n  return (\r\n    <motion.div\r\n      layout\r\n      initial={{ opacity: 0, scale: 0.8 }}\r\n      animate={{\r\n        opacity: 1,\r\n        scale: isHighlighted ? 1.04 : 1,\r\n        boxShadow: isHighlighted ? '0 0 20px rgba(99,102,241,0.3)' : '0 0 0px transparent',\r\n      }}\r\n      transition={{ type: 'spring', stiffness: 300, damping: 25 }}\r\n      className={`rounded-xl border-2 p-3 ${sc.bg} ${sc.border} ${isHighlighted ? 'ring-2 ring-accent/40' : ''}`}\r\n    >\r\n      <div className=\"flex items-center justify-between mb-1.5\">\r\n        <span className=\"text-xs font-bold text-white truncate\">{thread.label}</span>\r\n        <span className=\"relative flex h-2 w-2 flex-shrink-0\">\r\n          {(thread.state === 'running' || thread.state === 'deadlocked') && (\r\n            <span className={`animate-ping absolute inline-flex h-full w-full rounded-full ${sc.dot} opacity-75`} />\r\n          )}\r\n          <span className={`relative inline-flex rounded-full h-2 w-2 ${sc.dot}`} />\r\n        </span>\r\n      </div>\r\n      <div className={`text-[10px] font-bold uppercase tracking-wider ${sc.text}`}>\r\n        {sc.label}\r\n      </div>\r\n      {thread.holding.length > 0 && (\r\n        <div className=\"mt-1.5 flex flex-wrap gap-1\">\r\n          {thread.holding.map((r) => (\r\n            <span key={r} className=\"text-[9px] px-1.5 py-0.5 rounded bg-surface-700/60 text-surface-300 font-mono\">\r\n              üîí {r}\r\n            </span>\r\n          ))}\r\n        </div>\r\n      )}\r\n      {thread.waiting && (\r\n        <div className=\"mt-1.5\">\r\n          <span className=\"text-[9px] px-1.5 py-0.5 rounded bg-rose-500/15 text-rose-400 font-mono\">\r\n            ‚è≥ waiting: {thread.waiting}\r\n          </span>\r\n        </div>\r\n      )}\r\n    </motion.div>\r\n  );\r\n}\r\n\r\n/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ RESOURCE BOX COMPONENT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */\r\nfunction ResourceBox({ resource, isHighlighted }) {\r\n  const isHeld = resource.owner !== null;\r\n  return (\r\n    <motion.div\r\n      layout\r\n      initial={{ opacity: 0, scale: 0.8 }}\r\n      animate={{\r\n        opacity: 1,\r\n        scale: isHighlighted ? 1.05 : 1,\r\n      }}\r\n      transition={{ type: 'spring', stiffness: 300, damping: 25 }}\r\n      className={`rounded-xl border-2 p-3 text-center ${\r\n        resource.justCreated\r\n          ? 'bg-accent/15 border-accent/50 ring-2 ring-accent/30'\r\n          : isHeld\r\n          ? 'bg-amber-500/15 border-amber-500/40'\r\n          : 'bg-surface-700/30 border-surface-600/30'\r\n      }`}\r\n    >\r\n      <div className=\"text-xs font-bold text-white mb-0.5\">{resource.id}</div>\r\n      <div className=\"text-[10px] text-surface-400 mb-1.5\">{resource.label}</div>\r\n      <div className={`text-[10px] font-bold ${isHeld ? 'text-amber-400' : 'text-emerald-400'}`}>\r\n        {isHeld ? `üîí ${resource.owner}` : 'üîì FREE'}\r\n      </div>\r\n      {resource.queue.length > 0 && (\r\n        <div className=\"mt-1.5 text-[9px] text-rose-400 font-mono\">\r\n          Queue: [{resource.queue.join(', ')}]\r\n        </div>\r\n      )}\r\n    </motion.div>\r\n  );\r\n}\r\n\r\n/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ WAIT-FOR GRAPH SVG ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */\r\nfunction MiniWaitForGraph({ threads, resources, arrows }) {\r\n  const customerThreads = threads.filter((t) => t.id.startsWith('C'));\r\n  if (customerThreads.length === 0 && arrows.length === 0) return null;\r\n\r\n  // Positions\r\n  const positions = {\r\n    C0: { x: 80, y: 50 },\r\n    C1: { x: 280, y: 50 },\r\n    R0: { x: 80, y: 150 },\r\n    R1: { x: 280, y: 150 },\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-surface-900/60 rounded-xl border border-surface-700/30 p-3\">\r\n      <div className=\"text-[10px] font-bold text-surface-400 uppercase tracking-wider mb-2\">\r\n        Wait-For Graph\r\n      </div>\r\n      <svg viewBox=\"0 0 360 200\" className=\"w-full h-auto\" style={{ maxHeight: 180 }}>\r\n        <defs>\r\n          <marker id=\"sim-arrow\" viewBox=\"0 0 10 7\" refX=\"10\" refY=\"3.5\" markerWidth=\"7\" markerHeight=\"5\" orient=\"auto-start-reverse\">\r\n            <polygon points=\"0 0, 10 3.5, 0 7\" fill=\"#6b7280\" />\r\n          </marker>\r\n          <marker id=\"sim-arrow-red\" viewBox=\"0 0 10 7\" refX=\"10\" refY=\"3.5\" markerWidth=\"7\" markerHeight=\"5\" orient=\"auto-start-reverse\">\r\n            <polygon points=\"0 0, 10 3.5, 0 7\" fill=\"#ef4444\" />\r\n          </marker>\r\n          <marker id=\"sim-arrow-green\" viewBox=\"0 0 10 7\" refX=\"10\" refY=\"3.5\" markerWidth=\"7\" markerHeight=\"5\" orient=\"auto-start-reverse\">\r\n            <polygon points=\"0 0, 10 3.5, 0 7\" fill=\"#10b981\" />\r\n          </marker>\r\n        </defs>\r\n\r\n        {/* Arrows */}\r\n        {arrows.map((a, i) => {\r\n          const from = positions[a.from];\r\n          const to = positions[a.to];\r\n          if (!from || !to) return null;\r\n          const isCycle = a.cycle;\r\n          const isHold = a.type === 'holds';\r\n          return (\r\n            <motion.line\r\n              key={`arr-${i}`}\r\n              x1={from.x}\r\n              y1={from.y}\r\n              x2={to.x}\r\n              y2={to.y}\r\n              stroke={isCycle ? '#ef4444' : isHold ? '#10b981' : '#6b7280'}\r\n              strokeWidth={isCycle ? 3 : 2}\r\n              strokeDasharray={a.type === 'waits' ? '6 3' : 'none'}\r\n              markerEnd={isCycle ? 'url(#sim-arrow-red)' : isHold ? 'url(#sim-arrow-green)' : 'url(#sim-arrow)'}\r\n              initial={{ opacity: 0 }}\r\n              animate={{ opacity: 1 }}\r\n              transition={{ duration: 0.4, delay: i * 0.1 }}\r\n            />\r\n          );\r\n        })}\r\n\r\n        {/* Customer nodes */}\r\n        {customerThreads.map((t) => {\r\n          const pos = positions[t.id];\r\n          if (!pos) return null;\r\n          const sc = STATE_COLORS[t.state] || STATE_COLORS.ready;\r\n          const isDeadlocked = t.state === 'deadlocked';\r\n          const fill = isDeadlocked ? 'rgba(239,68,68,0.25)' : t.state === 'terminated' ? 'rgba(75,85,99,0.2)' : 'rgba(59,130,246,0.2)';\r\n          const stroke = isDeadlocked ? '#ef4444' : t.state === 'terminated' ? '#6b7280' : '#3b82f6';\r\n          return (\r\n            <g key={t.id}>\r\n              <motion.circle\r\n                cx={pos.x} cy={pos.y} r={22}\r\n                fill={fill} stroke={stroke} strokeWidth={isDeadlocked ? 3 : 2}\r\n                initial={{ scale: 0 }} animate={{ scale: 1 }}\r\n                transition={{ type: 'spring', stiffness: 200 }}\r\n              />\r\n              <text x={pos.x} y={pos.y + 4} textAnchor=\"middle\" fill=\"#e5e7eb\" fontSize=\"11\" fontWeight=\"bold\" fontFamily=\"JetBrains Mono, monospace\">\r\n                {t.id}\r\n              </text>\r\n            </g>\r\n          );\r\n        })}\r\n\r\n        {/* Resource nodes */}\r\n        {resources.map((r) => {\r\n          const pos = positions[r.id];\r\n          if (!pos) return null;\r\n          const isHeld = r.owner !== null;\r\n          return (\r\n            <g key={r.id}>\r\n              <motion.rect\r\n                x={pos.x - 22} y={pos.y - 22} width={44} height={44} rx={8}\r\n                fill={isHeld ? 'rgba(245,158,11,0.2)' : 'rgba(99,102,241,0.15)'}\r\n                stroke={isHeld ? '#f59e0b' : '#6366f1'} strokeWidth={2}\r\n                initial={{ scale: 0 }} animate={{ scale: 1 }}\r\n                transition={{ type: 'spring', stiffness: 200 }}\r\n              />\r\n              <text x={pos.x} y={pos.y + 4} textAnchor=\"middle\" fill=\"#e5e7eb\" fontSize=\"11\" fontWeight=\"bold\" fontFamily=\"JetBrains Mono, monospace\">\r\n                {r.id}\r\n              </text>\r\n            </g>\r\n          );\r\n        })}\r\n\r\n        {/* Labels */}\r\n        <text x={80} y={85} textAnchor=\"middle\" fill=\"#9ca3af\" fontSize=\"8\">Customer 0</text>\r\n        <text x={280} y={85} textAnchor=\"middle\" fill=\"#9ca3af\" fontSize=\"8\">Customer 1</text>\r\n        <text x={80} y={185} textAnchor=\"middle\" fill=\"#9ca3af\" fontSize=\"8\">Cart_Lock</text>\r\n        <text x={280} y={185} textAnchor=\"middle\" fill=\"#9ca3af\" fontSize=\"8\">Payment_GW</text>\r\n      </svg>\r\n\r\n      {/* Legend */}\r\n      <div className=\"flex flex-wrap gap-3 mt-2 text-[9px] text-surface-400\">\r\n        <div className=\"flex items-center gap-1\"><span className=\"w-3 h-0.5 bg-emerald-500 inline-block\" /> Holds</div>\r\n        <div className=\"flex items-center gap-1\"><span className=\"w-3 h-0.5 bg-surface-400 inline-block\" style={{ borderTop: '1px dashed #6b7280' }} /> Waits</div>\r\n        <div className=\"flex items-center gap-1\"><span className=\"w-3 h-0.5 bg-red-500 inline-block\" /> Cycle</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ MAIN SIMULATION COMPONENT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */\r\nexport default function OSSimulation() {\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [speed, setSpeed] = useState(3000);\r\n  const intervalRef = useRef(null);\r\n  const scrollRef = useRef(null);\r\n\r\n  const step = STEPS[currentStep];\r\n  const totalSteps = STEPS.length;\r\n\r\n  const goNext = useCallback(() => {\r\n    setCurrentStep((prev) => (prev < totalSteps - 1 ? prev + 1 : prev));\r\n  }, [totalSteps]);\r\n\r\n  const goPrev = useCallback(() => {\r\n    setCurrentStep((prev) => (prev > 0 ? prev - 1 : prev));\r\n  }, []);\r\n\r\n  const reset = useCallback(() => {\r\n    setCurrentStep(0);\r\n    setIsPlaying(false);\r\n  }, []);\r\n\r\n  const togglePlay = useCallback(() => {\r\n    setIsPlaying((prev) => !prev);\r\n  }, []);\r\n\r\n  const toggleSpeed = useCallback(() => {\r\n    setSpeed((prev) => (prev === 3000 ? 1500 : prev === 1500 ? 800 : 3000));\r\n  }, []);\r\n\r\n  // Auto-play\r\n  useEffect(() => {\r\n    if (isPlaying) {\r\n      intervalRef.current = setInterval(() => {\r\n        setCurrentStep((prev) => {\r\n          if (prev >= totalSteps - 1) {\r\n            setIsPlaying(false);\r\n            return prev;\r\n          }\r\n          return prev + 1;\r\n        });\r\n      }, speed);\r\n    } else {\r\n      if (intervalRef.current) clearInterval(intervalRef.current);\r\n    }\r\n    return () => {\r\n      if (intervalRef.current) clearInterval(intervalRef.current);\r\n    };\r\n  }, [isPlaying, speed, totalSteps]);\r\n\r\n  // Scroll timeline into view\r\n  useEffect(() => {\r\n    if (scrollRef.current) {\r\n      const activeEl = scrollRef.current.querySelector(`[data-step=\"${currentStep}\"]`);\r\n      if (activeEl) {\r\n        activeEl.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });\r\n      }\r\n    }\r\n  }, [currentStep]);\r\n\r\n  const speedLabel = speed === 3000 ? '1√ó' : speed === 1500 ? '2√ó' : '3√ó';\r\n\r\n  return (\r\n    <GlassCard className=\"p-6\" glow={step.highlight === 'deadlock' || step.highlight === 'cycle' ? 'danger' : step.highlight === 'recovery' ? '' : ''}>\r\n      {/* Header */}\r\n      <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mb-5\">\r\n        <div>\r\n          <h2 className=\"text-lg font-extrabold text-white flex items-center gap-2\">\r\n            <span className=\"text-accent-light\">‚ñ∂</span> Interactive OS Execution Simulation\r\n          </h2>\r\n          <p className=\"text-xs text-surface-400 mt-0.5\">\r\n            Step through the exact sequence the OS follows when running the deadlock backend\r\n          </p>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <span className=\"text-xs text-surface-400 font-mono tabular-nums bg-surface-800/60 px-2 py-1 rounded-lg border border-surface-700/30\">\r\n            Step {currentStep + 1}/{totalSteps}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Timeline */}\r\n      <div\r\n        ref={scrollRef}\r\n        className=\"flex gap-1 overflow-x-auto pb-3 mb-5 custom-scrollbar\"\r\n      >\r\n        {STEPS.map((s, i) => (\r\n          <button\r\n            key={s.id}\r\n            data-step={i}\r\n            onClick={() => setCurrentStep(i)}\r\n            className={`flex-shrink-0 w-8 h-8 rounded-lg text-[10px] font-bold transition-all duration-200 border ${\r\n              i === currentStep\r\n                ? s.highlight === 'deadlock' || s.highlight === 'cycle'\r\n                  ? 'bg-red-500/25 text-red-400 border-red-500/50 ring-2 ring-red-500/30'\r\n                  : s.highlight === 'recovery'\r\n                  ? 'bg-purple-500/25 text-purple-400 border-purple-500/50 ring-2 ring-purple-500/30'\r\n                  : 'bg-accent/20 text-accent-light border-accent/50 ring-2 ring-accent/30'\r\n                : i < currentStep\r\n                ? 'bg-surface-700/40 text-surface-300 border-surface-600/30'\r\n                : 'bg-surface-800/30 text-surface-500 border-surface-700/20 hover:bg-surface-700/40'\r\n            }`}\r\n          >\r\n            {i + 1}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Controls */}\r\n      <div className=\"flex items-center gap-2 mb-5\">\r\n        <button\r\n          onClick={goPrev}\r\n          disabled={currentStep === 0}\r\n          className=\"flex items-center gap-1 px-3 py-2 rounded-xl text-xs font-semibold bg-surface-700/40 text-surface-300 border border-surface-600/30 hover:bg-surface-600/40 hover:text-white transition-all disabled:opacity-30 disabled:cursor-not-allowed\"\r\n        >\r\n          <SkipBack size={13} />\r\n          Prev\r\n        </button>\r\n        <button\r\n          onClick={togglePlay}\r\n          className={`flex items-center gap-1.5 px-4 py-2 rounded-xl text-xs font-semibold border transition-all ${\r\n            isPlaying\r\n              ? 'bg-amber-500/15 text-amber-400 border-amber-500/40 hover:bg-amber-500/25'\r\n              : 'bg-emerald-500/15 text-emerald-400 border-emerald-500/40 hover:bg-emerald-500/25'\r\n          }`}\r\n        >\r\n          {isPlaying ? <Pause size={13} /> : <Play size={13} />}\r\n          {isPlaying ? 'Pause' : 'Auto-Play'}\r\n        </button>\r\n        <button\r\n          onClick={goNext}\r\n          disabled={currentStep === totalSteps - 1}\r\n          className=\"flex items-center gap-1 px-3 py-2 rounded-xl text-xs font-semibold bg-surface-700/40 text-surface-300 border border-surface-600/30 hover:bg-surface-600/40 hover:text-white transition-all disabled:opacity-30 disabled:cursor-not-allowed\"\r\n        >\r\n          Next\r\n          <SkipForward size={13} />\r\n        </button>\r\n        <button\r\n          onClick={toggleSpeed}\r\n          className=\"flex items-center gap-1 px-3 py-2 rounded-xl text-xs font-semibold bg-surface-700/40 text-surface-300 border border-surface-600/30 hover:bg-surface-600/40 hover:text-white transition-all\"\r\n        >\r\n          <FastForward size={13} />\r\n          {speedLabel}\r\n        </button>\r\n        <button\r\n          onClick={reset}\r\n          className=\"flex items-center gap-1 px-3 py-2 rounded-xl text-xs font-semibold bg-surface-700/40 text-surface-300 border border-surface-600/30 hover:bg-surface-600/40 hover:text-white transition-all\"\r\n        >\r\n          <RotateCcw size={13} />\r\n          Reset\r\n        </button>\r\n      </div>\r\n\r\n      {/* Step Title + OS Action */}\r\n      <AnimatePresence mode=\"wait\">\r\n        <motion.div\r\n          key={step.id}\r\n          initial={{ opacity: 0, y: 10 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          exit={{ opacity: 0, y: -10 }}\r\n          transition={{ duration: 0.3 }}\r\n        >\r\n          <div className={`rounded-xl p-4 mb-5 border ${\r\n            step.highlight === 'deadlock' || step.highlight === 'cycle'\r\n              ? 'bg-red-500/5 border-red-500/30'\r\n              : step.highlight === 'recovery'\r\n              ? 'bg-purple-500/5 border-purple-500/30'\r\n              : step.highlight === 'done'\r\n              ? 'bg-emerald-500/5 border-emerald-500/30'\r\n              : 'bg-surface-800/40 border-surface-700/30'\r\n          }`}>\r\n            <h3 className=\"text-base font-bold text-white mb-1\">\r\n              {step.title}\r\n            </h3>\r\n            <div className={`text-xs font-semibold mb-2 px-2 py-1 rounded-lg inline-block ${\r\n              step.highlight === 'deadlock' || step.highlight === 'cycle'\r\n                ? 'bg-red-500/10 text-red-400'\r\n                : step.highlight === 'recovery'\r\n                ? 'bg-purple-500/10 text-purple-400'\r\n                : 'bg-blue-500/10 text-blue-400'\r\n            }`}>\r\n              OS: {step.osAction}\r\n            </div>\r\n            <p className=\"text-xs text-surface-300 leading-relaxed mt-2\">\r\n              {step.description}\r\n            </p>\r\n          </div>\r\n\r\n          {/* Visual: Threads + Resources + Graph */}\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4 mb-5\">\r\n            {/* Threads column */}\r\n            <div className=\"lg:col-span-1 space-y-2\">\r\n              <div className=\"text-[10px] font-bold text-surface-400 uppercase tracking-wider mb-2\">\r\n                Threads (OS Kernel View)\r\n              </div>\r\n              {step.threads.map((t) => (\r\n                <ThreadBox\r\n                  key={t.id}\r\n                  thread={t}\r\n                  isHighlighted={\r\n                    step.highlight === t.id ||\r\n                    (step.highlight === 'customers' && t.id.startsWith('C')) ||\r\n                    (step.highlight === 'deadlock' && t.state === 'deadlocked') ||\r\n                    (step.highlight === 'cycle' && t.state === 'deadlocked')\r\n                  }\r\n                />\r\n              ))}\r\n            </div>\r\n\r\n            {/* Resources column */}\r\n            <div className=\"lg:col-span-1 space-y-2\">\r\n              <div className=\"text-[10px] font-bold text-surface-400 uppercase tracking-wider mb-2\">\r\n                Resources (Mutex State)\r\n              </div>\r\n              {step.resources.map((r) => (\r\n                <ResourceBox\r\n                  key={r.id}\r\n                  resource={r}\r\n                  isHighlighted={step.highlight === 'resources'}\r\n                />\r\n              ))}\r\n\r\n              {/* State Legend */}\r\n              <div className=\"mt-4 p-3 rounded-xl bg-surface-900/40 border border-surface-700/30\">\r\n                <div className=\"text-[10px] font-bold text-surface-400 uppercase tracking-wider mb-2\">\r\n                  Thread States\r\n                </div>\r\n                <div className=\"grid grid-cols-2 gap-1\">\r\n                  {Object.entries(STATE_COLORS).map(([key, val]) => (\r\n                    <div key={key} className=\"flex items-center gap-1.5\">\r\n                      <span className={`w-2 h-2 rounded-full ${val.dot}`} />\r\n                      <span className={`text-[9px] ${val.text}`}>{val.label}</span>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Wait-For Graph */}\r\n            <div className=\"lg:col-span-1\">\r\n              <div className=\"text-[10px] font-bold text-surface-400 uppercase tracking-wider mb-2\">\r\n                Resource Allocation Graph\r\n              </div>\r\n              <MiniWaitForGraph\r\n                threads={step.threads}\r\n                resources={step.resources}\r\n                arrows={step.arrows}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Code Snippet */}\r\n          <div>\r\n            <div className=\"text-[10px] font-bold text-surface-400 uppercase tracking-wider mb-2\">\r\n              C Code Being Executed\r\n            </div>\r\n            <pre className=\"text-[11px] text-surface-300 bg-surface-900/70 rounded-xl p-4 overflow-x-auto font-mono border border-surface-700/30 leading-relaxed\">\r\n              {step.codeSnippet}\r\n            </pre>\r\n          </div>\r\n        </motion.div>\r\n      </AnimatePresence>\r\n    </GlassCard>\r\n  );\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,CAAEC,WAAW,KAAQ,OAAO,CACvE,OAASC,MAAM,CAAEC,eAAe,KAAQ,eAAe,CACvD,MAAO,CAAAC,SAAS,KAAM,aAAa,CACnC,OACEC,IAAI,CAAEC,KAAK,CAAEC,WAAW,CAAEC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KACrD,cAAc,CAErB,yDAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBACA,KAAM,CAAAC,KAAK,CAAG,CACZ,CACEC,EAAE,CAAE,CAAC,CACLC,KAAK,CAAE,oCAAoC,CAC3CC,QAAQ,CAAE,mDAAmD,CAC7DC,WAAW,CACT,4NAA4N,CAC9NC,OAAO,CAAE,CACP,CAAEJ,EAAE,CAAE,MAAM,CAAEK,KAAK,CAAE,aAAa,CAAEC,KAAK,CAAE,SAAS,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,IAAK,CAAC,CACnF,CACDC,SAAS,CAAE,CACT,CAAET,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,WAAW,CAAEK,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,EAAG,CAAC,CACxD,CAAEX,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,YAAY,CAAEK,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,EAAG,CAAC,CAC1D,CACDC,MAAM,CAAE,EAAE,CACVC,SAAS,CAAE,MAAM,CACjBC,WAAW,wFACb,CAAC,CACD,CACEd,EAAE,CAAE,CAAC,CACLC,KAAK,CAAE,uCAAuC,CAC9CC,QAAQ,CAAE,yDAAyD,CACnEC,WAAW,CACT,iMAAiM,CACnMC,OAAO,CAAE,CACP,CAAEJ,EAAE,CAAE,MAAM,CAAEK,KAAK,CAAE,aAAa,CAAEC,KAAK,CAAE,SAAS,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,IAAK,CAAC,CACnF,CACDC,SAAS,CAAE,CACT,CAAET,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,WAAW,CAAEK,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,EAAE,CAAEI,WAAW,CAAE,IAAK,CAAC,CAC3E,CAAEf,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,YAAY,CAAEK,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,EAAE,CAAEI,WAAW,CAAE,IAAK,CAAC,CAC7E,CACDH,MAAM,CAAE,EAAE,CACVC,SAAS,CAAE,WAAW,CACtBC,WAAW,6LACb,CAAC,CACD,CACEd,EAAE,CAAE,CAAC,CACLC,KAAK,CAAE,2CAA2C,CAClDC,QAAQ,CAAE,iDAAiD,CAC3DC,WAAW,CACT,0OAA0O,CAC5OC,OAAO,CAAE,CACP,CAAEJ,EAAE,CAAE,MAAM,CAAEK,KAAK,CAAE,aAAa,CAAEC,KAAK,CAAE,SAAS,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,IAAK,CAAC,CAClF,CAAER,EAAE,CAAE,UAAU,CAAEK,KAAK,CAAE,iBAAiB,CAAEC,KAAK,CAAE,OAAO,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,IAAK,CAAC,CACzF,CACDC,SAAS,CAAE,CACT,CAAET,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,WAAW,CAAEK,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,EAAG,CAAC,CACxD,CAAEX,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,YAAY,CAAEK,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,EAAG,CAAC,CAC1D,CACDC,MAAM,CAAE,EAAE,CACVC,SAAS,CAAE,UAAU,CACrBC,WAAW,qJACb,CAAC,CACD,CACEd,EAAE,CAAE,CAAC,CACLC,KAAK,CAAE,+CAA+C,CACtDC,QAAQ,CAAE,qDAAqD,CAC/DC,WAAW,CACT,qMAAqM,CACvMC,OAAO,CAAE,CACP,CAAEJ,EAAE,CAAE,MAAM,CAAEK,KAAK,CAAE,aAAa,CAAEC,KAAK,CAAE,SAAS,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,MAAO,CAAC,CACpF,CAAER,EAAE,CAAE,UAAU,CAAEK,KAAK,CAAE,iBAAiB,CAAEC,KAAK,CAAE,UAAU,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,IAAK,CAAC,CAC3F,CAAER,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,mBAAmB,CAAEC,KAAK,CAAE,OAAO,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,IAAK,CAAC,CACpF,CAAER,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,kBAAkB,CAAEC,KAAK,CAAE,OAAO,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,IAAK,CAAC,CACpF,CACDC,SAAS,CAAE,CACT,CAAET,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,WAAW,CAAEK,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,EAAG,CAAC,CACxD,CAAEX,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,YAAY,CAAEK,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,EAAG,CAAC,CAC1D,CACDC,MAAM,CAAE,EAAE,CACVC,SAAS,CAAE,WAAW,CACtBC,WAAW,mQACb,CAAC,CACD,CACEd,EAAE,CAAE,CAAC,CACLC,KAAK,CAAE,sCAAsC,CAC7CC,QAAQ,CAAE,qDAAqD,CAC/DC,WAAW,CACT,0MAA0M,CAC5MC,OAAO,CAAE,CACP,CAAEJ,EAAE,CAAE,MAAM,CAAEK,KAAK,CAAE,aAAa,CAAEC,KAAK,CAAE,SAAS,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,MAAO,CAAC,CACpF,CAAER,EAAE,CAAE,UAAU,CAAEK,KAAK,CAAE,iBAAiB,CAAEC,KAAK,CAAE,UAAU,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,IAAK,CAAC,CAC3F,CAAER,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,mBAAmB,CAAEC,KAAK,CAAE,SAAS,CAAEC,OAAO,CAAE,CAAC,IAAI,CAAC,CAAEC,OAAO,CAAE,IAAK,CAAC,CAC1F,CAAER,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,kBAAkB,CAAEC,KAAK,CAAE,OAAO,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,IAAK,CAAC,CACpF,CACDC,SAAS,CAAE,CACT,CAAET,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,WAAW,CAAEK,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,EAAG,CAAC,CACxD,CAAEX,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,YAAY,CAAEK,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,EAAG,CAAC,CAC1D,CACDC,MAAM,CAAE,CAAC,CAAEI,IAAI,CAAE,IAAI,CAAEC,EAAE,CAAE,IAAI,CAAEC,IAAI,CAAE,OAAO,CAAEC,KAAK,CAAE,KAAM,CAAC,CAAC,CAC/DN,SAAS,CAAE,IAAI,CACfC,WAAW,kMACb,CAAC,CACD,CACEd,EAAE,CAAE,CAAC,CACLC,KAAK,CAAE,uCAAuC,CAC9CC,QAAQ,CAAE,qDAAqD,CAC/DC,WAAW,CACT,6JAA6J,CAC/JC,OAAO,CAAE,CACP,CAAEJ,EAAE,CAAE,MAAM,CAAEK,KAAK,CAAE,aAAa,CAAEC,KAAK,CAAE,SAAS,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,MAAO,CAAC,CACpF,CAAER,EAAE,CAAE,UAAU,CAAEK,KAAK,CAAE,iBAAiB,CAAEC,KAAK,CAAE,UAAU,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,IAAK,CAAC,CAC3F,CAAER,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,mBAAmB,CAAEC,KAAK,CAAE,UAAU,CAAEC,OAAO,CAAE,CAAC,IAAI,CAAC,CAAEC,OAAO,CAAE,IAAK,CAAC,CAC3F,CAAER,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,kBAAkB,CAAEC,KAAK,CAAE,SAAS,CAAEC,OAAO,CAAE,CAAC,IAAI,CAAC,CAAEC,OAAO,CAAE,IAAK,CAAC,CAC1F,CACDC,SAAS,CAAE,CACT,CAAET,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,WAAW,CAAEK,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,EAAG,CAAC,CACxD,CAAEX,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,YAAY,CAAEK,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,EAAG,CAAC,CAC1D,CACDC,MAAM,CAAE,CACN,CAAEI,IAAI,CAAE,IAAI,CAAEC,EAAE,CAAE,IAAI,CAAEC,IAAI,CAAE,OAAO,CAAEC,KAAK,CAAE,KAAM,CAAC,CACrD,CAAEH,IAAI,CAAE,IAAI,CAAEC,EAAE,CAAE,IAAI,CAAEC,IAAI,CAAE,OAAO,CAAEC,KAAK,CAAE,KAAM,CAAC,CACtD,CACDN,SAAS,CAAE,IAAI,CACfC,WAAW,iMACb,CAAC,CACD,CACEd,EAAE,CAAE,CAAC,CACLC,KAAK,CAAE,kDAAkD,CACzDC,QAAQ,CAAE,mDAAmD,CAC7DC,WAAW,CACT,4QAA4Q,CAC9QC,OAAO,CAAE,CACP,CAAEJ,EAAE,CAAE,MAAM,CAAEK,KAAK,CAAE,aAAa,CAAEC,KAAK,CAAE,SAAS,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,MAAO,CAAC,CACpF,CAAER,EAAE,CAAE,UAAU,CAAEK,KAAK,CAAE,iBAAiB,CAAEC,KAAK,CAAE,UAAU,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,IAAK,CAAC,CAC3F,CAAER,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,mBAAmB,CAAEC,KAAK,CAAE,UAAU,CAAEC,OAAO,CAAE,CAAC,IAAI,CAAC,CAAEC,OAAO,CAAE,IAAK,CAAC,CAC3F,CAAER,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,kBAAkB,CAAEC,KAAK,CAAE,UAAU,CAAEC,OAAO,CAAE,CAAC,IAAI,CAAC,CAAEC,OAAO,CAAE,IAAK,CAAC,CAC3F,CACDC,SAAS,CAAE,CACT,CAAET,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,WAAW,CAAEK,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,EAAG,CAAC,CACxD,CAAEX,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,YAAY,CAAEK,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,EAAG,CAAC,CAC1D,CACDC,MAAM,CAAE,CACN,CAAEI,IAAI,CAAE,IAAI,CAAEC,EAAE,CAAE,IAAI,CAAEC,IAAI,CAAE,OAAO,CAAEC,KAAK,CAAE,KAAM,CAAC,CACrD,CAAEH,IAAI,CAAE,IAAI,CAAEC,EAAE,CAAE,IAAI,CAAEC,IAAI,CAAE,OAAO,CAAEC,KAAK,CAAE,KAAM,CAAC,CACtD,CACDN,SAAS,CAAE,OAAO,CAClBC,WAAW,+OACb,CAAC,CACD,CACEd,EAAE,CAAE,CAAC,CACLC,KAAK,CAAE,gCAAgC,CACvCC,QAAQ,CAAE,uDAAuD,CACjEC,WAAW,CACT,yPAAyP,CAC3PC,OAAO,CAAE,CACP,CAAEJ,EAAE,CAAE,MAAM,CAAEK,KAAK,CAAE,aAAa,CAAEC,KAAK,CAAE,SAAS,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,MAAO,CAAC,CACpF,CAAER,EAAE,CAAE,UAAU,CAAEK,KAAK,CAAE,iBAAiB,CAAEC,KAAK,CAAE,UAAU,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,IAAK,CAAC,CAC3F,CAAER,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,mBAAmB,CAAEC,KAAK,CAAE,SAAS,CAAEC,OAAO,CAAE,CAAC,IAAI,CAAC,CAAEC,OAAO,CAAE,IAAK,CAAC,CAC1F,CAAER,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,kBAAkB,CAAEC,KAAK,CAAE,OAAO,CAAEC,OAAO,CAAE,CAAC,IAAI,CAAC,CAAEC,OAAO,CAAE,IAAK,CAAC,CACxF,CACDC,SAAS,CAAE,CACT,CAAET,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,WAAW,CAAEK,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,EAAG,CAAC,CACxD,CAAEX,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,YAAY,CAAEK,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,CAAC,IAAI,CAAE,CAAC,CAC9D,CACDC,MAAM,CAAE,CACN,CAAEI,IAAI,CAAE,IAAI,CAAEC,EAAE,CAAE,IAAI,CAAEC,IAAI,CAAE,OAAO,CAAEC,KAAK,CAAE,KAAM,CAAC,CACrD,CAAEH,IAAI,CAAE,IAAI,CAAEC,EAAE,CAAE,IAAI,CAAEC,IAAI,CAAE,OAAO,CAAEC,KAAK,CAAE,KAAM,CAAC,CACrD,CAAEH,IAAI,CAAE,IAAI,CAAEC,EAAE,CAAE,IAAI,CAAEC,IAAI,CAAE,OAAO,CAAEC,KAAK,CAAE,KAAM,CAAC,CACtD,CACDN,SAAS,CAAE,IAAI,CACfC,WAAW,4RACb,CAAC,CACD,CACEd,EAAE,CAAE,CAAC,CACLC,KAAK,CAAE,8CAA8C,CACrDC,QAAQ,CAAE,wEAAwE,CAClFC,WAAW,CACT,mSAAmS,CACrSC,OAAO,CAAE,CACP,CAAEJ,EAAE,CAAE,MAAM,CAAEK,KAAK,CAAE,aAAa,CAAEC,KAAK,CAAE,SAAS,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,MAAO,CAAC,CACpF,CAAER,EAAE,CAAE,UAAU,CAAEK,KAAK,CAAE,iBAAiB,CAAEC,KAAK,CAAE,UAAU,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,IAAK,CAAC,CAC3F,CAAER,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,mBAAmB,CAAEC,KAAK,CAAE,YAAY,CAAEC,OAAO,CAAE,CAAC,IAAI,CAAC,CAAEC,OAAO,CAAE,IAAK,CAAC,CAC7F,CAAER,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,kBAAkB,CAAEC,KAAK,CAAE,YAAY,CAAEC,OAAO,CAAE,CAAC,IAAI,CAAC,CAAEC,OAAO,CAAE,IAAK,CAAC,CAC7F,CACDC,SAAS,CAAE,CACT,CAAET,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,WAAW,CAAEK,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,CAAC,IAAI,CAAE,CAAC,CAC5D,CAAEX,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,YAAY,CAAEK,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,CAAC,IAAI,CAAE,CAAC,CAC9D,CACDC,MAAM,CAAE,CACN,CAAEI,IAAI,CAAE,IAAI,CAAEC,EAAE,CAAE,IAAI,CAAEC,IAAI,CAAE,OAAO,CAAEC,KAAK,CAAE,IAAK,CAAC,CACpD,CAAEH,IAAI,CAAE,IAAI,CAAEC,EAAE,CAAE,IAAI,CAAEC,IAAI,CAAE,OAAO,CAAEC,KAAK,CAAE,IAAK,CAAC,CACpD,CAAEH,IAAI,CAAE,IAAI,CAAEC,EAAE,CAAE,IAAI,CAAEC,IAAI,CAAE,OAAO,CAAEC,KAAK,CAAE,IAAK,CAAC,CACpD,CAAEH,IAAI,CAAE,IAAI,CAAEC,EAAE,CAAE,IAAI,CAAEC,IAAI,CAAE,OAAO,CAAEC,KAAK,CAAE,IAAK,CAAC,CACrD,CACDN,SAAS,CAAE,UAAU,CACrBC,WAAW,uSACb,CAAC,CACD,CACEd,EAAE,CAAE,CAAC,CACLC,KAAK,CAAE,iDAAiD,CACxDC,QAAQ,CAAE,8DAA8D,CACxEC,WAAW,CACT,oQAAoQ,CACtQC,OAAO,CAAE,CACP,CAAEJ,EAAE,CAAE,MAAM,CAAEK,KAAK,CAAE,aAAa,CAAEC,KAAK,CAAE,SAAS,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,MAAO,CAAC,CACpF,CAAER,EAAE,CAAE,UAAU,CAAEK,KAAK,CAAE,iBAAiB,CAAEC,KAAK,CAAE,SAAS,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,IAAK,CAAC,CAC1F,CAAER,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,mBAAmB,CAAEC,KAAK,CAAE,YAAY,CAAEC,OAAO,CAAE,CAAC,IAAI,CAAC,CAAEC,OAAO,CAAE,IAAK,CAAC,CAC7F,CAAER,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,kBAAkB,CAAEC,KAAK,CAAE,YAAY,CAAEC,OAAO,CAAE,CAAC,IAAI,CAAC,CAAEC,OAAO,CAAE,IAAK,CAAC,CAC7F,CACDC,SAAS,CAAE,CACT,CAAET,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,WAAW,CAAEK,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,CAAC,IAAI,CAAE,CAAC,CAC5D,CAAEX,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,YAAY,CAAEK,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,CAAC,IAAI,CAAE,CAAC,CAC9D,CACDC,MAAM,CAAE,CACN,CAAEI,IAAI,CAAE,IAAI,CAAEC,EAAE,CAAE,IAAI,CAAEC,IAAI,CAAE,OAAO,CAAEC,KAAK,CAAE,IAAK,CAAC,CACpD,CAAEH,IAAI,CAAE,IAAI,CAAEC,EAAE,CAAE,IAAI,CAAEC,IAAI,CAAE,OAAO,CAAEC,KAAK,CAAE,IAAK,CAAC,CACpD,CAAEH,IAAI,CAAE,IAAI,CAAEC,EAAE,CAAE,IAAI,CAAEC,IAAI,CAAE,OAAO,CAAEC,KAAK,CAAE,IAAK,CAAC,CACpD,CAAEH,IAAI,CAAE,IAAI,CAAEC,EAAE,CAAE,IAAI,CAAEC,IAAI,CAAE,OAAO,CAAEC,KAAK,CAAE,IAAK,CAAC,CACrD,CACDN,SAAS,CAAE,UAAU,CACrBC,WAAW,sZACb,CAAC,CACD,CACEd,EAAE,CAAE,EAAE,CACNC,KAAK,CAAE,4CAA4C,CACnDC,QAAQ,CAAE,wDAAwD,CAClEC,WAAW,CACT,8OAA8O,CAChPC,OAAO,CAAE,CACP,CAAEJ,EAAE,CAAE,MAAM,CAAEK,KAAK,CAAE,aAAa,CAAEC,KAAK,CAAE,SAAS,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,MAAO,CAAC,CACpF,CAAER,EAAE,CAAE,UAAU,CAAEK,KAAK,CAAE,iBAAiB,CAAEC,KAAK,CAAE,SAAS,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,IAAK,CAAC,CAC1F,CAAER,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,mBAAmB,CAAEC,KAAK,CAAE,YAAY,CAAEC,OAAO,CAAE,CAAC,IAAI,CAAC,CAAEC,OAAO,CAAE,IAAK,CAAC,CAC7F,CAAER,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,kBAAkB,CAAEC,KAAK,CAAE,YAAY,CAAEC,OAAO,CAAE,CAAC,IAAI,CAAC,CAAEC,OAAO,CAAE,IAAK,CAAC,CAC7F,CACDC,SAAS,CAAE,CACT,CAAET,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,WAAW,CAAEK,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,CAAC,IAAI,CAAE,CAAC,CAC5D,CAAEX,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,YAAY,CAAEK,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,CAAC,IAAI,CAAE,CAAC,CAC9D,CACDC,MAAM,CAAE,CACN,CAAEI,IAAI,CAAE,IAAI,CAAEC,EAAE,CAAE,IAAI,CAAEC,IAAI,CAAE,OAAO,CAAEC,KAAK,CAAE,IAAK,CAAC,CACpD,CAAEH,IAAI,CAAE,IAAI,CAAEC,EAAE,CAAE,IAAI,CAAEC,IAAI,CAAE,OAAO,CAAEC,KAAK,CAAE,IAAK,CAAC,CACpD,CAAEH,IAAI,CAAE,IAAI,CAAEC,EAAE,CAAE,IAAI,CAAEC,IAAI,CAAE,OAAO,CAAEC,KAAK,CAAE,IAAK,CAAC,CACpD,CAAEH,IAAI,CAAE,IAAI,CAAEC,EAAE,CAAE,IAAI,CAAEC,IAAI,CAAE,OAAO,CAAEC,KAAK,CAAE,IAAK,CAAC,CACrD,CACDN,SAAS,CAAE,OAAO,CAClBC,WAAW,+ZACb,CAAC,CACD,CACEd,EAAE,CAAE,EAAE,CACNC,KAAK,CAAE,8CAA8C,CACrDC,QAAQ,CAAE,2DAA2D,CACrEC,WAAW,CACT,sRAAsR,CACxRC,OAAO,CAAE,CACP,CAAEJ,EAAE,CAAE,MAAM,CAAEK,KAAK,CAAE,aAAa,CAAEC,KAAK,CAAE,SAAS,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,MAAO,CAAC,CACpF,CAAER,EAAE,CAAE,UAAU,CAAEK,KAAK,CAAE,iBAAiB,CAAEC,KAAK,CAAE,SAAS,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,IAAK,CAAC,CAC1F,CAAER,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,mBAAmB,CAAEC,KAAK,CAAE,YAAY,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,IAAK,CAAC,CACzF,CAAER,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,kBAAkB,CAAEC,KAAK,CAAE,OAAO,CAAEC,OAAO,CAAE,CAAC,IAAI,CAAC,CAAEC,OAAO,CAAE,IAAK,CAAC,CACxF,CACDC,SAAS,CAAE,CACT,CAAET,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,WAAW,CAAEK,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,EAAG,CAAC,CACxD,CAAEX,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,YAAY,CAAEK,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,EAAG,CAAC,CAC1D,CACDC,MAAM,CAAE,CACN,CAAEI,IAAI,CAAE,IAAI,CAAEC,EAAE,CAAE,IAAI,CAAEC,IAAI,CAAE,OAAO,CAAEC,KAAK,CAAE,KAAM,CAAC,CACtD,CACDN,SAAS,CAAE,UAAU,CACrBC,WAAW,yaACb,CAAC,CACD,CACEd,EAAE,CAAE,EAAE,CACNC,KAAK,CAAE,oCAAoC,CAC3CC,QAAQ,CAAE,oEAAoE,CAC9EC,WAAW,CACT,8MAA8M,CAChNC,OAAO,CAAE,CACP,CAAEJ,EAAE,CAAE,MAAM,CAAEK,KAAK,CAAE,aAAa,CAAEC,KAAK,CAAE,SAAS,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,MAAO,CAAC,CACpF,CAAER,EAAE,CAAE,UAAU,CAAEK,KAAK,CAAE,iBAAiB,CAAEC,KAAK,CAAE,UAAU,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,IAAK,CAAC,CAC3F,CAAER,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,mBAAmB,CAAEC,KAAK,CAAE,YAAY,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,IAAK,CAAC,CACzF,CAAER,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,kBAAkB,CAAEC,KAAK,CAAE,SAAS,CAAEC,OAAO,CAAE,CAAC,IAAI,CAAE,IAAI,CAAC,CAAEC,OAAO,CAAE,IAAK,CAAC,CAChG,CACDC,SAAS,CAAE,CACT,CAAET,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,WAAW,CAAEK,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,EAAG,CAAC,CACxD,CAAEX,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,YAAY,CAAEK,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,EAAG,CAAC,CAC1D,CACDC,MAAM,CAAE,CACN,CAAEI,IAAI,CAAE,IAAI,CAAEC,EAAE,CAAE,IAAI,CAAEC,IAAI,CAAE,OAAO,CAAEC,KAAK,CAAE,KAAM,CAAC,CACrD,CAAEH,IAAI,CAAE,IAAI,CAAEC,EAAE,CAAE,IAAI,CAAEC,IAAI,CAAE,OAAO,CAAEC,KAAK,CAAE,KAAM,CAAC,CACtD,CACDN,SAAS,CAAE,IAAI,CACfC,WAAW,iSACb,CAAC,CACD,CACEd,EAAE,CAAE,EAAE,CACNC,KAAK,CAAE,2CAA2C,CAClDC,QAAQ,CAAE,gEAAgE,CAC1EC,WAAW,CACT,+PAA+P,CACjQC,OAAO,CAAE,CACP,CAAEJ,EAAE,CAAE,MAAM,CAAEK,KAAK,CAAE,aAAa,CAAEC,KAAK,CAAE,YAAY,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,IAAK,CAAC,CACrF,CAAER,EAAE,CAAE,UAAU,CAAEK,KAAK,CAAE,iBAAiB,CAAEC,KAAK,CAAE,YAAY,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,IAAK,CAAC,CAC7F,CAAER,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,mBAAmB,CAAEC,KAAK,CAAE,YAAY,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,IAAK,CAAC,CACzF,CAAER,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,kBAAkB,CAAEC,KAAK,CAAE,YAAY,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,IAAK,CAAC,CACzF,CACDC,SAAS,CAAE,CACT,CAAET,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,WAAW,CAAEK,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,EAAG,CAAC,CACxD,CAAEX,EAAE,CAAE,IAAI,CAAEK,KAAK,CAAE,YAAY,CAAEK,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,EAAG,CAAC,CAC1D,CACDC,MAAM,CAAE,EAAE,CACVC,SAAS,CAAE,MAAM,CACjBC,WAAW,oNACb,CAAC,CACF,CAED,8CACA,KAAM,CAAAM,YAAY,CAAG,CACnBC,OAAO,CAAE,CAAEC,EAAE,CAAE,mBAAmB,CAAEC,MAAM,CAAE,uBAAuB,CAAEC,IAAI,CAAE,kBAAkB,CAAEnB,KAAK,CAAE,SAAS,CAAEoB,GAAG,CAAE,gBAAiB,CAAC,CACxIC,KAAK,CAAE,CAAEJ,EAAE,CAAE,gBAAgB,CAAEC,MAAM,CAAE,oBAAoB,CAAEC,IAAI,CAAE,eAAe,CAAEnB,KAAK,CAAE,OAAO,CAAEoB,GAAG,CAAE,aAAc,CAAC,CACxHE,QAAQ,CAAE,CAAEL,EAAE,CAAE,iBAAiB,CAAEC,MAAM,CAAE,qBAAqB,CAAEC,IAAI,CAAE,gBAAgB,CAAEnB,KAAK,CAAE,UAAU,CAAEoB,GAAG,CAAE,cAAe,CAAC,CAClIjB,OAAO,CAAE,CAAEc,EAAE,CAAE,kBAAkB,CAAEC,MAAM,CAAE,sBAAsB,CAAEC,IAAI,CAAE,iBAAiB,CAAEnB,KAAK,CAAE,SAAS,CAAEoB,GAAG,CAAE,eAAgB,CAAC,CACpIG,OAAO,CAAE,CAAEN,EAAE,CAAE,gBAAgB,CAAEC,MAAM,CAAE,oBAAoB,CAAEC,IAAI,CAAE,eAAe,CAAEnB,KAAK,CAAE,SAAS,CAAEoB,GAAG,CAAE,aAAc,CAAC,CAC5HI,UAAU,CAAE,CAAEP,EAAE,CAAE,eAAe,CAAEC,MAAM,CAAE,mBAAmB,CAAEC,IAAI,CAAE,cAAc,CAAEnB,KAAK,CAAE,YAAY,CAAEoB,GAAG,CAAE,YAAa,CAAC,CAC9HK,UAAU,CAAE,CAAER,EAAE,CAAE,mBAAmB,CAAEC,MAAM,CAAE,uBAAuB,CAAEC,IAAI,CAAE,kBAAkB,CAAEnB,KAAK,CAAE,YAAY,CAAEoB,GAAG,CAAE,gBAAiB,CAC/I,CAAC,CAED,sDACA,QAAS,CAAAM,SAASA,CAAAC,IAAA,CAA4B,IAA3B,CAAEC,MAAM,CAAEC,aAAc,CAAC,CAAAF,IAAA,CAC1C,KAAM,CAAAG,EAAE,CAAGf,YAAY,CAACa,MAAM,CAAC3B,KAAK,CAAC,EAAIc,YAAY,CAACM,KAAK,CAC3D,mBACE5B,KAAA,CAACZ,MAAM,CAACkD,GAAG,EACTC,MAAM,MACNC,OAAO,CAAE,CAAEC,OAAO,CAAE,CAAC,CAAEC,KAAK,CAAE,GAAI,CAAE,CACpCC,OAAO,CAAE,CACPF,OAAO,CAAE,CAAC,CACVC,KAAK,CAAEN,aAAa,CAAG,IAAI,CAAG,CAAC,CAC/BQ,SAAS,CAAER,aAAa,CAAG,+BAA+B,CAAG,qBAC/D,CAAE,CACFS,UAAU,CAAE,CAAEzB,IAAI,CAAE,QAAQ,CAAE0B,SAAS,CAAE,GAAG,CAAEC,OAAO,CAAE,EAAG,CAAE,CAC5DC,SAAS,4BAAAC,MAAA,CAA6BZ,EAAE,CAACb,EAAE,MAAAyB,MAAA,CAAIZ,EAAE,CAACZ,MAAM,MAAAwB,MAAA,CAAIb,aAAa,CAAG,uBAAuB,CAAG,EAAE,CAAG,CAAAc,QAAA,eAE3GlD,KAAA,QAAKgD,SAAS,CAAC,0CAA0C,CAAAE,QAAA,eACvDpD,IAAA,SAAMkD,SAAS,CAAC,uCAAuC,CAAAE,QAAA,CAAEf,MAAM,CAAC5B,KAAK,CAAO,CAAC,cAC7EP,KAAA,SAAMgD,SAAS,CAAC,qCAAqC,CAAAE,QAAA,EAClD,CAACf,MAAM,CAAC3B,KAAK,GAAK,SAAS,EAAI2B,MAAM,CAAC3B,KAAK,GAAK,YAAY,gBAC3DV,IAAA,SAAMkD,SAAS,iEAAAC,MAAA,CAAkEZ,EAAE,CAACV,GAAG,eAAc,CAAE,CACxG,cACD7B,IAAA,SAAMkD,SAAS,8CAAAC,MAAA,CAA+CZ,EAAE,CAACV,GAAG,CAAG,CAAE,CAAC,EACtE,CAAC,EACJ,CAAC,cACN7B,IAAA,QAAKkD,SAAS,mDAAAC,MAAA,CAAoDZ,EAAE,CAACX,IAAI,CAAG,CAAAwB,QAAA,CACzEb,EAAE,CAAC9B,KAAK,CACN,CAAC,CACL4B,MAAM,CAAC1B,OAAO,CAAC0C,MAAM,CAAG,CAAC,eACxBrD,IAAA,QAAKkD,SAAS,CAAC,6BAA6B,CAAAE,QAAA,CACzCf,MAAM,CAAC1B,OAAO,CAAC2C,GAAG,CAAEC,CAAC,eACpBrD,KAAA,SAAcgD,SAAS,CAAC,+EAA+E,CAAAE,QAAA,EAAC,eACnG,CAACG,CAAC,GADIA,CAEL,CACP,CAAC,CACC,CACN,CACAlB,MAAM,CAACzB,OAAO,eACbZ,IAAA,QAAKkD,SAAS,CAAC,QAAQ,CAAAE,QAAA,cACrBlD,KAAA,SAAMgD,SAAS,CAAC,yEAAyE,CAAAE,QAAA,EAAC,kBAC7E,CAACf,MAAM,CAACzB,OAAO,EACtB,CAAC,CACJ,CACN,EACS,CAAC,CAEjB,CAEA,wDACA,QAAS,CAAA4C,WAAWA,CAAAC,KAAA,CAA8B,IAA7B,CAAEC,QAAQ,CAAEpB,aAAc,CAAC,CAAAmB,KAAA,CAC9C,KAAM,CAAAE,MAAM,CAAGD,QAAQ,CAAC5C,KAAK,GAAK,IAAI,CACtC,mBACEZ,KAAA,CAACZ,MAAM,CAACkD,GAAG,EACTC,MAAM,MACNC,OAAO,CAAE,CAAEC,OAAO,CAAE,CAAC,CAAEC,KAAK,CAAE,GAAI,CAAE,CACpCC,OAAO,CAAE,CACPF,OAAO,CAAE,CAAC,CACVC,KAAK,CAAEN,aAAa,CAAG,IAAI,CAAG,CAChC,CAAE,CACFS,UAAU,CAAE,CAAEzB,IAAI,CAAE,QAAQ,CAAE0B,SAAS,CAAE,GAAG,CAAEC,OAAO,CAAE,EAAG,CAAE,CAC5DC,SAAS,wCAAAC,MAAA,CACPO,QAAQ,CAACvC,WAAW,CAChB,qDAAqD,CACrDwC,MAAM,CACN,qCAAqC,CACrC,yCAAyC,CAC5C,CAAAP,QAAA,eAEHpD,IAAA,QAAKkD,SAAS,CAAC,qCAAqC,CAAAE,QAAA,CAAEM,QAAQ,CAACtD,EAAE,CAAM,CAAC,cACxEJ,IAAA,QAAKkD,SAAS,CAAC,qCAAqC,CAAAE,QAAA,CAAEM,QAAQ,CAACjD,KAAK,CAAM,CAAC,cAC3ET,IAAA,QAAKkD,SAAS,0BAAAC,MAAA,CAA2BQ,MAAM,CAAG,gBAAgB,CAAG,kBAAkB,CAAG,CAAAP,QAAA,CACvFO,MAAM,iBAAAR,MAAA,CAASO,QAAQ,CAAC5C,KAAK,EAAK,SAAS,CACzC,CAAC,CACL4C,QAAQ,CAAC3C,KAAK,CAACsC,MAAM,CAAG,CAAC,eACxBnD,KAAA,QAAKgD,SAAS,CAAC,2CAA2C,CAAAE,QAAA,EAAC,UACjD,CAACM,QAAQ,CAAC3C,KAAK,CAAC6C,IAAI,CAAC,IAAI,CAAC,CAAC,GACrC,EAAK,CACN,EACS,CAAC,CAEjB,CAEA,oDACA,QAAS,CAAAC,gBAAgBA,CAAAC,KAAA,CAAiC,IAAhC,CAAEtD,OAAO,CAAEK,SAAS,CAAEG,MAAO,CAAC,CAAA8C,KAAA,CACtD,KAAM,CAAAC,eAAe,CAAGvD,OAAO,CAACwD,MAAM,CAAEC,CAAC,EAAKA,CAAC,CAAC7D,EAAE,CAAC8D,UAAU,CAAC,GAAG,CAAC,CAAC,CACnE,GAAIH,eAAe,CAACV,MAAM,GAAK,CAAC,EAAIrC,MAAM,CAACqC,MAAM,GAAK,CAAC,CAAE,MAAO,KAAI,CAEpE;AACA,KAAM,CAAAc,SAAS,CAAG,CAChBC,EAAE,CAAE,CAAEC,CAAC,CAAE,EAAE,CAAEC,CAAC,CAAE,EAAG,CAAC,CACpBC,EAAE,CAAE,CAAEF,CAAC,CAAE,GAAG,CAAEC,CAAC,CAAE,EAAG,CAAC,CACrBE,EAAE,CAAE,CAAEH,CAAC,CAAE,EAAE,CAAEC,CAAC,CAAE,GAAI,CAAC,CACrBG,EAAE,CAAE,CAAEJ,CAAC,CAAE,GAAG,CAAEC,CAAC,CAAE,GAAI,CACvB,CAAC,CAED,mBACEpE,KAAA,QAAKgD,SAAS,CAAC,+DAA+D,CAAAE,QAAA,eAC5EpD,IAAA,QAAKkD,SAAS,CAAC,sEAAsE,CAAAE,QAAA,CAAC,gBAEtF,CAAK,CAAC,cACNlD,KAAA,QAAKwE,OAAO,CAAC,aAAa,CAACxB,SAAS,CAAC,eAAe,CAACyB,KAAK,CAAE,CAAEC,SAAS,CAAE,GAAI,CAAE,CAAAxB,QAAA,eAC7ElD,KAAA,SAAAkD,QAAA,eACEpD,IAAA,WAAQI,EAAE,CAAC,WAAW,CAACsE,OAAO,CAAC,UAAU,CAACG,IAAI,CAAC,IAAI,CAACC,IAAI,CAAC,KAAK,CAACC,WAAW,CAAC,GAAG,CAACC,YAAY,CAAC,GAAG,CAACC,MAAM,CAAC,oBAAoB,CAAA7B,QAAA,cACzHpD,IAAA,YAASkF,MAAM,CAAC,kBAAkB,CAACC,IAAI,CAAC,SAAS,CAAE,CAAC,CAC9C,CAAC,cACTnF,IAAA,WAAQI,EAAE,CAAC,eAAe,CAACsE,OAAO,CAAC,UAAU,CAACG,IAAI,CAAC,IAAI,CAACC,IAAI,CAAC,KAAK,CAACC,WAAW,CAAC,GAAG,CAACC,YAAY,CAAC,GAAG,CAACC,MAAM,CAAC,oBAAoB,CAAA7B,QAAA,cAC7HpD,IAAA,YAASkF,MAAM,CAAC,kBAAkB,CAACC,IAAI,CAAC,SAAS,CAAE,CAAC,CAC9C,CAAC,cACTnF,IAAA,WAAQI,EAAE,CAAC,iBAAiB,CAACsE,OAAO,CAAC,UAAU,CAACG,IAAI,CAAC,IAAI,CAACC,IAAI,CAAC,KAAK,CAACC,WAAW,CAAC,GAAG,CAACC,YAAY,CAAC,GAAG,CAACC,MAAM,CAAC,oBAAoB,CAAA7B,QAAA,cAC/HpD,IAAA,YAASkF,MAAM,CAAC,kBAAkB,CAACC,IAAI,CAAC,SAAS,CAAE,CAAC,CAC9C,CAAC,EACL,CAAC,CAGNnE,MAAM,CAACsC,GAAG,CAAC,CAAC8B,CAAC,CAAEC,CAAC,GAAK,CACpB,KAAM,CAAAjE,IAAI,CAAG+C,SAAS,CAACiB,CAAC,CAAChE,IAAI,CAAC,CAC9B,KAAM,CAAAC,EAAE,CAAG8C,SAAS,CAACiB,CAAC,CAAC/D,EAAE,CAAC,CAC1B,GAAI,CAACD,IAAI,EAAI,CAACC,EAAE,CAAE,MAAO,KAAI,CAC7B,KAAM,CAAAiE,OAAO,CAAGF,CAAC,CAAC7D,KAAK,CACvB,KAAM,CAAAgE,MAAM,CAAGH,CAAC,CAAC9D,IAAI,GAAK,OAAO,CACjC,mBACEtB,IAAA,CAACV,MAAM,CAACkG,IAAI,EAEVC,EAAE,CAAErE,IAAI,CAACiD,CAAE,CACXqB,EAAE,CAAEtE,IAAI,CAACkD,CAAE,CACXqB,EAAE,CAAEtE,EAAE,CAACgD,CAAE,CACTuB,EAAE,CAAEvE,EAAE,CAACiD,CAAE,CACTuB,MAAM,CAAEP,OAAO,CAAG,SAAS,CAAGC,MAAM,CAAG,SAAS,CAAG,SAAU,CAC7DO,WAAW,CAAER,OAAO,CAAG,CAAC,CAAG,CAAE,CAC7BS,eAAe,CAAEX,CAAC,CAAC9D,IAAI,GAAK,OAAO,CAAG,KAAK,CAAG,MAAO,CACrD0E,SAAS,CAAEV,OAAO,CAAG,qBAAqB,CAAGC,MAAM,CAAG,uBAAuB,CAAG,iBAAkB,CAClG7C,OAAO,CAAE,CAAEC,OAAO,CAAE,CAAE,CAAE,CACxBE,OAAO,CAAE,CAAEF,OAAO,CAAE,CAAE,CAAE,CACxBI,UAAU,CAAE,CAAEkD,QAAQ,CAAE,GAAG,CAAEC,KAAK,CAAEb,CAAC,CAAG,GAAI,CAAE,SAAAlC,MAAA,CAXlCkC,CAAC,CAYd,CAAC,CAEN,CAAC,CAAC,CAGDtB,eAAe,CAACT,GAAG,CAAEW,CAAC,EAAK,CAC1B,KAAM,CAAAkC,GAAG,CAAGhC,SAAS,CAACF,CAAC,CAAC7D,EAAE,CAAC,CAC3B,GAAI,CAAC+F,GAAG,CAAE,MAAO,KAAI,CACrB,KAAM,CAAA5D,EAAE,CAAGf,YAAY,CAACyC,CAAC,CAACvD,KAAK,CAAC,EAAIc,YAAY,CAACM,KAAK,CACtD,KAAM,CAAAsE,YAAY,CAAGnC,CAAC,CAACvD,KAAK,GAAK,YAAY,CAC7C,KAAM,CAAAyE,IAAI,CAAGiB,YAAY,CAAG,sBAAsB,CAAGnC,CAAC,CAACvD,KAAK,GAAK,YAAY,CAAG,oBAAoB,CAAG,sBAAsB,CAC7H,KAAM,CAAAmF,MAAM,CAAGO,YAAY,CAAG,SAAS,CAAGnC,CAAC,CAACvD,KAAK,GAAK,YAAY,CAAG,SAAS,CAAG,SAAS,CAC1F,mBACER,KAAA,MAAAkD,QAAA,eACEpD,IAAA,CAACV,MAAM,CAAC+G,MAAM,EACZC,EAAE,CAAEH,GAAG,CAAC9B,CAAE,CAACkC,EAAE,CAAEJ,GAAG,CAAC7B,CAAE,CAACf,CAAC,CAAE,EAAG,CAC5B4B,IAAI,CAAEA,IAAK,CAACU,MAAM,CAAEA,MAAO,CAACC,WAAW,CAAEM,YAAY,CAAG,CAAC,CAAG,CAAE,CAC9D1D,OAAO,CAAE,CAAEE,KAAK,CAAE,CAAE,CAAE,CAACC,OAAO,CAAE,CAAED,KAAK,CAAE,CAAE,CAAE,CAC7CG,UAAU,CAAE,CAAEzB,IAAI,CAAE,QAAQ,CAAE0B,SAAS,CAAE,GAAI,CAAE,CAChD,CAAC,cACFhD,IAAA,SAAMqE,CAAC,CAAE8B,GAAG,CAAC9B,CAAE,CAACC,CAAC,CAAE6B,GAAG,CAAC7B,CAAC,CAAG,CAAE,CAACkC,UAAU,CAAC,QAAQ,CAACrB,IAAI,CAAC,SAAS,CAACsB,QAAQ,CAAC,IAAI,CAACC,UAAU,CAAC,MAAM,CAACC,UAAU,CAAC,2BAA2B,CAAAvD,QAAA,CACpIa,CAAC,CAAC7D,EAAE,CACD,CAAC,GATD6D,CAAC,CAAC7D,EAUP,CAAC,CAER,CAAC,CAAC,CAGDS,SAAS,CAACyC,GAAG,CAAEC,CAAC,EAAK,CACpB,KAAM,CAAA4C,GAAG,CAAGhC,SAAS,CAACZ,CAAC,CAACnD,EAAE,CAAC,CAC3B,GAAI,CAAC+F,GAAG,CAAE,MAAO,KAAI,CACrB,KAAM,CAAAxC,MAAM,CAAGJ,CAAC,CAACzC,KAAK,GAAK,IAAI,CAC/B,mBACEZ,KAAA,MAAAkD,QAAA,eACEpD,IAAA,CAACV,MAAM,CAACsH,IAAI,EACVvC,CAAC,CAAE8B,GAAG,CAAC9B,CAAC,CAAG,EAAG,CAACC,CAAC,CAAE6B,GAAG,CAAC7B,CAAC,CAAG,EAAG,CAACuC,KAAK,CAAE,EAAG,CAACC,MAAM,CAAE,EAAG,CAACC,EAAE,CAAE,CAAE,CAC3D5B,IAAI,CAAExB,MAAM,CAAG,sBAAsB,CAAG,uBAAwB,CAChEkC,MAAM,CAAElC,MAAM,CAAG,SAAS,CAAG,SAAU,CAACmC,WAAW,CAAE,CAAE,CACvDpD,OAAO,CAAE,CAAEE,KAAK,CAAE,CAAE,CAAE,CAACC,OAAO,CAAE,CAAED,KAAK,CAAE,CAAE,CAAE,CAC7CG,UAAU,CAAE,CAAEzB,IAAI,CAAE,QAAQ,CAAE0B,SAAS,CAAE,GAAI,CAAE,CAChD,CAAC,cACFhD,IAAA,SAAMqE,CAAC,CAAE8B,GAAG,CAAC9B,CAAE,CAACC,CAAC,CAAE6B,GAAG,CAAC7B,CAAC,CAAG,CAAE,CAACkC,UAAU,CAAC,QAAQ,CAACrB,IAAI,CAAC,SAAS,CAACsB,QAAQ,CAAC,IAAI,CAACC,UAAU,CAAC,MAAM,CAACC,UAAU,CAAC,2BAA2B,CAAAvD,QAAA,CACpIG,CAAC,CAACnD,EAAE,CACD,CAAC,GAVDmD,CAAC,CAACnD,EAWP,CAAC,CAER,CAAC,CAAC,cAGFJ,IAAA,SAAMqE,CAAC,CAAE,EAAG,CAACC,CAAC,CAAE,EAAG,CAACkC,UAAU,CAAC,QAAQ,CAACrB,IAAI,CAAC,SAAS,CAACsB,QAAQ,CAAC,GAAG,CAAArD,QAAA,CAAC,YAAU,CAAM,CAAC,cACrFpD,IAAA,SAAMqE,CAAC,CAAE,GAAI,CAACC,CAAC,CAAE,EAAG,CAACkC,UAAU,CAAC,QAAQ,CAACrB,IAAI,CAAC,SAAS,CAACsB,QAAQ,CAAC,GAAG,CAAArD,QAAA,CAAC,YAAU,CAAM,CAAC,cACtFpD,IAAA,SAAMqE,CAAC,CAAE,EAAG,CAACC,CAAC,CAAE,GAAI,CAACkC,UAAU,CAAC,QAAQ,CAACrB,IAAI,CAAC,SAAS,CAACsB,QAAQ,CAAC,GAAG,CAAArD,QAAA,CAAC,WAAS,CAAM,CAAC,cACrFpD,IAAA,SAAMqE,CAAC,CAAE,GAAI,CAACC,CAAC,CAAE,GAAI,CAACkC,UAAU,CAAC,QAAQ,CAACrB,IAAI,CAAC,SAAS,CAACsB,QAAQ,CAAC,GAAG,CAAArD,QAAA,CAAC,YAAU,CAAM,CAAC,EACpF,CAAC,cAGNlD,KAAA,QAAKgD,SAAS,CAAC,uDAAuD,CAAAE,QAAA,eACpElD,KAAA,QAAKgD,SAAS,CAAC,yBAAyB,CAAAE,QAAA,eAACpD,IAAA,SAAMkD,SAAS,CAAC,uCAAuC,CAAE,CAAC,SAAM,EAAK,CAAC,cAC/GhD,KAAA,QAAKgD,SAAS,CAAC,yBAAyB,CAAAE,QAAA,eAACpD,IAAA,SAAMkD,SAAS,CAAC,uCAAuC,CAACyB,KAAK,CAAE,CAAEqC,SAAS,CAAE,oBAAqB,CAAE,CAAE,CAAC,SAAM,EAAK,CAAC,cAC3J9G,KAAA,QAAKgD,SAAS,CAAC,yBAAyB,CAAAE,QAAA,eAACpD,IAAA,SAAMkD,SAAS,CAAC,mCAAmC,CAAE,CAAC,SAAM,EAAK,CAAC,EACxG,CAAC,EACH,CAAC,CAEV,CAEA,2DACA,cAAe,SAAS,CAAA+D,YAAYA,CAAA,CAAG,CACrC,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGjI,QAAQ,CAAC,CAAC,CAAC,CACjD,KAAM,CAACkI,SAAS,CAAEC,YAAY,CAAC,CAAGnI,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACoI,KAAK,CAAEC,QAAQ,CAAC,CAAGrI,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAAAsI,WAAW,CAAGpI,MAAM,CAAC,IAAI,CAAC,CAChC,KAAM,CAAAqI,SAAS,CAAGrI,MAAM,CAAC,IAAI,CAAC,CAE9B,KAAM,CAAAsI,IAAI,CAAGvH,KAAK,CAAC+G,WAAW,CAAC,CAC/B,KAAM,CAAAS,UAAU,CAAGxH,KAAK,CAACkD,MAAM,CAE/B,KAAM,CAAAuE,MAAM,CAAGvI,WAAW,CAAC,IAAM,CAC/B8H,cAAc,CAAEU,IAAI,EAAMA,IAAI,CAAGF,UAAU,CAAG,CAAC,CAAGE,IAAI,CAAG,CAAC,CAAGA,IAAK,CAAC,CACrE,CAAC,CAAE,CAACF,UAAU,CAAC,CAAC,CAEhB,KAAM,CAAAG,MAAM,CAAGzI,WAAW,CAAC,IAAM,CAC/B8H,cAAc,CAAEU,IAAI,EAAMA,IAAI,CAAG,CAAC,CAAGA,IAAI,CAAG,CAAC,CAAGA,IAAK,CAAC,CACxD,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAE,KAAK,CAAG1I,WAAW,CAAC,IAAM,CAC9B8H,cAAc,CAAC,CAAC,CAAC,CACjBE,YAAY,CAAC,KAAK,CAAC,CACrB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAW,UAAU,CAAG3I,WAAW,CAAC,IAAM,CACnCgI,YAAY,CAAEQ,IAAI,EAAK,CAACA,IAAI,CAAC,CAC/B,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAI,WAAW,CAAG5I,WAAW,CAAC,IAAM,CACpCkI,QAAQ,CAAEM,IAAI,EAAMA,IAAI,GAAK,IAAI,CAAG,IAAI,CAAGA,IAAI,GAAK,IAAI,CAAG,GAAG,CAAG,IAAK,CAAC,CACzE,CAAC,CAAE,EAAE,CAAC,CAEN;AACA1I,SAAS,CAAC,IAAM,CACd,GAAIiI,SAAS,CAAE,CACbI,WAAW,CAACU,OAAO,CAAGC,WAAW,CAAC,IAAM,CACtChB,cAAc,CAAEU,IAAI,EAAK,CACvB,GAAIA,IAAI,EAAIF,UAAU,CAAG,CAAC,CAAE,CAC1BN,YAAY,CAAC,KAAK,CAAC,CACnB,MAAO,CAAAQ,IAAI,CACb,CACA,MAAO,CAAAA,IAAI,CAAG,CAAC,CACjB,CAAC,CAAC,CACJ,CAAC,CAAEP,KAAK,CAAC,CACX,CAAC,IAAM,CACL,GAAIE,WAAW,CAACU,OAAO,CAAEE,aAAa,CAACZ,WAAW,CAACU,OAAO,CAAC,CAC7D,CACA,MAAO,IAAM,CACX,GAAIV,WAAW,CAACU,OAAO,CAAEE,aAAa,CAACZ,WAAW,CAACU,OAAO,CAAC,CAC7D,CAAC,CACH,CAAC,CAAE,CAACd,SAAS,CAAEE,KAAK,CAAEK,UAAU,CAAC,CAAC,CAElC;AACAxI,SAAS,CAAC,IAAM,CACd,GAAIsI,SAAS,CAACS,OAAO,CAAE,CACrB,KAAM,CAAAG,QAAQ,CAAGZ,SAAS,CAACS,OAAO,CAACI,aAAa,iBAAAnF,MAAA,CAAgB+D,WAAW,OAAI,CAAC,CAChF,GAAImB,QAAQ,CAAE,CACZA,QAAQ,CAACE,cAAc,CAAC,CAAEC,QAAQ,CAAE,QAAQ,CAAEC,KAAK,CAAE,SAAS,CAAEC,MAAM,CAAE,QAAS,CAAC,CAAC,CACrF,CACF,CACF,CAAC,CAAE,CAACxB,WAAW,CAAC,CAAC,CAEjB,KAAM,CAAAyB,UAAU,CAAGrB,KAAK,GAAK,IAAI,CAAG,IAAI,CAAGA,KAAK,GAAK,IAAI,CAAG,IAAI,CAAG,IAAI,CAEvE,mBACEpH,KAAA,CAACV,SAAS,EAAC0D,SAAS,CAAC,KAAK,CAAC0F,IAAI,CAAElB,IAAI,CAACzG,SAAS,GAAK,UAAU,EAAIyG,IAAI,CAACzG,SAAS,GAAK,OAAO,CAAG,QAAQ,CAAGyG,IAAI,CAACzG,SAAS,GAAK,UAAU,CAAG,EAAE,CAAG,EAAG,CAAAmC,QAAA,eAEhJlD,KAAA,QAAKgD,SAAS,CAAC,kFAAkF,CAAAE,QAAA,eAC/FlD,KAAA,QAAAkD,QAAA,eACElD,KAAA,OAAIgD,SAAS,CAAC,2DAA2D,CAAAE,QAAA,eACvEpD,IAAA,SAAMkD,SAAS,CAAC,mBAAmB,CAAAE,QAAA,CAAC,QAAC,CAAM,CAAC,uCAC9C,EAAI,CAAC,cACLpD,IAAA,MAAGkD,SAAS,CAAC,iCAAiC,CAAAE,QAAA,CAAC,kFAE/C,CAAG,CAAC,EACD,CAAC,cACNpD,IAAA,QAAKkD,SAAS,CAAC,yBAAyB,CAAAE,QAAA,cACtClD,KAAA,SAAMgD,SAAS,CAAC,qHAAqH,CAAAE,QAAA,EAAC,OAC/H,CAAC8D,WAAW,CAAG,CAAC,CAAC,GAAC,CAACS,UAAU,EAC9B,CAAC,CACJ,CAAC,EACH,CAAC,cAGN3H,IAAA,QACE6I,GAAG,CAAEpB,SAAU,CACfvE,SAAS,CAAC,uDAAuD,CAAAE,QAAA,CAEhEjD,KAAK,CAACmD,GAAG,CAAC,CAACwF,CAAC,CAAEzD,CAAC,gBACdrF,IAAA,WAEE,YAAWqF,CAAE,CACb0D,OAAO,CAAEA,CAAA,GAAM5B,cAAc,CAAC9B,CAAC,CAAE,CACjCnC,SAAS,8FAAAC,MAAA,CACPkC,CAAC,GAAK6B,WAAW,CACb4B,CAAC,CAAC7H,SAAS,GAAK,UAAU,EAAI6H,CAAC,CAAC7H,SAAS,GAAK,OAAO,CACnD,qEAAqE,CACrE6H,CAAC,CAAC7H,SAAS,GAAK,UAAU,CAC1B,iFAAiF,CACjF,uEAAuE,CACzEoE,CAAC,CAAG6B,WAAW,CACf,0DAA0D,CAC1D,kFAAkF,CACrF,CAAA9D,QAAA,CAEFiC,CAAC,CAAG,CAAC,EAfDyD,CAAC,CAAC1I,EAgBD,CACT,CAAC,CACC,CAAC,cAGNF,KAAA,QAAKgD,SAAS,CAAC,8BAA8B,CAAAE,QAAA,eAC3ClD,KAAA,WACE6I,OAAO,CAAEjB,MAAO,CAChBkB,QAAQ,CAAE9B,WAAW,GAAK,CAAE,CAC5BhE,SAAS,CAAC,4OAA4O,CAAAE,QAAA,eAEtPpD,IAAA,CAACJ,QAAQ,EAACqJ,IAAI,CAAE,EAAG,CAAE,CAAC,OAExB,EAAQ,CAAC,cACT/I,KAAA,WACE6I,OAAO,CAAEf,UAAW,CACpB9E,SAAS,+FAAAC,MAAA,CACPiE,SAAS,CACL,0EAA0E,CAC1E,kFAAkF,CACrF,CAAAhE,QAAA,EAEFgE,SAAS,cAAGpH,IAAA,CAACN,KAAK,EAACuJ,IAAI,CAAE,EAAG,CAAE,CAAC,cAAGjJ,IAAA,CAACP,IAAI,EAACwJ,IAAI,CAAE,EAAG,CAAE,CAAC,CACpD7B,SAAS,CAAG,OAAO,CAAG,WAAW,EAC5B,CAAC,cACTlH,KAAA,WACE6I,OAAO,CAAEnB,MAAO,CAChBoB,QAAQ,CAAE9B,WAAW,GAAKS,UAAU,CAAG,CAAE,CACzCzE,SAAS,CAAC,4OAA4O,CAAAE,QAAA,EACvP,MAEC,cAAApD,IAAA,CAACL,WAAW,EAACsJ,IAAI,CAAE,EAAG,CAAE,CAAC,EACnB,CAAC,cACT/I,KAAA,WACE6I,OAAO,CAAEd,WAAY,CACrB/E,SAAS,CAAC,4LAA4L,CAAAE,QAAA,eAEtMpD,IAAA,CAACF,WAAW,EAACmJ,IAAI,CAAE,EAAG,CAAE,CAAC,CACxBN,UAAU,EACL,CAAC,cACTzI,KAAA,WACE6I,OAAO,CAAEhB,KAAM,CACf7E,SAAS,CAAC,4LAA4L,CAAAE,QAAA,eAEtMpD,IAAA,CAACH,SAAS,EAACoJ,IAAI,CAAE,EAAG,CAAE,CAAC,QAEzB,EAAQ,CAAC,EACN,CAAC,cAGNjJ,IAAA,CAACT,eAAe,EAAC2J,IAAI,CAAC,MAAM,CAAA9F,QAAA,cAC1BlD,KAAA,CAACZ,MAAM,CAACkD,GAAG,EAETE,OAAO,CAAE,CAAEC,OAAO,CAAE,CAAC,CAAE2B,CAAC,CAAE,EAAG,CAAE,CAC/BzB,OAAO,CAAE,CAAEF,OAAO,CAAE,CAAC,CAAE2B,CAAC,CAAE,CAAE,CAAE,CAC9B6E,IAAI,CAAE,CAAExG,OAAO,CAAE,CAAC,CAAE2B,CAAC,CAAE,CAAC,EAAG,CAAE,CAC7BvB,UAAU,CAAE,CAAEkD,QAAQ,CAAE,GAAI,CAAE,CAAA7C,QAAA,eAE9BlD,KAAA,QAAKgD,SAAS,+BAAAC,MAAA,CACZuE,IAAI,CAACzG,SAAS,GAAK,UAAU,EAAIyG,IAAI,CAACzG,SAAS,GAAK,OAAO,CACvD,gCAAgC,CAChCyG,IAAI,CAACzG,SAAS,GAAK,UAAU,CAC7B,sCAAsC,CACtCyG,IAAI,CAACzG,SAAS,GAAK,MAAM,CACzB,wCAAwC,CACxC,yCAAyC,CAC5C,CAAAmC,QAAA,eACDpD,IAAA,OAAIkD,SAAS,CAAC,qCAAqC,CAAAE,QAAA,CAChDsE,IAAI,CAACrH,KAAK,CACT,CAAC,cACLH,KAAA,QAAKgD,SAAS,iEAAAC,MAAA,CACZuE,IAAI,CAACzG,SAAS,GAAK,UAAU,EAAIyG,IAAI,CAACzG,SAAS,GAAK,OAAO,CACvD,4BAA4B,CAC5ByG,IAAI,CAACzG,SAAS,GAAK,UAAU,CAC7B,kCAAkC,CAClC,8BAA8B,CACjC,CAAAmC,QAAA,EAAC,MACE,CAACsE,IAAI,CAACpH,QAAQ,EACf,CAAC,cACNN,IAAA,MAAGkD,SAAS,CAAC,+CAA+C,CAAAE,QAAA,CACzDsE,IAAI,CAACnH,WAAW,CAChB,CAAC,EACD,CAAC,cAGNL,KAAA,QAAKgD,SAAS,CAAC,4CAA4C,CAAAE,QAAA,eAEzDlD,KAAA,QAAKgD,SAAS,CAAC,yBAAyB,CAAAE,QAAA,eACtCpD,IAAA,QAAKkD,SAAS,CAAC,sEAAsE,CAAAE,QAAA,CAAC,0BAEtF,CAAK,CAAC,CACLsE,IAAI,CAAClH,OAAO,CAAC8C,GAAG,CAAEW,CAAC,eAClBjE,IAAA,CAACmC,SAAS,EAERE,MAAM,CAAE4B,CAAE,CACV3B,aAAa,CACXoF,IAAI,CAACzG,SAAS,GAAKgD,CAAC,CAAC7D,EAAE,EACtBsH,IAAI,CAACzG,SAAS,GAAK,WAAW,EAAIgD,CAAC,CAAC7D,EAAE,CAAC8D,UAAU,CAAC,GAAG,CAAE,EACvDwD,IAAI,CAACzG,SAAS,GAAK,UAAU,EAAIgD,CAAC,CAACvD,KAAK,GAAK,YAAa,EAC1DgH,IAAI,CAACzG,SAAS,GAAK,OAAO,EAAIgD,CAAC,CAACvD,KAAK,GAAK,YAC5C,EAPIuD,CAAC,CAAC7D,EAQR,CACF,CAAC,EACC,CAAC,cAGNF,KAAA,QAAKgD,SAAS,CAAC,yBAAyB,CAAAE,QAAA,eACtCpD,IAAA,QAAKkD,SAAS,CAAC,sEAAsE,CAAAE,QAAA,CAAC,yBAEtF,CAAK,CAAC,CACLsE,IAAI,CAAC7G,SAAS,CAACyC,GAAG,CAAEC,CAAC,eACpBvD,IAAA,CAACwD,WAAW,EAEVE,QAAQ,CAAEH,CAAE,CACZjB,aAAa,CAAEoF,IAAI,CAACzG,SAAS,GAAK,WAAY,EAFzCsC,CAAC,CAACnD,EAGR,CACF,CAAC,cAGFF,KAAA,QAAKgD,SAAS,CAAC,oEAAoE,CAAAE,QAAA,eACjFpD,IAAA,QAAKkD,SAAS,CAAC,sEAAsE,CAAAE,QAAA,CAAC,eAEtF,CAAK,CAAC,cACNpD,IAAA,QAAKkD,SAAS,CAAC,wBAAwB,CAAAE,QAAA,CACpCgG,MAAM,CAACC,OAAO,CAAC7H,YAAY,CAAC,CAAC8B,GAAG,CAACgG,KAAA,MAAC,CAACC,GAAG,CAAEC,GAAG,CAAC,CAAAF,KAAA,oBAC3CpJ,KAAA,QAAegD,SAAS,CAAC,2BAA2B,CAAAE,QAAA,eAClDpD,IAAA,SAAMkD,SAAS,yBAAAC,MAAA,CAA0BqG,GAAG,CAAC3H,GAAG,CAAG,CAAE,CAAC,cACtD7B,IAAA,SAAMkD,SAAS,eAAAC,MAAA,CAAgBqG,GAAG,CAAC5H,IAAI,CAAG,CAAAwB,QAAA,CAAEoG,GAAG,CAAC/I,KAAK,CAAO,CAAC,GAFrD8I,GAGL,CAAC,EACP,CAAC,CACC,CAAC,EACH,CAAC,EACH,CAAC,cAGNrJ,KAAA,QAAKgD,SAAS,CAAC,eAAe,CAAAE,QAAA,eAC5BpD,IAAA,QAAKkD,SAAS,CAAC,sEAAsE,CAAAE,QAAA,CAAC,2BAEtF,CAAK,CAAC,cACNpD,IAAA,CAAC6D,gBAAgB,EACfrD,OAAO,CAAEkH,IAAI,CAAClH,OAAQ,CACtBK,SAAS,CAAE6G,IAAI,CAAC7G,SAAU,CAC1BG,MAAM,CAAE0G,IAAI,CAAC1G,MAAO,CACrB,CAAC,EACC,CAAC,EACH,CAAC,cAGNd,KAAA,QAAAkD,QAAA,eACEpD,IAAA,QAAKkD,SAAS,CAAC,sEAAsE,CAAAE,QAAA,CAAC,uBAEtF,CAAK,CAAC,cACNpD,IAAA,QAAKkD,SAAS,CAAC,sIAAsI,CAAAE,QAAA,CAClJsE,IAAI,CAACxG,WAAW,CACd,CAAC,EACH,CAAC,GAvGDwG,IAAI,CAACtH,EAwGA,CAAC,CACE,CAAC,EACT,CAAC,CAEhB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}